{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"api/","title":"LEADR API Documentation","text":"<p>Welcome to the LEADR API documentation.</p>"},{"location":"api/#documentation-sections","title":"Documentation Sections","text":""},{"location":"api/#python-api-reference","title":"Python API Reference","text":"<p>Complete reference for all Python modules, classes, and functions in the LEADR codebase. Auto-generated from docstrings using griffe2md.</p>"},{"location":"api/#architecture-patterns","title":"Architecture Patterns","text":"<p>Comprehensive guide to the Domain-Driven Design patterns and best practices used throughout the LEADR codebase.</p>"},{"location":"api/#http-api-reference","title":"HTTP API Reference","text":"<p>Complete REST API documentation for all HTTP endpoints. Auto-generated from the FastAPI application's OpenAPI specification.</p>"},{"location":"api/#quick-links","title":"Quick Links","text":"<ul> <li>GitHub Repository</li> <li>Getting Started Guide</li> <li>Contributing Guidelines</li> </ul>"},{"location":"api/#about-leadr","title":"About LEADR","text":"<p>LEADR is a cross-platform leaderboard backend for indie game developers. It's an open-source FastAPI-based REST API that provides leaderboard functionality with features like:</p> <ul> <li>Multi-tenant account management</li> <li>Flexible leaderboard configurations</li> <li>Score tracking with metadata</li> <li>API key authentication</li> <li>Beautiful web views</li> <li>Anti-cheat protection (planned)</li> <li>Season support (planned)</li> </ul>"},{"location":"api/#development","title":"Development","text":"<p>For information about contributing to LEADR, setting up your development environment, and understanding the codebase architecture, please refer to:</p> <ul> <li>Project README for quick start</li> <li><code>CLAUDE.md</code> for AI assistant guidance</li> <li><code>patterns.md</code> for architectural patterns</li> <li>Python API Reference (this documentation) for code details</li> </ul> <p>Last updated: Auto-generated on release</p>"},{"location":"api/http-api/","title":"LEADR - Admin &amp; Client API v0.1.0","text":"<p>Scroll down for code samples, example requests and responses. Select a language for code samples from the tabs above or the mobile navigation menu.</p> <p>LEADR is the cross-platform leaderboard backend for indie game devs</p>"},{"location":"api/http-api/#health","title":"Health","text":""},{"location":"api/http-api/#health-check","title":"Health Check","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Accept': 'application/json'\n}\n\nr = requests.get('/v1/health', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const headers = {\n  'Accept':'application/json'\n};\n\nfetch('/v1/health',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>GET /v1/health</code></p> <p>Health check endpoint.</p> <p>Verifies that the API is running and can connect to the database. Returns degraded status if database connectivity fails.</p> <p>Args:     db: Database session dependency.</p> <p>Returns:     HealthResponse with API and database status.</p> <p>Example responses</p> <p>200 Response</p> <pre><code>{\n  \"status\": \"string\",\n  \"database\": \"string\"\n}\n</code></pre>"},{"location":"api/http-api/#responses","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response HealthResponse <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#root","title":"Root","text":""},{"location":"api/http-api/#root_1","title":"Root","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Accept': 'application/json'\n}\n\nr = requests.get('/v1/', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const headers = {\n  'Accept':'application/json'\n};\n\nfetch('/v1/',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>GET /v1/</code></p> <p>Root endpoint.</p> <p>Returns basic API information including version and documentation URL.</p> <p>Returns:     Dict containing API metadata.</p> <p>Example responses</p> <p>200 Response</p> <pre><code>null\n</code></pre>"},{"location":"api/http-api/#responses_1","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response Inline"},{"location":"api/http-api/#response-schema","title":"Response Schema","text":"<p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#accounts","title":"Accounts","text":""},{"location":"api/http-api/#create-account","title":"Create Account","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Content-Type': 'application/json',\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.post('/v1/accounts', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const inputBody = '{\n  \"name\": \"string\",\n  \"slug\": \"string\"\n}';\nconst headers = {\n  'Content-Type':'application/json',\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/accounts',\n{\n  method: 'POST',\n  body: inputBody,\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>POST /v1/accounts</code></p> <p>Create a new account.</p> <p>Args:     request: Account creation details including name and slug.     service: Injected account service dependency.</p> <p>Returns:     AccountResponse with the created account including auto-generated ID and timestamps.</p> <p>Body parameter</p> <pre><code>{\n  \"name\": \"string\",\n  \"slug\": \"string\"\n}\n</code></pre>"},{"location":"api/http-api/#parameters","title":"Parameters","text":"Name In Type Required Description leadr-api-key header any false none body body AccountCreateRequest true none <p>Example responses</p> <p>201 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"name\": \"string\",\n  \"slug\": \"string\",\n  \"status\": \"active\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_2","title":"Responses","text":"Status Meaning Description Schema 201 Created Successful Response AccountResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#list-accounts","title":"List Accounts","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.get('/v1/accounts', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const headers = {\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/accounts',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>GET /v1/accounts</code></p> <p>List all accounts.</p> <p>Args:     service: Injected account service dependency.</p> <p>Returns:     List of all active accounts.</p>"},{"location":"api/http-api/#parameters_1","title":"Parameters","text":"Name In Type Required Description leadr-api-key header any false none <p>Example responses</p> <p>200 Response</p> <pre><code>[\n  {\n    \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n    \"name\": \"string\",\n    \"slug\": \"string\",\n    \"status\": \"active\",\n    \"created_at\": \"2019-08-24T14:15:22Z\",\n    \"updated_at\": \"2019-08-24T14:15:22Z\"\n  }\n]\n</code></pre>"},{"location":"api/http-api/#responses_3","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response Inline 422 Unprocessable Entity Validation Error HTTPValidationError"},{"location":"api/http-api/#response-schema_1","title":"Response Schema","text":"<p>Status Code 200</p> <p>Response List Accounts V1 Accounts Get</p> Name Type Required Restrictions Description Response List Accounts V1 Accounts Get [AccountResponse] false none [Response model for an account.] \u00bb AccountResponse AccountResponse false none Response model for an account. \u00bb\u00bb id string(uuid) true none Unique identifier for the account \u00bb\u00bb name string true none Account name \u00bb\u00bb slug string true none URL-friendly identifier \u00bb\u00bb status AccountStatus true none Account status enumeration. \u00bb\u00bb created_at string(date-time) true none Timestamp when the account was created (UTC) \u00bb\u00bb updated_at string(date-time) true none Timestamp of last update (UTC)"},{"location":"api/http-api/#enumerated-values","title":"Enumerated Values","text":"Property Value status active status suspended <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#get-account","title":"Get Account","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.get('/v1/accounts/{account_id}', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const headers = {\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/accounts/{account_id}',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>GET /v1/accounts/{account_id}</code></p> <p>Get an account by ID.</p> <p>Args:     account_id: Unique identifier for the account.     service: Injected account service dependency.</p> <p>Returns:     AccountResponse with full account details.</p> <p>Raises:     404: Account not found.</p>"},{"location":"api/http-api/#parameters_2","title":"Parameters","text":"Name In Type Required Description account_id path string(uuid4) true none leadr-api-key header any false none <p>Example responses</p> <p>200 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"name\": \"string\",\n  \"slug\": \"string\",\n  \"status\": \"active\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_4","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response AccountResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#update-account","title":"Update Account","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Content-Type': 'application/json',\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.patch('/v1/accounts/{account_id}', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const inputBody = '{\n  \"name\": \"string\",\n  \"slug\": \"string\",\n  \"status\": \"active\",\n  \"deleted\": true\n}';\nconst headers = {\n  'Content-Type':'application/json',\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/accounts/{account_id}',\n{\n  method: 'PATCH',\n  body: inputBody,\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>PATCH /v1/accounts/{account_id}</code></p> <p>Update an account.</p> <p>Supports updating name, slug, status, or soft-deleting the account. Status changes (active/suspended) are handled through dedicated service methods.</p> <p>Args:     account_id: Unique identifier for the account.     request: Account update details (all fields optional).     service: Injected account service dependency.</p> <p>Returns:     AccountResponse with the updated account details.</p> <p>Raises:     404: Account not found.</p> <p>Body parameter</p> <pre><code>{\n  \"name\": \"string\",\n  \"slug\": \"string\",\n  \"status\": \"active\",\n  \"deleted\": true\n}\n</code></pre>"},{"location":"api/http-api/#parameters_3","title":"Parameters","text":"Name In Type Required Description account_id path string(uuid4) true none leadr-api-key header any false none body body AccountUpdateRequest true none <p>Example responses</p> <p>200 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"name\": \"string\",\n  \"slug\": \"string\",\n  \"status\": \"active\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_5","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response AccountResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#create-user","title":"Create User","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Content-Type': 'application/json',\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.post('/v1/users', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const inputBody = '{\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"email\": \"user@example.com\",\n  \"display_name\": \"string\"\n}';\nconst headers = {\n  'Content-Type':'application/json',\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/users',\n{\n  method: 'POST',\n  body: inputBody,\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>POST /v1/users</code></p> <p>Create a new user.</p> <p>Creates a new user associated with an existing account.</p> <p>Args:     request: User creation details including account_id, email, and display name.     service: Injected user service dependency.</p> <p>Returns:     UserResponse with the created user including auto-generated ID and timestamps.</p> <p>Raises:     404: Account not found.</p> <p>Body parameter</p> <pre><code>{\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"email\": \"user@example.com\",\n  \"display_name\": \"string\"\n}\n</code></pre>"},{"location":"api/http-api/#parameters_4","title":"Parameters","text":"Name In Type Required Description leadr-api-key header any false none body body UserCreateRequest true none <p>Example responses</p> <p>201 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"email\": \"string\",\n  \"display_name\": \"string\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_6","title":"Responses","text":"Status Meaning Description Schema 201 Created Successful Response UserResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#list-users","title":"List Users","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.get('/v1/users', params={\n  'account_id': 'string'\n}, headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const headers = {\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/users?account_id=string',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>GET /v1/users</code></p> <p>List users for an account.</p> <p>TODO: Replace account_id query param with account_id from auth token.</p> <p>Args:     service: Injected user service dependency.     account_id: Account ID to filter results (REQUIRED for multi-tenant safety).</p> <p>Returns:     List of users for the account.</p>"},{"location":"api/http-api/#parameters_5","title":"Parameters","text":"Name In Type Required Description account_id query string(uuid4) true Account ID to filter by leadr-api-key header any false none <p>Example responses</p> <p>200 Response</p> <pre><code>[\n  {\n    \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n    \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n    \"email\": \"string\",\n    \"display_name\": \"string\",\n    \"created_at\": \"2019-08-24T14:15:22Z\",\n    \"updated_at\": \"2019-08-24T14:15:22Z\"\n  }\n]\n</code></pre>"},{"location":"api/http-api/#responses_7","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response Inline 422 Unprocessable Entity Validation Error HTTPValidationError"},{"location":"api/http-api/#response-schema_2","title":"Response Schema","text":"<p>Status Code 200</p> <p>Response List Users V1 Users Get</p> Name Type Required Restrictions Description Response List Users V1 Users Get [UserResponse] false none [Response model for a user.] \u00bb UserResponse UserResponse false none Response model for a user. \u00bb\u00bb id string(uuid) true none Unique identifier for the user \u00bb\u00bb account_id string(uuid) true none ID of the account this user belongs to \u00bb\u00bb email string true none User's email address \u00bb\u00bb display_name string true none User's display name \u00bb\u00bb created_at string(date-time) true none Timestamp when the user was created (UTC) \u00bb\u00bb updated_at string(date-time) true none Timestamp of last update (UTC) <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#get-user","title":"Get User","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.get('/v1/users/{user_id}', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const headers = {\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/users/{user_id}',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>GET /v1/users/{user_id}</code></p> <p>Get a user by ID.</p> <p>Args:     user_id: Unique identifier for the user.     service: Injected user service dependency.</p> <p>Returns:     UserResponse with full user details.</p> <p>Raises:     404: User not found.</p>"},{"location":"api/http-api/#parameters_6","title":"Parameters","text":"Name In Type Required Description user_id path string(uuid4) true none leadr-api-key header any false none <p>Example responses</p> <p>200 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"email\": \"string\",\n  \"display_name\": \"string\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_8","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response UserResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#update-user","title":"Update User","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Content-Type': 'application/json',\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.patch('/v1/users/{user_id}', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const inputBody = '{\n  \"email\": \"user@example.com\",\n  \"display_name\": \"string\",\n  \"deleted\": true\n}';\nconst headers = {\n  'Content-Type':'application/json',\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/users/{user_id}',\n{\n  method: 'PATCH',\n  body: inputBody,\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>PATCH /v1/users/{user_id}</code></p> <p>Update a user.</p> <p>Supports updating email, display name, or soft-deleting the user.</p> <p>Args:     user_id: Unique identifier for the user.     request: User update details (all fields optional).     service: Injected user service dependency.</p> <p>Returns:     UserResponse with the updated user details.</p> <p>Raises:     404: User not found.</p> <p>Body parameter</p> <pre><code>{\n  \"email\": \"user@example.com\",\n  \"display_name\": \"string\",\n  \"deleted\": true\n}\n</code></pre>"},{"location":"api/http-api/#parameters_7","title":"Parameters","text":"Name In Type Required Description user_id path string(uuid4) true none leadr-api-key header any false none body body UserUpdateRequest true none <p>Example responses</p> <p>200 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"email\": \"string\",\n  \"display_name\": \"string\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_9","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response UserResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#api-keys","title":"API Keys","text":""},{"location":"api/http-api/#create-api-key","title":"Create Api Key","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Content-Type': 'application/json',\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.post('/v1/api-keys', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const inputBody = '{\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"expires_at\": \"2019-08-24T14:15:22Z\"\n}';\nconst headers = {\n  'Content-Type':'application/json',\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/api-keys',\n{\n  method: 'POST',\n  body: inputBody,\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>POST /v1/api-keys</code></p> <p>Create a new API key for an account.</p> <p>The plain API key is returned only once in this response. Store it securely as it cannot be retrieved later.</p> <p>Returns:     CreateAPIKeyResponse with the plain key included.</p> <p>Raises:     404: Account not found.</p> <p>Body parameter</p> <pre><code>{\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"expires_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#parameters_8","title":"Parameters","text":"Name In Type Required Description leadr-api-key header any false none body body CreateAPIKeyRequest true none <p>Example responses</p> <p>201 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"name\": \"string\",\n  \"key\": \"string\",\n  \"prefix\": \"string\",\n  \"status\": \"active\",\n  \"expires_at\": \"2019-08-24T14:15:22Z\",\n  \"created_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_10","title":"Responses","text":"Status Meaning Description Schema 201 Created Successful Response CreateAPIKeyResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#list-api-keys","title":"List Api Keys","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.get('/v1/api-keys', params={\n  'account_id': 'string'\n}, headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const headers = {\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/api-keys?account_id=string',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>GET /v1/api-keys</code></p> <p>List API keys for an account with optional filters.</p> <p>TODO: Replace account_id query param with account_id from auth token.</p> <p>Args:     account_id: Account ID to filter results (REQUIRED for multi-tenant safety).     status: Optional status to filter results (active or revoked).</p> <p>Returns:     List of API keys matching the filters.</p>"},{"location":"api/http-api/#parameters_9","title":"Parameters","text":"Name In Type Required Description account_id query string(uuid4) true Account ID to filter by status query any false Filter by status leadr-api-key header any false none <p>Example responses</p> <p>200 Response</p> <pre><code>[\n  {\n    \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n    \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n    \"name\": \"string\",\n    \"prefix\": \"string\",\n    \"status\": \"active\",\n    \"last_used_at\": \"2019-08-24T14:15:22Z\",\n    \"expires_at\": \"2019-08-24T14:15:22Z\",\n    \"created_at\": \"2019-08-24T14:15:22Z\",\n    \"updated_at\": \"2019-08-24T14:15:22Z\"\n  }\n]\n</code></pre>"},{"location":"api/http-api/#responses_11","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response Inline 422 Unprocessable Entity Validation Error HTTPValidationError"},{"location":"api/http-api/#response-schema_3","title":"Response Schema","text":"<p>Status Code 200</p> <p>Response List Api Keys V1 Api Keys Get</p> Name Type Required Restrictions Description Response List Api Keys V1 Api Keys Get [APIKeyResponse] false none [Response schema for API key details.Excludes sensitive information like key_hash.The full key is never returned after creation.] \u00bb APIKeyResponse APIKeyResponse false none Response schema for API key details.Excludes sensitive information like key_hash.The full key is never returned after creation. \u00bb\u00bb id string(uuid) true none Unique identifier for the API key \u00bb\u00bb account_id string(uuid) true none ID of the account this key belongs to \u00bb\u00bb name string true none Human-readable name for the API key \u00bb\u00bb prefix string true none Key prefix for identification (first 8 characters) \u00bb\u00bb status APIKeyStatus true none API Key status enumeration. \u00bb\u00bb last_used_at any false none Timestamp of last successful authentication (UTC) <p>anyOf</p> Name Type Required Restrictions Description \u00bb\u00bb\u00bb anonymous string(date-time) false none none <p>or</p> Name Type Required Restrictions Description \u00bb\u00bb\u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description \u00bb\u00bb expires_at any false none Expiration timestamp (UTC), or null if never expires <p>anyOf</p> Name Type Required Restrictions Description \u00bb\u00bb\u00bb anonymous string(date-time) false none none <p>or</p> Name Type Required Restrictions Description \u00bb\u00bb\u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description \u00bb\u00bb created_at string(date-time) true none Timestamp when the key was created (UTC) \u00bb\u00bb updated_at string(date-time) true none Timestamp of last update (UTC)"},{"location":"api/http-api/#enumerated-values_1","title":"Enumerated Values","text":"Property Value status active status revoked <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#get-api-key","title":"Get Api Key","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.get('/v1/api-keys/{key_id}', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const headers = {\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/api-keys/{key_id}',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>GET /v1/api-keys/{key_id}</code></p> <p>Get a single API key by ID.</p> <p>Args:     key_id: The UUID of the API key to retrieve.</p> <p>Returns:     APIKeyResponse with key details (excludes the plain key).</p> <p>Raises:     404: API key not found.</p>"},{"location":"api/http-api/#parameters_10","title":"Parameters","text":"Name In Type Required Description key_id path string(uuid4) true none leadr-api-key header any false none <p>Example responses</p> <p>200 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"prefix\": \"string\",\n  \"status\": \"active\",\n  \"last_used_at\": \"2019-08-24T14:15:22Z\",\n  \"expires_at\": \"2019-08-24T14:15:22Z\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_12","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response APIKeyResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#update-api-key","title":"Update Api Key","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Content-Type': 'application/json',\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.patch('/v1/api-keys/{key_id}', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const inputBody = '{\n  \"status\": \"active\",\n  \"deleted\": true\n}';\nconst headers = {\n  'Content-Type':'application/json',\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/api-keys/{key_id}',\n{\n  method: 'PATCH',\n  body: inputBody,\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>PATCH /v1/api-keys/{key_id}</code></p> <p>Update an API key.</p> <p>Currently supports: - Updating status (e.g., to revoke a key) - Soft delete via deleted flag</p> <p>Args:     key_id: The UUID of the API key to update.     request: Update request with optional status and deleted fields.</p> <p>Returns:     APIKeyResponse with updated key details.</p> <p>Raises:     404: API key not found.</p> <p>Body parameter</p> <pre><code>{\n  \"status\": \"active\",\n  \"deleted\": true\n}\n</code></pre>"},{"location":"api/http-api/#parameters_11","title":"Parameters","text":"Name In Type Required Description key_id path string(uuid4) true none leadr-api-key header any false none body body UpdateAPIKeyRequest true none <p>Example responses</p> <p>200 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"prefix\": \"string\",\n  \"status\": \"active\",\n  \"last_used_at\": \"2019-08-24T14:15:22Z\",\n  \"expires_at\": \"2019-08-24T14:15:22Z\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_13","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response APIKeyResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#games","title":"Games","text":""},{"location":"api/http-api/#create-game","title":"Create Game","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Content-Type': 'application/json',\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.post('/v1/games', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const inputBody = '{\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"steam_app_id\": \"string\",\n  \"default_board_id\": \"d242572a-54cf-433e-9831-a8453b36773b\"\n}';\nconst headers = {\n  'Content-Type':'application/json',\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/games',\n{\n  method: 'POST',\n  body: inputBody,\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>POST /v1/games</code></p> <p>Create a new game.</p> <p>Creates a new game associated with an existing account. Games can optionally be configured with Steam integration and a default leaderboard.</p> <p>Args:     request: Game creation details including account_id, name, and optional settings.     service: Injected game service dependency.</p> <p>Returns:     GameResponse with the created game including auto-generated ID and timestamps.</p> <p>Raises:     404: Account not found.</p> <p>Body parameter</p> <pre><code>{\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"steam_app_id\": \"string\",\n  \"default_board_id\": \"d242572a-54cf-433e-9831-a8453b36773b\"\n}\n</code></pre>"},{"location":"api/http-api/#parameters_12","title":"Parameters","text":"Name In Type Required Description leadr-api-key header any false none body body GameCreateRequest true none <p>Example responses</p> <p>201 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"steam_app_id\": \"string\",\n  \"default_board_id\": \"d242572a-54cf-433e-9831-a8453b36773b\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_14","title":"Responses","text":"Status Meaning Description Schema 201 Created Successful Response GameResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#list-games","title":"List Games","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.get('/v1/games', params={\n  'account_id': '497f6eca-6276-4993-bfeb-53cbbbba6f08'\n}, headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const headers = {\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/games?account_id=497f6eca-6276-4993-bfeb-53cbbbba6f08',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>GET /v1/games</code></p> <p>List all games for an account.</p> <p>Args:     account_id: Account ID to filter games by.     service: Injected game service dependency.</p> <p>Returns:     List of all active games for the specified account.</p>"},{"location":"api/http-api/#parameters_13","title":"Parameters","text":"Name In Type Required Description account_id query string(uuid) true none leadr-api-key header any false none <p>Example responses</p> <p>200 Response</p> <pre><code>[\n  {\n    \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n    \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n    \"name\": \"string\",\n    \"steam_app_id\": \"string\",\n    \"default_board_id\": \"d242572a-54cf-433e-9831-a8453b36773b\",\n    \"created_at\": \"2019-08-24T14:15:22Z\",\n    \"updated_at\": \"2019-08-24T14:15:22Z\"\n  }\n]\n</code></pre>"},{"location":"api/http-api/#responses_15","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response Inline 422 Unprocessable Entity Validation Error HTTPValidationError"},{"location":"api/http-api/#response-schema_4","title":"Response Schema","text":"<p>Status Code 200</p> <p>Response List Games V1 Games Get</p> Name Type Required Restrictions Description Response List Games V1 Games Get [GameResponse] false none [Response model for a game.] \u00bb GameResponse GameResponse false none Response model for a game. \u00bb\u00bb id string(uuid) true none Unique identifier for the game \u00bb\u00bb account_id string(uuid) true none ID of the account this game belongs to \u00bb\u00bb name string true none Name of the game \u00bb\u00bb steam_app_id any false none Steam App ID if Steam integration is configured <p>anyOf</p> Name Type Required Restrictions Description \u00bb\u00bb\u00bb anonymous string false none none <p>or</p> Name Type Required Restrictions Description \u00bb\u00bb\u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description \u00bb\u00bb default_board_id any false none ID of the default leaderboard, or null if not set <p>anyOf</p> Name Type Required Restrictions Description \u00bb\u00bb\u00bb anonymous string(uuid) false none none <p>or</p> Name Type Required Restrictions Description \u00bb\u00bb\u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description \u00bb\u00bb created_at string(date-time) true none Timestamp when the game was created (UTC) \u00bb\u00bb updated_at string(date-time) true none Timestamp of last update (UTC) <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#get-game","title":"Get Game","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.get('/v1/games/{game_id}', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const headers = {\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/games/{game_id}',\n{\n  method: 'GET',\n\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>GET /v1/games/{game_id}</code></p> <p>Get a game by ID.</p> <p>Args:     game_id: Unique identifier for the game.     service: Injected game service dependency.</p> <p>Returns:     GameResponse with full game details.</p> <p>Raises:     404: Game not found.</p>"},{"location":"api/http-api/#parameters_14","title":"Parameters","text":"Name In Type Required Description game_id path string(uuid) true none leadr-api-key header any false none <p>Example responses</p> <p>200 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"steam_app_id\": \"string\",\n  \"default_board_id\": \"d242572a-54cf-433e-9831-a8453b36773b\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_16","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response GameResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#update-game","title":"Update Game","text":"PythonJavaScript <pre><code>import requests\nheaders = {\n  'Content-Type': 'application/json',\n  'Accept': 'application/json',\n  'leadr-api-key': 'string'\n}\n\nr = requests.patch('/v1/games/{game_id}', headers = headers)\n\nprint(r.json())\n</code></pre> <pre><code>const inputBody = '{\n  \"name\": \"string\",\n  \"steam_app_id\": \"string\",\n  \"default_board_id\": \"d242572a-54cf-433e-9831-a8453b36773b\",\n  \"deleted\": true\n}';\nconst headers = {\n  'Content-Type':'application/json',\n  'Accept':'application/json',\n  'leadr-api-key':'string'\n};\n\nfetch('/v1/games/{game_id}',\n{\n  method: 'PATCH',\n  body: inputBody,\n  headers: headers\n})\n.then(function(res) {\n    return res.json();\n}).then(function(body) {\n    console.log(body);\n});\n</code></pre> <p><code>PATCH /v1/games/{game_id}</code></p> <p>Update a game.</p> <p>Supports updating name, Steam App ID, default board ID, or soft-deleting the game.</p> <p>Args:     game_id: Unique identifier for the game.     request: Game update details (all fields optional).     service: Injected game service dependency.</p> <p>Returns:     GameResponse with the updated game details.</p> <p>Raises:     404: Game not found.</p> <p>Body parameter</p> <pre><code>{\n  \"name\": \"string\",\n  \"steam_app_id\": \"string\",\n  \"default_board_id\": \"d242572a-54cf-433e-9831-a8453b36773b\",\n  \"deleted\": true\n}\n</code></pre>"},{"location":"api/http-api/#parameters_15","title":"Parameters","text":"Name In Type Required Description game_id path string(uuid) true none leadr-api-key header any false none body body GameUpdateRequest true none <p>Example responses</p> <p>200 Response</p> <pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"steam_app_id\": \"string\",\n  \"default_board_id\": \"d242572a-54cf-433e-9831-a8453b36773b\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre>"},{"location":"api/http-api/#responses_17","title":"Responses","text":"Status Meaning Description Schema 200 OK Successful Response GameResponse 422 Unprocessable Entity Validation Error HTTPValidationError <p>Success</p> <p>This operation does not require authentication</p>"},{"location":"api/http-api/#schemas","title":"Schemas","text":""},{"location":"api/http-api/#apikeyresponse","title":"APIKeyResponse","text":"<pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"prefix\": \"string\",\n  \"status\": \"active\",\n  \"last_used_at\": \"2019-08-24T14:15:22Z\",\n  \"expires_at\": \"2019-08-24T14:15:22Z\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre> <p>APIKeyResponse</p>"},{"location":"api/http-api/#properties","title":"Properties","text":"Name Type Required Restrictions Description id string(uuid) true none Unique identifier for the API key account_id string(uuid) true none ID of the account this key belongs to name string true none Human-readable name for the API key prefix string true none Key prefix for identification (first 8 characters) status APIKeyStatus true none Current status (active, revoked, expired) last_used_at any false none Timestamp of last successful authentication (UTC) <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string(date-time) false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description expires_at any false none Expiration timestamp (UTC), or null if never expires <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string(date-time) false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description created_at string(date-time) true none Timestamp when the key was created (UTC) updated_at string(date-time) true none Timestamp of last update (UTC)"},{"location":"api/http-api/#apikeystatus","title":"APIKeyStatus","text":"<pre><code>\"active\"\n</code></pre> <p>APIKeyStatus</p>"},{"location":"api/http-api/#properties_1","title":"Properties","text":"Name Type Required Restrictions Description APIKeyStatus string false none API Key status enumeration."},{"location":"api/http-api/#enumerated-values_2","title":"Enumerated Values","text":"Property Value APIKeyStatus active APIKeyStatus revoked"},{"location":"api/http-api/#accountcreaterequest","title":"AccountCreateRequest","text":"<pre><code>{\n  \"name\": \"string\",\n  \"slug\": \"string\"\n}\n</code></pre> <p>AccountCreateRequest</p>"},{"location":"api/http-api/#properties_2","title":"Properties","text":"Name Type Required Restrictions Description name string true none Account name (2-100 characters) slug string true none URL-friendly identifier for the account (lowercase, alphanumeric, hyphens)"},{"location":"api/http-api/#accountresponse","title":"AccountResponse","text":"<pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"name\": \"string\",\n  \"slug\": \"string\",\n  \"status\": \"active\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre> <p>AccountResponse</p>"},{"location":"api/http-api/#properties_3","title":"Properties","text":"Name Type Required Restrictions Description id string(uuid) true none Unique identifier for the account name string true none Account name slug string true none URL-friendly identifier status AccountStatus true none Current account status created_at string(date-time) true none Timestamp when the account was created (UTC) updated_at string(date-time) true none Timestamp of last update (UTC)"},{"location":"api/http-api/#accountstatus","title":"AccountStatus","text":"<pre><code>\"active\"\n</code></pre> <p>AccountStatus</p>"},{"location":"api/http-api/#properties_4","title":"Properties","text":"Name Type Required Restrictions Description AccountStatus string false none Account status enumeration."},{"location":"api/http-api/#enumerated-values_3","title":"Enumerated Values","text":"Property Value AccountStatus active AccountStatus suspended"},{"location":"api/http-api/#accountupdaterequest","title":"AccountUpdateRequest","text":"<pre><code>{\n  \"name\": \"string\",\n  \"slug\": \"string\",\n  \"status\": \"active\",\n  \"deleted\": true\n}\n</code></pre> <p>AccountUpdateRequest</p>"},{"location":"api/http-api/#properties_5","title":"Properties","text":"Name Type Required Restrictions Description name any false none Updated account name <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description slug any false none Updated URL-friendly identifier <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description status any false none Account status (active, suspended, deleted) <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous AccountStatus false none Account status enumeration. <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description deleted any false none Set to true to soft delete the account <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous boolean false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none"},{"location":"api/http-api/#createapikeyrequest","title":"CreateAPIKeyRequest","text":"<pre><code>{\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"expires_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre> <p>CreateAPIKeyRequest</p>"},{"location":"api/http-api/#properties_6","title":"Properties","text":"Name Type Required Restrictions Description account_id string(uuid) true none ID of the account this API key belongs to name string true none Human-readable name for the API key (e.g., 'Production Server') expires_at any false none Optional expiration timestamp (UTC). Key never expires if omitted <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string(date-time) false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none"},{"location":"api/http-api/#createapikeyresponse","title":"CreateAPIKeyResponse","text":"<pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"name\": \"string\",\n  \"key\": \"string\",\n  \"prefix\": \"string\",\n  \"status\": \"active\",\n  \"expires_at\": \"2019-08-24T14:15:22Z\",\n  \"created_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre> <p>CreateAPIKeyResponse</p>"},{"location":"api/http-api/#properties_7","title":"Properties","text":"Name Type Required Restrictions Description id string(uuid) true none Unique identifier for the API key name string true none Human-readable name for the API key key string true none Plain text API key. ONLY returned at creation - save this securely! prefix string true none Key prefix for identification (first 8 characters) status APIKeyStatus true none Current status of the API key expires_at any false none Expiration timestamp (UTC), or null if never expires <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string(date-time) false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description created_at string(date-time) true none Timestamp when the key was created (UTC)"},{"location":"api/http-api/#gamecreaterequest","title":"GameCreateRequest","text":"<pre><code>{\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"steam_app_id\": \"string\",\n  \"default_board_id\": \"d242572a-54cf-433e-9831-a8453b36773b\"\n}\n</code></pre> <p>GameCreateRequest</p>"},{"location":"api/http-api/#properties_8","title":"Properties","text":"Name Type Required Restrictions Description account_id string(uuid) true none ID of the account this game belongs to name string true none Name of the game steam_app_id any false none Optional Steam App ID for Steam integration <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description default_board_id any false none Optional ID of the default leaderboard for this game <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string(uuid) false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none"},{"location":"api/http-api/#gameresponse","title":"GameResponse","text":"<pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"name\": \"string\",\n  \"steam_app_id\": \"string\",\n  \"default_board_id\": \"d242572a-54cf-433e-9831-a8453b36773b\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre> <p>GameResponse</p>"},{"location":"api/http-api/#properties_9","title":"Properties","text":"Name Type Required Restrictions Description id string(uuid) true none Unique identifier for the game account_id string(uuid) true none ID of the account this game belongs to name string true none Name of the game steam_app_id any false none Steam App ID if Steam integration is configured <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description default_board_id any false none ID of the default leaderboard, or null if not set <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string(uuid) false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description created_at string(date-time) true none Timestamp when the game was created (UTC) updated_at string(date-time) true none Timestamp of last update (UTC)"},{"location":"api/http-api/#gameupdaterequest","title":"GameUpdateRequest","text":"<pre><code>{\n  \"name\": \"string\",\n  \"steam_app_id\": \"string\",\n  \"default_board_id\": \"d242572a-54cf-433e-9831-a8453b36773b\",\n  \"deleted\": true\n}\n</code></pre> <p>GameUpdateRequest</p>"},{"location":"api/http-api/#properties_10","title":"Properties","text":"Name Type Required Restrictions Description name any false none Updated game name <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description steam_app_id any false none Updated Steam App ID <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description default_board_id any false none Updated default leaderboard ID <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string(uuid) false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description deleted any false none Set to true to soft delete the game <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous boolean false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none"},{"location":"api/http-api/#httpvalidationerror","title":"HTTPValidationError","text":"<pre><code>{\n  \"detail\": [\n    {\n      \"loc\": [\n        \"string\"\n      ],\n      \"msg\": \"string\",\n      \"type\": \"string\"\n    }\n  ]\n}\n</code></pre> <p>HTTPValidationError</p>"},{"location":"api/http-api/#properties_11","title":"Properties","text":"Name Type Required Restrictions Description detail [ValidationError] false none none"},{"location":"api/http-api/#healthresponse","title":"HealthResponse","text":"<pre><code>{\n  \"status\": \"string\",\n  \"database\": \"string\"\n}\n</code></pre> <p>HealthResponse</p>"},{"location":"api/http-api/#properties_12","title":"Properties","text":"Name Type Required Restrictions Description status string true none Overall API health status (healthy, degraded, or unhealthy) database string true none Database connection status"},{"location":"api/http-api/#updateapikeyrequest","title":"UpdateAPIKeyRequest","text":"<pre><code>{\n  \"status\": \"active\",\n  \"deleted\": true\n}\n</code></pre> <p>UpdateAPIKeyRequest</p>"},{"location":"api/http-api/#properties_13","title":"Properties","text":"Name Type Required Restrictions Description status any false none Updated status (use 'revoked' to disable key) <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous APIKeyStatus false none API Key status enumeration. <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description deleted any false none Set to true to soft delete the key <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous boolean false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none"},{"location":"api/http-api/#usercreaterequest","title":"UserCreateRequest","text":"<pre><code>{\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"email\": \"user@example.com\",\n  \"display_name\": \"string\"\n}\n</code></pre> <p>UserCreateRequest</p>"},{"location":"api/http-api/#properties_14","title":"Properties","text":"Name Type Required Restrictions Description account_id string(uuid) true none ID of the account this user belongs to email string(email) true none User's email address (must be valid email format) display_name string true none User's display name (2-100 characters)"},{"location":"api/http-api/#userresponse","title":"UserResponse","text":"<pre><code>{\n  \"id\": \"497f6eca-6276-4993-bfeb-53cbbbba6f08\",\n  \"account_id\": \"449e7a5c-69d3-4b8a-aaaf-5c9b713ebc65\",\n  \"email\": \"string\",\n  \"display_name\": \"string\",\n  \"created_at\": \"2019-08-24T14:15:22Z\",\n  \"updated_at\": \"2019-08-24T14:15:22Z\"\n}\n</code></pre> <p>UserResponse</p>"},{"location":"api/http-api/#properties_15","title":"Properties","text":"Name Type Required Restrictions Description id string(uuid) true none Unique identifier for the user account_id string(uuid) true none ID of the account this user belongs to email string true none User's email address display_name string true none User's display name created_at string(date-time) true none Timestamp when the user was created (UTC) updated_at string(date-time) true none Timestamp of last update (UTC)"},{"location":"api/http-api/#userupdaterequest","title":"UserUpdateRequest","text":"<pre><code>{\n  \"email\": \"user@example.com\",\n  \"display_name\": \"string\",\n  \"deleted\": true\n}\n</code></pre> <p>UserUpdateRequest</p>"},{"location":"api/http-api/#properties_16","title":"Properties","text":"Name Type Required Restrictions Description email any false none Updated email address <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string(email) false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description display_name any false none Updated display name <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none <p>continued</p> Name Type Required Restrictions Description deleted any false none Set to true to soft delete the user <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous boolean false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous null false none none"},{"location":"api/http-api/#validationerror","title":"ValidationError","text":"<pre><code>{\n  \"loc\": [\n    \"string\"\n  ],\n  \"msg\": \"string\",\n  \"type\": \"string\"\n}\n</code></pre> <p>ValidationError</p>"},{"location":"api/http-api/#properties_17","title":"Properties","text":"Name Type Required Restrictions Description loc [anyOf] true none none <p>anyOf</p> Name Type Required Restrictions Description \u00bb anonymous string false none none <p>or</p> Name Type Required Restrictions Description \u00bb anonymous integer false none none <p>continued</p> Name Type Required Restrictions Description msg string true none none type string true none none"},{"location":"api/patterns/","title":"Architectural Patterns","text":"<p>This document describes the architectural patterns and conventions used throughout the LEADR codebase.</p>"},{"location":"api/patterns/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Domain-Driven Design Structure</li> <li>Repository Pattern</li> <li>Service Layer Pattern</li> <li>Error Handling</li> <li>API Schema Conversion</li> <li>Route Organization</li> <li>Soft Delete Pattern</li> </ol>"},{"location":"api/patterns/#domain-driven-design-structure","title":"Domain-Driven Design Structure","text":"<p>The codebase follows Domain-Driven Design (DDD) principles with clear separation of concerns:</p> <pre><code>src/leadr/{domain}/\n\u251c\u2500\u2500 domain/          # Domain entities and business rules\n\u2502   \u251c\u2500\u2500 {entity}.py\n\u251c\u2500\u2500 adapters/        # Infrastructure adapters (ORM, external services)\n\u2502   \u251c\u2500\u2500 orm.py\n\u251c\u2500\u2500 services/        # Application services and repositories\n\u2502   \u251c\u2500\u2500 {entity}_service.py\n\u2502   \u251c\u2500\u2500 {entity}_repository.py\n\u251c\u2500\u2500 api/            # API layer (routes, schemas)\n\u2502   \u251c\u2500\u2500 routes.py\n\u2502   \u251c\u2500\u2500 schemas.py\n</code></pre>"},{"location":"api/patterns/#layer-responsibilities","title":"Layer Responsibilities","text":"<ul> <li>Domain: Core business entities and rules. No dependencies on infrastructure.</li> <li>Adapters: Infrastructure concerns like database ORM models.</li> <li>Services: Application logic, orchestrates domain entities and repositories.</li> <li>API: HTTP concerns, request/response handling, delegates to services.</li> </ul>"},{"location":"api/patterns/#repository-pattern","title":"Repository Pattern","text":"<p>Repositories provide a collection-like interface for accessing domain entities. All repositories extend <code>BaseRepository</code>.</p>"},{"location":"api/patterns/#baserepository","title":"BaseRepository","text":"<p>Located in <code>src/leadr/common/base_repository.py</code>, provides standard CRUD operations:</p> <pre><code>from leadr.common.base_repository import BaseRepository\nfrom leadr.accounts.domain.account import Account\nfrom leadr.accounts.adapters.orm import AccountORM\n\nclass AccountRepository(BaseRepository[Account, AccountORM]):\n    def __init__(self, session: AsyncSession):\n        super().__init__(Account, AccountORM, session)\n</code></pre>"},{"location":"api/patterns/#standard-methods","title":"Standard Methods","text":"<ul> <li><code>get_by_id(entity_id: EntityID) -&gt; T | None</code></li> <li><code>create(entity: T) -&gt; T</code></li> <li><code>update(entity: T) -&gt; T</code></li> <li><code>delete(entity_id: EntityID) -&gt; None</code></li> <li><code>list_all() -&gt; list[T]</code></li> </ul>"},{"location":"api/patterns/#repository-mixins","title":"Repository Mixins","text":"<p>For common query patterns, use repository mixins instead of duplicating code:</p> <pre><code>from leadr.common.base_repository import BaseRepository, GetByFieldMixin\n\nclass AccountRepository(GetByFieldMixin[Account, AccountORM], BaseRepository[Account, AccountORM]):\n    async def get_by_slug(self, slug: str) -&gt; Account | None:\n        return await self._get_by_field(AccountORM.slug, slug)\n</code></pre> <p>Available mixins: - <code>GetByFieldMixin</code>: Provides <code>_get_by_field(field, value)</code> helper - <code>ListByAccountMixin</code>: Provides <code>_list_by_account(account_id)</code> helper - <code>CountByStatusMixin</code>: Provides <code>_count_where(conditions)</code> helper</p>"},{"location":"api/patterns/#custom-repository-methods","title":"Custom Repository Methods","text":"<p>Add domain-specific query methods to repositories:</p> <pre><code>class AccountRepository(BaseRepository[Account, AccountORM]):\n    async def get_by_slug(self, slug: str) -&gt; Account | None:\n        \"\"\"Get account by slug.\"\"\"\n        return await self._get_by_field(AccountORM.slug, slug)\n\n    async def list_suspended(self) -&gt; list[Account]:\n        \"\"\"List all suspended accounts.\"\"\"\n        stmt = select(self.orm_class).where(\n            self.orm_class.status == \"suspended\",\n            self.orm_class.deleted_at.is_(None)\n        )\n        result = await self.session.execute(stmt)\n        return [self._to_domain(orm) for orm in result.scalars().all()]\n</code></pre>"},{"location":"api/patterns/#service-layer-pattern","title":"Service Layer Pattern","text":"<p>Services contain application logic and orchestrate domain entities and repositories. All services extend <code>BaseService</code>.</p>"},{"location":"api/patterns/#baseservice","title":"BaseService","text":"<p>Located in <code>src/leadr/common/services.py</code>, provides repository injection:</p> <pre><code>from leadr.common.services import BaseService\nfrom leadr.accounts.services.repositories import AccountRepository\n\nclass AccountService(BaseService[AccountRepository]):\n    def __init__(self, session: AsyncSession):\n        super().__init__(AccountRepository, session)\n</code></pre> <p>The service automatically creates the repository instance accessible via <code>self.repository</code>.</p>"},{"location":"api/patterns/#service-responsibilities","title":"Service Responsibilities","text":"<ol> <li>Business Logic: Implement domain-specific operations</li> <li>Orchestration: Coordinate multiple repositories or entities</li> <li>Validation: Validate business rules before persistence</li> <li>Error Handling: Raise appropriate domain exceptions</li> </ol>"},{"location":"api/patterns/#service-method-examples","title":"Service Method Examples","text":"<pre><code>class AccountService(BaseService[AccountRepository]):\n    async def create_account(\n        self,\n        account_id: EntityID,\n        name: str,\n        slug: str,\n        created_at: datetime,\n        updated_at: datetime,\n    ) -&gt; Account:\n        \"\"\"Create a new account.\"\"\"\n        # Check for duplicate slug\n        existing = await self.repository.get_by_slug(slug)\n        if existing:\n            raise ValueError(f\"Account with slug '{slug}' already exists\")\n\n        # Create entity\n        account = Account(\n            id=account_id,\n            name=name,\n            slug=slug,\n            status=AccountStatus.ACTIVE,\n            created_at=created_at,\n            updated_at=updated_at,\n        )\n\n        return await self.repository.create(account)\n\n    async def suspend_account(self, account_id: EntityID) -&gt; Account:\n        \"\"\"Suspend an account.\"\"\"\n        account = await self.repository.get_by_id(account_id)\n        if not account:\n            raise EntityNotFoundError(f\"Account {account_id} not found\")\n\n        account.suspend()\n        return await self.repository.update(account)\n</code></pre>"},{"location":"api/patterns/#service-layer-rules","title":"Service Layer Rules","text":"<ul> <li>Services MUST NOT be accessed directly by routes in other domains</li> <li>Services MUST use repositories for all data access</li> <li>Services MUST raise <code>EntityNotFoundError</code> when entities are not found</li> <li>Services MUST validate business rules before persisting changes</li> </ul>"},{"location":"api/patterns/#error-handling","title":"Error Handling","text":""},{"location":"api/patterns/#domain-exceptions","title":"Domain Exceptions","text":"<p>Use <code>EntityNotFoundError</code> for missing entities:</p> <pre><code>from leadr.common.domain.exceptions import EntityNotFoundError\n\nasync def get_account(self, account_id: EntityID) -&gt; Account:\n    account = await self.repository.get_by_id(account_id)\n    if not account:\n        raise EntityNotFoundError(f\"Account {account_id} not found\")\n    return account\n</code></pre>"},{"location":"api/patterns/#api-error-handling","title":"API Error Handling","text":"<p>Routes catch domain exceptions and convert to HTTP exceptions:</p> <pre><code>from fastapi import HTTPException, status\nfrom leadr.common.domain.exceptions import EntityNotFoundError\n\ntry:\n    account = await service.get_account(entity_id)\nexcept EntityNotFoundError as e:\n    raise HTTPException(\n        status_code=status.HTTP_404_NOT_FOUND,\n        detail=\"Account not found\"\n    ) from e\n</code></pre>"},{"location":"api/patterns/#foreign-key-violations","title":"Foreign Key Violations","text":"<p>Catch <code>IntegrityError</code> for foreign key constraint violations:</p> <pre><code>from sqlalchemy.exc import IntegrityError\n\ntry:\n    api_key, plain_key = await service.create_api_key(\n        account_id=account_id,\n        name=request.name,\n        expires_at=request.expires_at,\n    )\nexcept IntegrityError:\n    raise HTTPException(\n        status_code=status.HTTP_404_NOT_FOUND,\n        detail=\"Account not found\",\n    ) from None\n</code></pre>"},{"location":"api/patterns/#api-schema-conversion","title":"API Schema Conversion","text":""},{"location":"api/patterns/#response-schema-pattern","title":"Response Schema Pattern","text":"<p>API response schemas use <code>from_domain()</code> class methods for conversion:</p> <pre><code>from pydantic import BaseModel\nfrom leadr.accounts.domain.account import Account\n\nclass AccountResponse(BaseModel):\n    id: UUID\n    name: str\n    slug: str\n    status: str\n    created_at: datetime\n    updated_at: datetime\n\n    @classmethod\n    def from_domain(cls, account: Account) -&gt; \"AccountResponse\":\n        \"\"\"Convert domain entity to response schema.\"\"\"\n        return cls(\n            id=account.id.value,\n            name=account.name,\n            slug=account.slug,\n            status=account.status.value,\n            created_at=account.created_at,\n            updated_at=account.updated_at,\n        )\n</code></pre>"},{"location":"api/patterns/#usage-in-routes","title":"Usage in Routes","text":"<pre><code>@router.get(\"/accounts/{account_id}\", response_model=AccountResponse)\nasync def get_account(account_id: str, db: DatabaseSession) -&gt; AccountResponse:\n    service = AccountService(db)\n    account = await service.get_account(EntityID.from_string(account_id))\n    return AccountResponse.from_domain(account)\n</code></pre>"},{"location":"api/patterns/#multiple-entity-responses","title":"Multiple Entity Responses","text":"<p>For responses that include related data from multiple entities:</p> <pre><code>class CreateAPIKeyResponse(BaseModel):\n    id: UUID\n    account_id: UUID\n    name: str\n    key_prefix: str\n    status: str\n    created_at: datetime\n    expires_at: datetime | None\n    plain_key: str  # Only included on creation\n\n    @classmethod\n    def from_domain(cls, api_key: APIKey, plain_key: str) -&gt; \"CreateAPIKeyResponse\":\n        \"\"\"Convert domain entity to creation response with plain key.\"\"\"\n        return cls(\n            id=api_key.id.value,\n            account_id=api_key.account_id.value,\n            name=api_key.name,\n            key_prefix=api_key.key_prefix,\n            status=api_key.status.value,\n            created_at=api_key.created_at,\n            expires_at=api_key.expires_at,\n            plain_key=plain_key,\n        )\n</code></pre>"},{"location":"api/patterns/#route-organization","title":"Route Organization","text":""},{"location":"api/patterns/#domain-based-routing","title":"Domain-Based Routing","text":"<p>Routes are organized by domain in <code>src/leadr/{domain}/api/routes.py</code>:</p> <pre><code># src/leadr/accounts/api/routes.py\nfrom fastapi import APIRouter\n\nrouter = APIRouter()  # No prefix here\n\n@router.post(\"/accounts\", ...)\n@router.get(\"/accounts/{account_id}\", ...)\n</code></pre> <pre><code># src/api/main.py\nfrom leadr.accounts.api.routes import router as accounts_router\nfrom leadr.auth.api.routes import router as auth_router\n\napp.include_router(accounts_router, prefix=settings.API_PREFIX, tags=[\"Accounts\"])\napp.include_router(auth_router, prefix=settings.API_PREFIX)  # auth router has its own prefix\n</code></pre>"},{"location":"api/patterns/#route-implementation-pattern","title":"Route Implementation Pattern","text":"<pre><code>@router.post(\"/accounts\", status_code=status.HTTP_201_CREATED, response_model=AccountResponse)\nasync def create_account(request: AccountCreateRequest, db: DatabaseSession) -&gt; AccountResponse:\n    \"\"\"Create a new account.\"\"\"\n    # 1. Create service\n    service = AccountService(db)\n\n    # 2. Get current timestamp\n    now = datetime.now(UTC)\n\n    # 3. Call service method\n    account = await service.create_account(\n        account_id=EntityID.generate(),\n        name=request.name,\n        slug=request.slug,\n        created_at=now,\n        updated_at=now,\n    )\n\n    # 4. Convert to response schema\n    return AccountResponse.from_domain(account)\n</code></pre>"},{"location":"api/patterns/#route-rules","title":"Route Rules","text":"<ul> <li>Routes MUST only call service methods, never repositories directly</li> <li>Routes MUST convert domain entities to response schemas using <code>from_domain()</code></li> <li>Routes MUST handle service exceptions and convert to HTTP exceptions</li> <li>Routes MUST validate request data using Pydantic schemas</li> </ul>"},{"location":"api/patterns/#soft-delete-pattern","title":"Soft Delete Pattern","text":"<p>Soft deletes mark entities as deleted without removing them from the database.</p>"},{"location":"api/patterns/#domain-implementation","title":"Domain Implementation","text":"<p>Entities have <code>deleted_at</code> field and <code>soft_delete()</code> method:</p> <pre><code>from datetime import UTC, datetime\n\nclass Account(Entity):\n    deleted_at: datetime | None = None\n\n    def soft_delete(self) -&gt; None:\n        \"\"\"Mark this account as deleted.\"\"\"\n        self.deleted_at = datetime.now(UTC)\n        self.updated_at = datetime.now(UTC)\n</code></pre>"},{"location":"api/patterns/#service-implementation","title":"Service Implementation","text":"<p>Services provide <code>delete_{entity}</code> methods:</p> <pre><code>async def delete_account(self, account_id: EntityID) -&gt; None:\n    \"\"\"Soft delete an account.\"\"\"\n    account = await self.repository.get_by_id(account_id)\n    if not account:\n        raise EntityNotFoundError(f\"Account {account_id} not found\")\n\n    account.soft_delete()\n    await self.repository.update(account)\n</code></pre>"},{"location":"api/patterns/#route-implementation","title":"Route Implementation","text":"<p>Routes handle soft delete via PATCH with <code>deleted: true</code>:</p> <pre><code>@router.patch(\"/accounts/{account_id}\", response_model=AccountResponse)\nasync def update_account(\n    account_id: str, request: AccountUpdateRequest, db: DatabaseSession\n) -&gt; AccountResponse:\n    service = AccountService(db)\n    entity_id = EntityID.from_string(account_id)\n\n    # Handle soft delete first\n    if request.deleted is True:\n        account = await service.get_account(entity_id)\n        if not account:\n            raise HTTPException(\n                status_code=status.HTTP_404_NOT_FOUND,\n                detail=\"Account not found\"\n            )\n        await service.delete_account(entity_id)\n        # Return entity with 200 status (not 404)\n        return AccountResponse.from_domain(account)\n\n    # Handle other updates...\n</code></pre>"},{"location":"api/patterns/#soft-delete-rules","title":"Soft Delete Rules","text":"<ul> <li>Soft deletes MUST return HTTP 200 with the entity, not HTTP 404</li> <li>Soft deletes MUST be idempotent (calling twice has same effect)</li> <li>Repositories MUST exclude soft-deleted entities from all queries by default</li> <li>Repositories MAY provide methods to include deleted entities if needed</li> </ul>"},{"location":"api/patterns/#testing-patterns","title":"Testing Patterns","text":""},{"location":"api/patterns/#service-testing","title":"Service Testing","text":"<p>Test services with real database transactions:</p> <pre><code>@pytest.mark.asyncio\nclass TestAccountService:\n    async def test_create_account(self, db_session: AsyncSession):\n        service = AccountService(db_session)\n        now = datetime.now(UTC)\n\n        account = await service.create_account(\n            account_id=EntityID.generate(),\n            name=\"Test Corp\",\n            slug=\"test-corp\",\n            created_at=now,\n            updated_at=now,\n        )\n\n        assert account.name == \"Test Corp\"\n        assert account.status == AccountStatus.ACTIVE\n</code></pre>"},{"location":"api/patterns/#api-testing","title":"API Testing","text":"<p>Test routes through the HTTP client:</p> <pre><code>@pytest.mark.asyncio\nasync def test_create_account_api(client: AsyncClient):\n    response = await client.post(\n        \"/accounts\",\n        json={\"name\": \"Test Corp\", \"slug\": \"test-corp\"},\n    )\n\n    assert response.status_code == 201\n    data = response.json()\n    assert data[\"name\"] == \"Test Corp\"\n    assert data[\"status\"] == \"active\"\n</code></pre>"},{"location":"api/patterns/#test-organization","title":"Test Organization","text":"<ul> <li>Unit tests for domain entities in <code>tests/leadr/{domain}/domain/</code></li> <li>Integration tests for services in <code>tests/leadr/{domain}/services/</code></li> <li>API tests in <code>tests/api/{domain}/</code></li> <li>Shared fixtures in <code>tests/conftest.py</code></li> </ul>"},{"location":"api/reference/","title":"Reference","text":""},{"location":"api/reference/#leadr","title":"<code>leadr</code>","text":"<p>Modules:</p> <ul> <li>accounts \u2013</li> <li>auth \u2013</li> <li>boards \u2013</li> <li>common \u2013</li> <li>config \u2013 Application configuration management.</li> <li>games \u2013</li> <li>infra \u2013</li> <li>players \u2013</li> <li>scores \u2013</li> </ul>"},{"location":"api/reference/#leadraccounts","title":"<code>leadr.accounts</code>","text":"<p>Modules:</p> <ul> <li>adapters \u2013</li> <li>api \u2013</li> <li>domain \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsadapters","title":"<code>leadr.accounts.adapters</code>","text":"<p>Modules:</p> <ul> <li>orm \u2013 Account and User ORM models.</li> </ul>"},{"location":"api/reference/#leadraccountsadaptersorm","title":"<code>leadr.accounts.adapters.orm</code>","text":"<p>Account and User ORM models.</p> <p>Classes:</p> <ul> <li>AccountORM \u2013 Account ORM model.</li> <li>AccountStatusEnum \u2013 Account status enum for database.</li> <li>UserORM \u2013 User ORM model.</li> </ul>"},{"location":"api/reference/#leadraccountsadaptersormaccountorm","title":"<code>leadr.accounts.adapters.orm.AccountORM</code>","text":"<p>Bases: <code>Base</code></p> <p>Account ORM model.</p> <p>Represents an organization or team in the database. Maps to the accounts table with unique name and slug constraints.</p> <p>Attributes:</p> <ul> <li>created_at (<code>Mapped[timestamp]</code>) \u2013</li> <li>deleted_at (<code>Mapped[nullable_timestamp]</code>) \u2013</li> <li>id (<code>Mapped[uuid_pk]</code>) \u2013</li> <li>name (<code>Mapped[str]</code>) \u2013</li> <li>slug (<code>Mapped[str]</code>) \u2013</li> <li>status (<code>Mapped[AccountStatusEnum]</code>) \u2013</li> <li>updated_at (<code>Mapped[timestamp]</code>) \u2013</li> <li>users (<code>Mapped[list[UserORM]]</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsadaptersormaccountormcreated_at","title":"# <code>leadr.accounts.adapters.orm.AccountORM.created_at</code>","text":"<pre><code>created_at: Mapped[timestamp]\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormaccountormdeleted_at","title":"# <code>leadr.accounts.adapters.orm.AccountORM.deleted_at</code>","text":"<pre><code>deleted_at: Mapped[nullable_timestamp]\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormaccountormid","title":"# <code>leadr.accounts.adapters.orm.AccountORM.id</code>","text":"<pre><code>id: Mapped[uuid_pk]\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormaccountormname","title":"# <code>leadr.accounts.adapters.orm.AccountORM.name</code>","text":"<pre><code>name: Mapped[str] = mapped_column(String, nullable=False, unique=True, index=True)\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormaccountormslug","title":"# <code>leadr.accounts.adapters.orm.AccountORM.slug</code>","text":"<pre><code>slug: Mapped[str] = mapped_column(String, nullable=False, unique=True, index=True)\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormaccountormstatus","title":"# <code>leadr.accounts.adapters.orm.AccountORM.status</code>","text":"<pre><code>status: Mapped[AccountStatusEnum] = mapped_column(Enum(AccountStatusEnum, name='account_status', native_enum=True, values_callable=(lambda x: [(e.value) for e in x])), nullable=False, default=(AccountStatusEnum.ACTIVE), server_default='active')\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormaccountormupdated_at","title":"# <code>leadr.accounts.adapters.orm.AccountORM.updated_at</code>","text":"<pre><code>updated_at: Mapped[timestamp] = mapped_column(onupdate=(func.now()))\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormaccountormusers","title":"# <code>leadr.accounts.adapters.orm.AccountORM.users</code>","text":"<pre><code>users: Mapped[list[UserORM]] = relationship(back_populates='account', cascade='all, delete-orphan')\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormaccountstatusenum","title":"<code>leadr.accounts.adapters.orm.AccountStatusEnum</code>","text":"<p>Bases: <code>str</code>, <code>Enum</code></p> <p>Account status enum for database.</p> <p>Attributes:</p> <ul> <li>ACTIVE \u2013</li> <li>SUSPENDED \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsadaptersormaccountstatusenumactive","title":"# <code>leadr.accounts.adapters.orm.AccountStatusEnum.ACTIVE</code>","text":"<pre><code>ACTIVE = 'active'\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormaccountstatusenumsuspended","title":"# <code>leadr.accounts.adapters.orm.AccountStatusEnum.SUSPENDED</code>","text":"<pre><code>SUSPENDED = 'suspended'\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormuserorm","title":"<code>leadr.accounts.adapters.orm.UserORM</code>","text":"<p>Bases: <code>Base</code></p> <p>User ORM model.</p> <p>Represents a user within an account in the database. Maps to the users table with foreign key to accounts.</p> <p>Attributes:</p> <ul> <li>account (<code>Mapped[AccountORM]</code>) \u2013</li> <li>account_id (<code>Mapped[UUID]</code>) \u2013</li> <li>created_at (<code>Mapped[timestamp]</code>) \u2013</li> <li>deleted_at (<code>Mapped[nullable_timestamp]</code>) \u2013</li> <li>display_name (<code>Mapped[str]</code>) \u2013</li> <li>email (<code>Mapped[str]</code>) \u2013</li> <li>id (<code>Mapped[uuid_pk]</code>) \u2013</li> <li>updated_at (<code>Mapped[timestamp]</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsadaptersormuserormaccount","title":"# <code>leadr.accounts.adapters.orm.UserORM.account</code>","text":"<pre><code>account: Mapped[AccountORM] = relationship(back_populates='users')\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormuserormaccount_id","title":"# <code>leadr.accounts.adapters.orm.UserORM.account_id</code>","text":"<pre><code>account_id: Mapped[UUID] = mapped_column(ForeignKey('accounts.id', ondelete='CASCADE'), nullable=False, index=True)\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormuserormcreated_at","title":"# <code>leadr.accounts.adapters.orm.UserORM.created_at</code>","text":"<pre><code>created_at: Mapped[timestamp]\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormuserormdeleted_at","title":"# <code>leadr.accounts.adapters.orm.UserORM.deleted_at</code>","text":"<pre><code>deleted_at: Mapped[nullable_timestamp]\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormuserormdisplay_name","title":"# <code>leadr.accounts.adapters.orm.UserORM.display_name</code>","text":"<pre><code>display_name: Mapped[str] = mapped_column(String, nullable=False)\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormuserormemail","title":"# <code>leadr.accounts.adapters.orm.UserORM.email</code>","text":"<pre><code>email: Mapped[str] = mapped_column(String, nullable=False, unique=True, index=True)\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormuserormid","title":"# <code>leadr.accounts.adapters.orm.UserORM.id</code>","text":"<pre><code>id: Mapped[uuid_pk]\n</code></pre>"},{"location":"api/reference/#leadraccountsadaptersormuserormupdated_at","title":"# <code>leadr.accounts.adapters.orm.UserORM.updated_at</code>","text":"<pre><code>updated_at: Mapped[timestamp] = mapped_column(onupdate=(func.now()))\n</code></pre>"},{"location":"api/reference/#leadraccountsapi","title":"<code>leadr.accounts.api</code>","text":"<p>Modules:</p> <ul> <li>routes \u2013 Account and User API routes.</li> <li>schemas \u2013 API request and response models for accounts.</li> </ul>"},{"location":"api/reference/#leadraccountsapiroutes","title":"<code>leadr.accounts.api.routes</code>","text":"<p>Account and User API routes.</p> <p>Functions:</p> <ul> <li>create_account \u2013 Create a new account.</li> <li>create_user \u2013 Create a new user.</li> <li>get_account \u2013 Get an account by ID.</li> <li>get_user \u2013 Get a user by ID.</li> <li>list_accounts \u2013 List all accounts.</li> <li>list_users \u2013 List users for an account.</li> <li>update_account \u2013 Update an account.</li> <li>update_user \u2013 Update a user.</li> </ul> <p>Attributes:</p> <ul> <li>router \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsapiroutescreate_account","title":"<code>leadr.accounts.api.routes.create_account</code>","text":"<pre><code>create_account(request, service)\n</code></pre> <p>Create a new account.</p> <p>Parameters:</p> <ul> <li>request (<code>AccountCreateRequest</code>) \u2013 Account creation details including name and slug.</li> <li>service (<code>AccountServiceDep</code>) \u2013 Injected account service dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>AccountResponse</code> \u2013 AccountResponse with the created account including auto-generated ID and timestamps.</li> </ul>"},{"location":"api/reference/#leadraccountsapiroutescreate_user","title":"<code>leadr.accounts.api.routes.create_user</code>","text":"<pre><code>create_user(request, service)\n</code></pre> <p>Create a new user.</p> <p>Creates a new user associated with an existing account.</p> <p>Parameters:</p> <ul> <li>request (<code>UserCreateRequest</code>) \u2013 User creation details including account_id, email, and display name.</li> <li>service (<code>UserServiceDep</code>) \u2013 Injected user service dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>UserResponse</code> \u2013 UserResponse with the created user including auto-generated ID and timestamps.</li> </ul> <p>Raises:</p> <ul> <li><code>404</code> \u2013 Account not found.</li> </ul>"},{"location":"api/reference/#leadraccountsapiroutesget_account","title":"<code>leadr.accounts.api.routes.get_account</code>","text":"<pre><code>get_account(account_id, service)\n</code></pre> <p>Get an account by ID.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID4</code>) \u2013 Unique identifier for the account.</li> <li>service (<code>AccountServiceDep</code>) \u2013 Injected account service dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>AccountResponse</code> \u2013 AccountResponse with full account details.</li> </ul> <p>Raises:</p> <ul> <li><code>404</code> \u2013 Account not found.</li> </ul>"},{"location":"api/reference/#leadraccountsapiroutesget_user","title":"<code>leadr.accounts.api.routes.get_user</code>","text":"<pre><code>get_user(user_id, service)\n</code></pre> <p>Get a user by ID.</p> <p>Parameters:</p> <ul> <li>user_id (<code>UUID4</code>) \u2013 Unique identifier for the user.</li> <li>service (<code>UserServiceDep</code>) \u2013 Injected user service dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>UserResponse</code> \u2013 UserResponse with full user details.</li> </ul> <p>Raises:</p> <ul> <li><code>404</code> \u2013 User not found.</li> </ul>"},{"location":"api/reference/#leadraccountsapirouteslist_accounts","title":"<code>leadr.accounts.api.routes.list_accounts</code>","text":"<pre><code>list_accounts(service)\n</code></pre> <p>List all accounts.</p> <p>Parameters:</p> <ul> <li>service (<code>AccountServiceDep</code>) \u2013 Injected account service dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>list[AccountResponse]</code> \u2013 List of all active accounts.</li> </ul>"},{"location":"api/reference/#leadraccountsapirouteslist_users","title":"<code>leadr.accounts.api.routes.list_users</code>","text":"<pre><code>list_users(service, account_id)\n</code></pre> <p>List users for an account.</p> <p>TODO: Replace account_id query param with account_id from auth token.</p> <p>Parameters:</p> <ul> <li>service (<code>UserServiceDep</code>) \u2013 Injected user service dependency.</li> <li>account_id (<code>Annotated[UUID4, Query(description='Account ID to filter by')]</code>) \u2013 Account ID to filter results (REQUIRED for multi-tenant safety).</li> </ul> <p>Returns:</p> <ul> <li><code>list[UserResponse]</code> \u2013 List of users for the account.</li> </ul>"},{"location":"api/reference/#leadraccountsapiroutesrouter","title":"<code>leadr.accounts.api.routes.router</code>","text":"<pre><code>router = APIRouter()\n</code></pre>"},{"location":"api/reference/#leadraccountsapiroutesupdate_account","title":"<code>leadr.accounts.api.routes.update_account</code>","text":"<pre><code>update_account(account_id, request, service)\n</code></pre> <p>Update an account.</p> <p>Supports updating name, slug, status, or soft-deleting the account. Status changes (active/suspended) are handled through dedicated service methods.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID4</code>) \u2013 Unique identifier for the account.</li> <li>request (<code>AccountUpdateRequest</code>) \u2013 Account update details (all fields optional).</li> <li>service (<code>AccountServiceDep</code>) \u2013 Injected account service dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>AccountResponse</code> \u2013 AccountResponse with the updated account details.</li> </ul> <p>Raises:</p> <ul> <li><code>404</code> \u2013 Account not found.</li> </ul>"},{"location":"api/reference/#leadraccountsapiroutesupdate_user","title":"<code>leadr.accounts.api.routes.update_user</code>","text":"<pre><code>update_user(user_id, request, service)\n</code></pre> <p>Update a user.</p> <p>Supports updating email, display name, or soft-deleting the user.</p> <p>Parameters:</p> <ul> <li>user_id (<code>UUID4</code>) \u2013 Unique identifier for the user.</li> <li>request (<code>UserUpdateRequest</code>) \u2013 User update details (all fields optional).</li> <li>service (<code>UserServiceDep</code>) \u2013 Injected user service dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>UserResponse</code> \u2013 UserResponse with the updated user details.</li> </ul> <p>Raises:</p> <ul> <li><code>404</code> \u2013 User not found.</li> </ul>"},{"location":"api/reference/#leadraccountsapischemas","title":"<code>leadr.accounts.api.schemas</code>","text":"<p>API request and response models for accounts.</p> <p>Classes:</p> <ul> <li>AccountCreateRequest \u2013 Request model for creating an account.</li> <li>AccountResponse \u2013 Response model for an account.</li> <li>AccountUpdateRequest \u2013 Request model for updating an account.</li> <li>UserCreateRequest \u2013 Request model for creating a user.</li> <li>UserResponse \u2013 Response model for a user.</li> <li>UserUpdateRequest \u2013 Request model for updating a user.</li> </ul>"},{"location":"api/reference/#leadraccountsapischemasaccountcreaterequest","title":"<code>leadr.accounts.api.schemas.AccountCreateRequest</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Request model for creating an account.</p> <p>Attributes:</p> <ul> <li>name (<code>str</code>) \u2013</li> <li>slug (<code>str</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsapischemasaccountcreaterequestname","title":"# <code>leadr.accounts.api.schemas.AccountCreateRequest.name</code>","text":"<pre><code>name: str = Field(description='Account name (2-100 characters)')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasaccountcreaterequestslug","title":"# <code>leadr.accounts.api.schemas.AccountCreateRequest.slug</code>","text":"<pre><code>slug: str = Field(description='URL-friendly identifier for the account (lowercase, alphanumeric, hyphens)')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasaccountresponse","title":"<code>leadr.accounts.api.schemas.AccountResponse</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Response model for an account.</p> <p>Functions:</p> <ul> <li>from_domain \u2013 Convert domain entity to response model.</li> </ul> <p>Attributes:</p> <ul> <li>created_at (<code>datetime</code>) \u2013</li> <li>id (<code>UUID</code>) \u2013</li> <li>name (<code>str</code>) \u2013</li> <li>slug (<code>str</code>) \u2013</li> <li>status (<code>AccountStatus</code>) \u2013</li> <li>updated_at (<code>datetime</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsapischemasaccountresponsecreated_at","title":"# <code>leadr.accounts.api.schemas.AccountResponse.created_at</code>","text":"<pre><code>created_at: datetime = Field(description='Timestamp when the account was created (UTC)')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasaccountresponsefrom_domain","title":"# <code>leadr.accounts.api.schemas.AccountResponse.from_domain</code>","text":"<pre><code>from_domain(account)\n</code></pre> <p>Convert domain entity to response model.</p> <p>Parameters:</p> <ul> <li>account (<code>Account</code>) \u2013 The domain Account entity to convert.</li> </ul> <p>Returns:</p> <ul> <li><code>AccountResponse</code> \u2013 AccountResponse with all fields populated from the domain entity.</li> </ul>"},{"location":"api/reference/#leadraccountsapischemasaccountresponseid","title":"# <code>leadr.accounts.api.schemas.AccountResponse.id</code>","text":"<pre><code>id: UUID = Field(description='Unique identifier for the account')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasaccountresponsename","title":"# <code>leadr.accounts.api.schemas.AccountResponse.name</code>","text":"<pre><code>name: str = Field(description='Account name')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasaccountresponseslug","title":"# <code>leadr.accounts.api.schemas.AccountResponse.slug</code>","text":"<pre><code>slug: str = Field(description='URL-friendly identifier')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasaccountresponsestatus","title":"# <code>leadr.accounts.api.schemas.AccountResponse.status</code>","text":"<pre><code>status: AccountStatus = Field(description='Current account status')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasaccountresponseupdated_at","title":"# <code>leadr.accounts.api.schemas.AccountResponse.updated_at</code>","text":"<pre><code>updated_at: datetime = Field(description='Timestamp of last update (UTC)')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasaccountupdaterequest","title":"<code>leadr.accounts.api.schemas.AccountUpdateRequest</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Request model for updating an account.</p> <p>Attributes:</p> <ul> <li>deleted (<code>bool | None</code>) \u2013</li> <li>name (<code>str | None</code>) \u2013</li> <li>slug (<code>str | None</code>) \u2013</li> <li>status (<code>AccountStatus | None</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsapischemasaccountupdaterequestdeleted","title":"# <code>leadr.accounts.api.schemas.AccountUpdateRequest.deleted</code>","text":"<pre><code>deleted: bool | None = Field(default=None, description='Set to true to soft delete the account')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasaccountupdaterequestname","title":"# <code>leadr.accounts.api.schemas.AccountUpdateRequest.name</code>","text":"<pre><code>name: str | None = Field(default=None, description='Updated account name')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasaccountupdaterequestslug","title":"# <code>leadr.accounts.api.schemas.AccountUpdateRequest.slug</code>","text":"<pre><code>slug: str | None = Field(default=None, description='Updated URL-friendly identifier')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasaccountupdaterequeststatus","title":"# <code>leadr.accounts.api.schemas.AccountUpdateRequest.status</code>","text":"<pre><code>status: AccountStatus | None = Field(default=None, description='Account status (active, suspended, deleted)')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasusercreaterequest","title":"<code>leadr.accounts.api.schemas.UserCreateRequest</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Request model for creating a user.</p> <p>Attributes:</p> <ul> <li>account_id (<code>UUID</code>) \u2013</li> <li>display_name (<code>str</code>) \u2013</li> <li>email (<code>EmailStr</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsapischemasusercreaterequestaccount_id","title":"# <code>leadr.accounts.api.schemas.UserCreateRequest.account_id</code>","text":"<pre><code>account_id: UUID = Field(description='ID of the account this user belongs to')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasusercreaterequestdisplay_name","title":"# <code>leadr.accounts.api.schemas.UserCreateRequest.display_name</code>","text":"<pre><code>display_name: str = Field(description=\"User's display name (2-100 characters)\")\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasusercreaterequestemail","title":"# <code>leadr.accounts.api.schemas.UserCreateRequest.email</code>","text":"<pre><code>email: EmailStr = Field(description=\"User's email address (must be valid email format)\")\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasuserresponse","title":"<code>leadr.accounts.api.schemas.UserResponse</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Response model for a user.</p> <p>Functions:</p> <ul> <li>from_domain \u2013 Convert domain entity to response model.</li> </ul> <p>Attributes:</p> <ul> <li>account_id (<code>UUID</code>) \u2013</li> <li>created_at (<code>datetime</code>) \u2013</li> <li>display_name (<code>str</code>) \u2013</li> <li>email (<code>str</code>) \u2013</li> <li>id (<code>UUID</code>) \u2013</li> <li>updated_at (<code>datetime</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsapischemasuserresponseaccount_id","title":"# <code>leadr.accounts.api.schemas.UserResponse.account_id</code>","text":"<pre><code>account_id: UUID = Field(description='ID of the account this user belongs to')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasuserresponsecreated_at","title":"# <code>leadr.accounts.api.schemas.UserResponse.created_at</code>","text":"<pre><code>created_at: datetime = Field(description='Timestamp when the user was created (UTC)')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasuserresponsedisplay_name","title":"# <code>leadr.accounts.api.schemas.UserResponse.display_name</code>","text":"<pre><code>display_name: str = Field(description=\"User's display name\")\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasuserresponseemail","title":"# <code>leadr.accounts.api.schemas.UserResponse.email</code>","text":"<pre><code>email: str = Field(description=\"User's email address\")\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasuserresponsefrom_domain","title":"# <code>leadr.accounts.api.schemas.UserResponse.from_domain</code>","text":"<pre><code>from_domain(user)\n</code></pre> <p>Convert domain entity to response model.</p> <p>Parameters:</p> <ul> <li>user (<code>User</code>) \u2013 The domain User entity to convert.</li> </ul> <p>Returns:</p> <ul> <li><code>UserResponse</code> \u2013 UserResponse with all fields populated from the domain entity.</li> </ul>"},{"location":"api/reference/#leadraccountsapischemasuserresponseid","title":"# <code>leadr.accounts.api.schemas.UserResponse.id</code>","text":"<pre><code>id: UUID = Field(description='Unique identifier for the user')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasuserresponseupdated_at","title":"# <code>leadr.accounts.api.schemas.UserResponse.updated_at</code>","text":"<pre><code>updated_at: datetime = Field(description='Timestamp of last update (UTC)')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasuserupdaterequest","title":"<code>leadr.accounts.api.schemas.UserUpdateRequest</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Request model for updating a user.</p> <p>Attributes:</p> <ul> <li>deleted (<code>bool | None</code>) \u2013</li> <li>display_name (<code>str | None</code>) \u2013</li> <li>email (<code>EmailStr | None</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsapischemasuserupdaterequestdeleted","title":"# <code>leadr.accounts.api.schemas.UserUpdateRequest.deleted</code>","text":"<pre><code>deleted: bool | None = Field(default=None, description='Set to true to soft delete the user')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasuserupdaterequestdisplay_name","title":"# <code>leadr.accounts.api.schemas.UserUpdateRequest.display_name</code>","text":"<pre><code>display_name: str | None = Field(default=None, description='Updated display name')\n</code></pre>"},{"location":"api/reference/#leadraccountsapischemasuserupdaterequestemail","title":"# <code>leadr.accounts.api.schemas.UserUpdateRequest.email</code>","text":"<pre><code>email: EmailStr | None = Field(default=None, description='Updated email address')\n</code></pre>"},{"location":"api/reference/#leadraccountsdomain","title":"<code>leadr.accounts.domain</code>","text":"<p>Modules:</p> <ul> <li>account \u2013 Account domain model.</li> <li>user \u2013 User domain model.</li> </ul>"},{"location":"api/reference/#leadraccountsdomainaccount","title":"<code>leadr.accounts.domain.account</code>","text":"<p>Account domain model.</p> <p>Classes:</p> <ul> <li>Account \u2013 Account domain entity.</li> <li>AccountStatus \u2013 Account status enumeration.</li> </ul>"},{"location":"api/reference/#leadraccountsdomainaccountaccount","title":"<code>leadr.accounts.domain.account.Account</code>","text":"<p>Bases: <code>Entity</code></p> <p>Account domain entity.</p> <p>Represents an organization or team that owns games and manages users. Accounts have a unique name and URL-friendly slug, and can be active or suspended.</p> <p>Functions:</p> <ul> <li>activate \u2013 Activate the account, allowing access.</li> <li>restore \u2013 Restore a soft-deleted entity.</li> <li>soft_delete \u2013 Mark entity as soft-deleted.</li> <li>suspend \u2013 Suspend the account, preventing access.</li> <li>validate_name \u2013 Validate account name length and format.</li> <li>validate_slug \u2013 Validate slug format (lowercase alphanumeric with hyphens).</li> </ul> <p>Attributes:</p> <ul> <li>created_at (<code>datetime</code>) \u2013</li> <li>deleted_at (<code>datetime | None</code>) \u2013</li> <li>id (<code>UUID</code>) \u2013</li> <li>is_deleted (<code>bool</code>) \u2013 Check if entity is soft-deleted.</li> <li>model_config \u2013</li> <li>name (<code>str</code>) \u2013</li> <li>slug (<code>str</code>) \u2013</li> <li>status (<code>AccountStatus</code>) \u2013</li> <li>updated_at (<code>datetime</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsdomainaccountaccountactivate","title":"# <code>leadr.accounts.domain.account.Account.activate</code>","text":"<pre><code>activate()\n</code></pre> <p>Activate the account, allowing access.</p>"},{"location":"api/reference/#leadraccountsdomainaccountaccountcreated_at","title":"# <code>leadr.accounts.domain.account.Account.created_at</code>","text":"<pre><code>created_at: datetime = Field(default_factory=(lambda: datetime.now(UTC)), description='Timestamp when entity was created (UTC)')\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainaccountaccountdeleted_at","title":"# <code>leadr.accounts.domain.account.Account.deleted_at</code>","text":"<pre><code>deleted_at: datetime | None = Field(default=None, description='Timestamp when entity was soft-deleted (UTC), or null if active')\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainaccountaccountid","title":"# <code>leadr.accounts.domain.account.Account.id</code>","text":"<pre><code>id: UUID = Field(frozen=True, default_factory=uuid4, description='Unique identifier (auto-generated UUID)')\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainaccountaccountis_deleted","title":"# <code>leadr.accounts.domain.account.Account.is_deleted</code>","text":"<pre><code>is_deleted: bool\n</code></pre> <p>Check if entity is soft-deleted.</p> <p>Returns:</p> <ul> <li><code>bool</code> \u2013 True if the entity has a deleted_at timestamp, False otherwise.</li> </ul>"},{"location":"api/reference/#leadraccountsdomainaccountaccountmodel_config","title":"# <code>leadr.accounts.domain.account.Account.model_config</code>","text":"<pre><code>model_config = ConfigDict(validate_assignment=True)\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainaccountaccountname","title":"# <code>leadr.accounts.domain.account.Account.name</code>","text":"<pre><code>name: str\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainaccountaccountrestore","title":"# <code>leadr.accounts.domain.account.Account.restore</code>","text":"<pre><code>restore()\n</code></pre> <p>Restore a soft-deleted entity.</p> <p>Clears the deleted_at timestamp, making the entity active again.</p> Example  &gt; &gt; &gt; account.soft_delete() &gt; &gt; &gt; account.restore() &gt; &gt; &gt; assert account.is_deleted is False"},{"location":"api/reference/#leadraccountsdomainaccountaccountslug","title":"# <code>leadr.accounts.domain.account.Account.slug</code>","text":"<pre><code>slug: str\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainaccountaccountsoft_delete","title":"# <code>leadr.accounts.domain.account.Account.soft_delete</code>","text":"<pre><code>soft_delete()\n</code></pre> <p>Mark entity as soft-deleted.</p> <p>Sets the deleted_at timestamp to the current UTC time. Entities that are already deleted are not affected (deleted_at remains at original deletion time).</p> Example  &gt; &gt; &gt; account = Account(name=\"Test\", slug=\"test\") &gt; &gt; &gt; account.soft_delete() &gt; &gt; &gt; assert account.is_deleted is True"},{"location":"api/reference/#leadraccountsdomainaccountaccountstatus","title":"# <code>leadr.accounts.domain.account.Account.status</code>","text":"<pre><code>status: AccountStatus = AccountStatus.ACTIVE\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainaccountaccountsuspend","title":"# <code>leadr.accounts.domain.account.Account.suspend</code>","text":"<pre><code>suspend()\n</code></pre> <p>Suspend the account, preventing access.</p>"},{"location":"api/reference/#leadraccountsdomainaccountaccountupdated_at","title":"# <code>leadr.accounts.domain.account.Account.updated_at</code>","text":"<pre><code>updated_at: datetime = Field(default_factory=(lambda: datetime.now(UTC)), description='Timestamp of last update (UTC)')\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainaccountaccountvalidate_name","title":"# <code>leadr.accounts.domain.account.Account.validate_name</code>","text":"<pre><code>validate_name(value)\n</code></pre> <p>Validate account name length and format.</p>"},{"location":"api/reference/#leadraccountsdomainaccountaccountvalidate_slug","title":"# <code>leadr.accounts.domain.account.Account.validate_slug</code>","text":"<pre><code>validate_slug(value)\n</code></pre> <p>Validate slug format (lowercase alphanumeric with hyphens).</p>"},{"location":"api/reference/#leadraccountsdomainaccountaccountstatus_1","title":"<code>leadr.accounts.domain.account.AccountStatus</code>","text":"<p>Bases: <code>Enum</code></p> <p>Account status enumeration.</p> <p>Attributes:</p> <ul> <li>ACTIVE \u2013</li> <li>SUSPENDED \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsdomainaccountaccountstatusactive","title":"# <code>leadr.accounts.domain.account.AccountStatus.ACTIVE</code>","text":"<pre><code>ACTIVE = 'active'\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainaccountaccountstatussuspended","title":"# <code>leadr.accounts.domain.account.AccountStatus.SUSPENDED</code>","text":"<pre><code>SUSPENDED = 'suspended'\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainuser","title":"<code>leadr.accounts.domain.user</code>","text":"<p>User domain model.</p> <p>Classes:</p> <ul> <li>User \u2013 User domain entity.</li> </ul>"},{"location":"api/reference/#leadraccountsdomainuseruser","title":"<code>leadr.accounts.domain.user.User</code>","text":"<p>Bases: <code>Entity</code></p> <p>User domain entity.</p> <p>Represents a user within an account (organization/team). Users are scoped to a specific account and have an email address and display name.</p> <p>Each user belongs to exactly one account, and users cannot be transferred between accounts. The email must be unique within an account.</p> <p>Functions:</p> <ul> <li>restore \u2013 Restore a soft-deleted entity.</li> <li>soft_delete \u2013 Mark entity as soft-deleted.</li> <li>validate_display_name \u2013 Validate display name length and format.</li> </ul> <p>Attributes:</p> <ul> <li>account_id (<code>UUID</code>) \u2013</li> <li>created_at (<code>datetime</code>) \u2013</li> <li>deleted_at (<code>datetime | None</code>) \u2013</li> <li>display_name (<code>str</code>) \u2013</li> <li>email (<code>EmailStr</code>) \u2013</li> <li>id (<code>UUID</code>) \u2013</li> <li>is_deleted (<code>bool</code>) \u2013 Check if entity is soft-deleted.</li> <li>model_config \u2013</li> <li>updated_at (<code>datetime</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadraccountsdomainuseruseraccount_id","title":"# <code>leadr.accounts.domain.user.User.account_id</code>","text":"<pre><code>account_id: UUID = Field(frozen=True, description='ID of the account this user belongs to (immutable)')\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainuserusercreated_at","title":"# <code>leadr.accounts.domain.user.User.created_at</code>","text":"<pre><code>created_at: datetime = Field(default_factory=(lambda: datetime.now(UTC)), description='Timestamp when entity was created (UTC)')\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainuseruserdeleted_at","title":"# <code>leadr.accounts.domain.user.User.deleted_at</code>","text":"<pre><code>deleted_at: datetime | None = Field(default=None, description='Timestamp when entity was soft-deleted (UTC), or null if active')\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainuseruserdisplay_name","title":"# <code>leadr.accounts.domain.user.User.display_name</code>","text":"<pre><code>display_name: str = Field(description=\"User's display name (2-100 characters)\")\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainuseruseremail","title":"# <code>leadr.accounts.domain.user.User.email</code>","text":"<pre><code>email: EmailStr = Field(description=\"User's email address (validated format)\")\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainuseruserid","title":"# <code>leadr.accounts.domain.user.User.id</code>","text":"<pre><code>id: UUID = Field(frozen=True, default_factory=uuid4, description='Unique identifier (auto-generated UUID)')\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainuseruseris_deleted","title":"# <code>leadr.accounts.domain.user.User.is_deleted</code>","text":"<pre><code>is_deleted: bool\n</code></pre> <p>Check if entity is soft-deleted.</p> <p>Returns:</p> <ul> <li><code>bool</code> \u2013 True if the entity has a deleted_at timestamp, False otherwise.</li> </ul>"},{"location":"api/reference/#leadraccountsdomainuserusermodel_config","title":"# <code>leadr.accounts.domain.user.User.model_config</code>","text":"<pre><code>model_config = ConfigDict(validate_assignment=True)\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainuseruserrestore","title":"# <code>leadr.accounts.domain.user.User.restore</code>","text":"<pre><code>restore()\n</code></pre> <p>Restore a soft-deleted entity.</p> <p>Clears the deleted_at timestamp, making the entity active again.</p> Example  &gt; &gt; &gt; account.soft_delete() &gt; &gt; &gt; account.restore() &gt; &gt; &gt; assert account.is_deleted is False"},{"location":"api/reference/#leadraccountsdomainuserusersoft_delete","title":"# <code>leadr.accounts.domain.user.User.soft_delete</code>","text":"<pre><code>soft_delete()\n</code></pre> <p>Mark entity as soft-deleted.</p> <p>Sets the deleted_at timestamp to the current UTC time. Entities that are already deleted are not affected (deleted_at remains at original deletion time).</p> Example  &gt; &gt; &gt; account = Account(name=\"Test\", slug=\"test\") &gt; &gt; &gt; account.soft_delete() &gt; &gt; &gt; assert account.is_deleted is True"},{"location":"api/reference/#leadraccountsdomainuseruserupdated_at","title":"# <code>leadr.accounts.domain.user.User.updated_at</code>","text":"<pre><code>updated_at: datetime = Field(default_factory=(lambda: datetime.now(UTC)), description='Timestamp of last update (UTC)')\n</code></pre>"},{"location":"api/reference/#leadraccountsdomainuseruservalidate_display_name","title":"# <code>leadr.accounts.domain.user.User.validate_display_name</code>","text":"<pre><code>validate_display_name(value)\n</code></pre> <p>Validate display name length and format.</p> <p>Parameters:</p> <ul> <li>value (<code>str</code>) \u2013 The display name to validate.</li> </ul> <p>Returns:</p> <ul> <li><code>str</code> \u2013 The validated and trimmed display name.</li> </ul> <p>Raises:</p> <ul> <li><code>ValueError</code> \u2013 If display name is empty, too short, or too long.</li> </ul>"},{"location":"api/reference/#leadrauth","title":"<code>leadr.auth</code>","text":"<p>Modules:</p> <ul> <li>adapters \u2013</li> <li>api \u2013</li> <li>dependencies \u2013 Authentication dependencies for FastAPI.</li> <li>domain \u2013</li> <li>services \u2013</li> </ul>"},{"location":"api/reference/#leadrauthadapters","title":"<code>leadr.auth.adapters</code>","text":"<p>Modules:</p> <ul> <li>orm \u2013 API Key ORM models.</li> </ul>"},{"location":"api/reference/#leadrauthadaptersorm","title":"<code>leadr.auth.adapters.orm</code>","text":"<p>API Key ORM models.</p> <p>Classes:</p> <ul> <li>APIKeyORM \u2013 API Key ORM model.</li> <li>APIKeyStatusEnum \u2013 API Key status enum for database.</li> </ul>"},{"location":"api/reference/#leadrauthadaptersormapikeyorm","title":"<code>leadr.auth.adapters.orm.APIKeyORM</code>","text":"<p>Bases: <code>Base</code></p> <p>API Key ORM model.</p> <p>Represents an API key for account authentication in the database. Maps to the api_keys table with foreign key to accounts.</p> <p>Attributes:</p> <ul> <li>account_id (<code>Mapped[UUID]</code>) \u2013</li> <li>created_at (<code>Mapped[timestamp]</code>) \u2013</li> <li>deleted_at (<code>Mapped[nullable_timestamp]</code>) \u2013</li> <li>expires_at (<code>Mapped[datetime | None]</code>) \u2013</li> <li>id (<code>Mapped[uuid_pk]</code>) \u2013</li> <li>key_hash (<code>Mapped[str]</code>) \u2013</li> <li>key_prefix (<code>Mapped[str]</code>) \u2013</li> <li>last_used_at (<code>Mapped[datetime | None]</code>) \u2013</li> <li>name (<code>Mapped[str]</code>) \u2013</li> <li>status (<code>Mapped[APIKeyStatusEnum]</code>) \u2013</li> <li>updated_at (<code>Mapped[timestamp]</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrauthadaptersormapikeyormaccount_id","title":"# <code>leadr.auth.adapters.orm.APIKeyORM.account_id</code>","text":"<pre><code>account_id: Mapped[UUID] = mapped_column(ForeignKey('accounts.id', ondelete='CASCADE'), nullable=False, index=True)\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeyormcreated_at","title":"# <code>leadr.auth.adapters.orm.APIKeyORM.created_at</code>","text":"<pre><code>created_at: Mapped[timestamp]\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeyormdeleted_at","title":"# <code>leadr.auth.adapters.orm.APIKeyORM.deleted_at</code>","text":"<pre><code>deleted_at: Mapped[nullable_timestamp]\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeyormexpires_at","title":"# <code>leadr.auth.adapters.orm.APIKeyORM.expires_at</code>","text":"<pre><code>expires_at: Mapped[datetime | None] = mapped_column(DateTime(timezone=True), nullable=True)\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeyormid","title":"# <code>leadr.auth.adapters.orm.APIKeyORM.id</code>","text":"<pre><code>id: Mapped[uuid_pk]\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeyormkey_hash","title":"# <code>leadr.auth.adapters.orm.APIKeyORM.key_hash</code>","text":"<pre><code>key_hash: Mapped[str] = mapped_column(String, nullable=False)\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeyormkey_prefix","title":"# <code>leadr.auth.adapters.orm.APIKeyORM.key_prefix</code>","text":"<pre><code>key_prefix: Mapped[str] = mapped_column(String, nullable=False, unique=True, index=True)\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeyormlast_used_at","title":"# <code>leadr.auth.adapters.orm.APIKeyORM.last_used_at</code>","text":"<pre><code>last_used_at: Mapped[datetime | None] = mapped_column(DateTime(timezone=True), nullable=True)\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeyormname","title":"# <code>leadr.auth.adapters.orm.APIKeyORM.name</code>","text":"<pre><code>name: Mapped[str] = mapped_column(String, nullable=False)\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeyormstatus","title":"# <code>leadr.auth.adapters.orm.APIKeyORM.status</code>","text":"<pre><code>status: Mapped[APIKeyStatusEnum] = mapped_column(Enum(APIKeyStatusEnum, name='api_key_status', native_enum=True, values_callable=(lambda x: [(e.value) for e in x])), nullable=False, default=(APIKeyStatusEnum.ACTIVE), server_default='active')\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeyormupdated_at","title":"# <code>leadr.auth.adapters.orm.APIKeyORM.updated_at</code>","text":"<pre><code>updated_at: Mapped[timestamp] = mapped_column(onupdate=(func.now()))\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeystatusenum","title":"<code>leadr.auth.adapters.orm.APIKeyStatusEnum</code>","text":"<p>Bases: <code>str</code>, <code>Enum</code></p> <p>API Key status enum for database.</p> <p>Attributes:</p> <ul> <li>ACTIVE \u2013</li> <li>REVOKED \u2013</li> </ul>"},{"location":"api/reference/#leadrauthadaptersormapikeystatusenumactive","title":"# <code>leadr.auth.adapters.orm.APIKeyStatusEnum.ACTIVE</code>","text":"<pre><code>ACTIVE = 'active'\n</code></pre>"},{"location":"api/reference/#leadrauthadaptersormapikeystatusenumrevoked","title":"# <code>leadr.auth.adapters.orm.APIKeyStatusEnum.REVOKED</code>","text":"<pre><code>REVOKED = 'revoked'\n</code></pre>"},{"location":"api/reference/#leadrauthapi","title":"<code>leadr.auth.api</code>","text":"<p>Modules:</p> <ul> <li>routes \u2013 API routes for authentication and API key management.</li> <li>schemas \u2013 API schemas for API Key endpoints.</li> </ul>"},{"location":"api/reference/#leadrauthapiroutes","title":"<code>leadr.auth.api.routes</code>","text":"<p>API routes for authentication and API key management.</p> <p>Functions:</p> <ul> <li>create_api_key \u2013 Create a new API key for an account.</li> <li>get_api_key \u2013 Get a single API key by ID.</li> <li>list_api_keys \u2013 List API keys for an account with optional filters.</li> <li>update_api_key \u2013 Update an API key.</li> </ul> <p>Attributes:</p> <ul> <li>router \u2013</li> </ul>"},{"location":"api/reference/#leadrauthapiroutescreate_api_key","title":"<code>leadr.auth.api.routes.create_api_key</code>","text":"<pre><code>create_api_key(request, service)\n</code></pre> <p>Create a new API key for an account.</p> <p>The plain API key is returned only once in this response. Store it securely as it cannot be retrieved later.</p> <p>Returns:</p> <ul> <li><code>CreateAPIKeyResponse</code> \u2013 CreateAPIKeyResponse with the plain key included.</li> </ul> <p>Raises:</p> <ul> <li><code>404</code> \u2013 Account not found.</li> </ul>"},{"location":"api/reference/#leadrauthapiroutesget_api_key","title":"<code>leadr.auth.api.routes.get_api_key</code>","text":"<pre><code>get_api_key(key_id, service)\n</code></pre> <p>Get a single API key by ID.</p> <p>Parameters:</p> <ul> <li>key_id (<code>UUID4</code>) \u2013 The UUID of the API key to retrieve.</li> </ul> <p>Returns:</p> <ul> <li><code>APIKeyResponse</code> \u2013 APIKeyResponse with key details (excludes the plain key).</li> </ul> <p>Raises:</p> <ul> <li><code>404</code> \u2013 API key not found.</li> </ul>"},{"location":"api/reference/#leadrauthapirouteslist_api_keys","title":"<code>leadr.auth.api.routes.list_api_keys</code>","text":"<pre><code>list_api_keys(service, account_id, status=None)\n</code></pre> <p>List API keys for an account with optional filters.</p> <p>TODO: Replace account_id query param with account_id from auth token.</p> <p>Parameters:</p> <ul> <li>account_id (<code>Annotated[UUID4, Query(description='Account ID to filter by')]</code>) \u2013 Account ID to filter results (REQUIRED for multi-tenant safety).</li> <li>status (<code>Annotated[APIKeyStatus | None, Query(description='Filter by status')]</code>) \u2013 Optional status to filter results (active or revoked).</li> </ul> <p>Returns:</p> <ul> <li><code>list[APIKeyResponse]</code> \u2013 List of API keys matching the filters.</li> </ul>"},{"location":"api/reference/#leadrauthapiroutesrouter","title":"<code>leadr.auth.api.routes.router</code>","text":"<pre><code>router = APIRouter()\n</code></pre>"},{"location":"api/reference/#leadrauthapiroutesupdate_api_key","title":"<code>leadr.auth.api.routes.update_api_key</code>","text":"<pre><code>update_api_key(key_id, request, service)\n</code></pre> <p>Update an API key.</p> <p>Currently supports:</p> <ul> <li>Updating status (e.g., to revoke a key)</li> <li>Soft delete via deleted flag</li> </ul> <p>Parameters:</p> <ul> <li>key_id (<code>UUID4</code>) \u2013 The UUID of the API key to update.</li> <li>request (<code>UpdateAPIKeyRequest</code>) \u2013 Update request with optional status and deleted fields.</li> </ul> <p>Returns:</p> <ul> <li><code>APIKeyResponse</code> \u2013 APIKeyResponse with updated key details.</li> </ul> <p>Raises:</p> <ul> <li><code>404</code> \u2013 API key not found.</li> </ul>"},{"location":"api/reference/#leadrauthapischemas","title":"<code>leadr.auth.api.schemas</code>","text":"<p>API schemas for API Key endpoints.</p> <p>Classes:</p> <ul> <li>APIKeyResponse \u2013 Response schema for API key details.</li> <li>CreateAPIKeyRequest \u2013 Request schema for creating an API key.</li> <li>CreateAPIKeyResponse \u2013 Response schema for creating an API key.</li> <li>UpdateAPIKeyRequest \u2013 Request schema for updating an API key.</li> </ul>"},{"location":"api/reference/#leadrauthapischemasapikeyresponse","title":"<code>leadr.auth.api.schemas.APIKeyResponse</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Response schema for API key details.</p> <p>Excludes sensitive information like key_hash. The full key is never returned after creation.</p> <p>Functions:</p> <ul> <li>from_domain \u2013 Convert domain entity to response model.</li> </ul> <p>Attributes:</p> <ul> <li>account_id (<code>UUID</code>) \u2013</li> <li>created_at (<code>datetime</code>) \u2013</li> <li>expires_at (<code>datetime | None</code>) \u2013</li> <li>id (<code>UUID</code>) \u2013</li> <li>last_used_at (<code>datetime | None</code>) \u2013</li> <li>model_config \u2013</li> <li>name (<code>str</code>) \u2013</li> <li>prefix (<code>str</code>) \u2013</li> <li>status (<code>APIKeyStatus</code>) \u2013</li> <li>updated_at (<code>datetime</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrauthapischemasapikeyresponseaccount_id","title":"# <code>leadr.auth.api.schemas.APIKeyResponse.account_id</code>","text":"<pre><code>account_id: UUID = Field(description='ID of the account this key belongs to')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemasapikeyresponsecreated_at","title":"# <code>leadr.auth.api.schemas.APIKeyResponse.created_at</code>","text":"<pre><code>created_at: datetime = Field(description='Timestamp when the key was created (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemasapikeyresponseexpires_at","title":"# <code>leadr.auth.api.schemas.APIKeyResponse.expires_at</code>","text":"<pre><code>expires_at: datetime | None = Field(default=None, description='Expiration timestamp (UTC), or null if never expires')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemasapikeyresponsefrom_domain","title":"# <code>leadr.auth.api.schemas.APIKeyResponse.from_domain</code>","text":"<pre><code>from_domain(api_key)\n</code></pre> <p>Convert domain entity to response model.</p> <p>Parameters:</p> <ul> <li>api_key (<code>APIKey</code>) \u2013 The domain APIKey entity</li> </ul> <p>Returns:</p> <ul> <li><code>APIKeyResponse</code> \u2013 APIKeyResponse with all fields populated</li> </ul>"},{"location":"api/reference/#leadrauthapischemasapikeyresponseid","title":"# <code>leadr.auth.api.schemas.APIKeyResponse.id</code>","text":"<pre><code>id: UUID = Field(description='Unique identifier for the API key')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemasapikeyresponselast_used_at","title":"# <code>leadr.auth.api.schemas.APIKeyResponse.last_used_at</code>","text":"<pre><code>last_used_at: datetime | None = Field(default=None, description='Timestamp of last successful authentication (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemasapikeyresponsemodel_config","title":"# <code>leadr.auth.api.schemas.APIKeyResponse.model_config</code>","text":"<pre><code>model_config = ConfigDict(extra='forbid')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemasapikeyresponsename","title":"# <code>leadr.auth.api.schemas.APIKeyResponse.name</code>","text":"<pre><code>name: str = Field(description='Human-readable name for the API key')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemasapikeyresponseprefix","title":"# <code>leadr.auth.api.schemas.APIKeyResponse.prefix</code>","text":"<pre><code>prefix: str = Field(description='Key prefix for identification (first 8 characters)')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemasapikeyresponsestatus","title":"# <code>leadr.auth.api.schemas.APIKeyResponse.status</code>","text":"<pre><code>status: APIKeyStatus = Field(description='Current status (active, revoked, expired)')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemasapikeyresponseupdated_at","title":"# <code>leadr.auth.api.schemas.APIKeyResponse.updated_at</code>","text":"<pre><code>updated_at: datetime = Field(description='Timestamp of last update (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemascreateapikeyrequest","title":"<code>leadr.auth.api.schemas.CreateAPIKeyRequest</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Request schema for creating an API key.</p> <p>Attributes:</p> <ul> <li>account_id (<code>UUID</code>) \u2013</li> <li>expires_at (<code>datetime | None</code>) \u2013</li> <li>name (<code>str</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrauthapischemascreateapikeyrequestaccount_id","title":"# <code>leadr.auth.api.schemas.CreateAPIKeyRequest.account_id</code>","text":"<pre><code>account_id: UUID = Field(description='ID of the account this API key belongs to')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemascreateapikeyrequestexpires_at","title":"# <code>leadr.auth.api.schemas.CreateAPIKeyRequest.expires_at</code>","text":"<pre><code>expires_at: datetime | None = Field(default=None, description='Optional expiration timestamp (UTC). Key never expires if omitted')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemascreateapikeyrequestname","title":"# <code>leadr.auth.api.schemas.CreateAPIKeyRequest.name</code>","text":"<pre><code>name: str = Field(description=\"Human-readable name for the API key (e.g., 'Production Server')\")\n</code></pre>"},{"location":"api/reference/#leadrauthapischemascreateapikeyresponse","title":"<code>leadr.auth.api.schemas.CreateAPIKeyResponse</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Response schema for creating an API key.</p> <p>Includes the plain API key which is only shown once. The client must save this key as it cannot be retrieved later.</p> <p>Functions:</p> <ul> <li>from_domain \u2013 Convert domain entity to response model with plain key.</li> </ul> <p>Attributes:</p> <ul> <li>created_at (<code>datetime</code>) \u2013</li> <li>expires_at (<code>datetime | None</code>) \u2013</li> <li>id (<code>UUID</code>) \u2013</li> <li>key (<code>str</code>) \u2013</li> <li>name (<code>str</code>) \u2013</li> <li>prefix (<code>str</code>) \u2013</li> <li>status (<code>APIKeyStatus</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrauthapischemascreateapikeyresponsecreated_at","title":"# <code>leadr.auth.api.schemas.CreateAPIKeyResponse.created_at</code>","text":"<pre><code>created_at: datetime = Field(description='Timestamp when the key was created (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemascreateapikeyresponseexpires_at","title":"# <code>leadr.auth.api.schemas.CreateAPIKeyResponse.expires_at</code>","text":"<pre><code>expires_at: datetime | None = Field(default=None, description='Expiration timestamp (UTC), or null if never expires')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemascreateapikeyresponsefrom_domain","title":"# <code>leadr.auth.api.schemas.CreateAPIKeyResponse.from_domain</code>","text":"<pre><code>from_domain(api_key, plain_key)\n</code></pre> <p>Convert domain entity to response model with plain key.</p> <p>Parameters:</p> <ul> <li>api_key (<code>APIKey</code>) \u2013 The domain APIKey entity</li> <li>plain_key (<code>str</code>) \u2013 The plain text API key (only available at creation)</li> </ul> <p>Returns:</p> <ul> <li><code>CreateAPIKeyResponse</code> \u2013 CreateAPIKeyResponse with all fields populated</li> </ul>"},{"location":"api/reference/#leadrauthapischemascreateapikeyresponseid","title":"# <code>leadr.auth.api.schemas.CreateAPIKeyResponse.id</code>","text":"<pre><code>id: UUID = Field(description='Unique identifier for the API key')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemascreateapikeyresponsekey","title":"# <code>leadr.auth.api.schemas.CreateAPIKeyResponse.key</code>","text":"<pre><code>key: str = Field(description='Plain text API key. ONLY returned at creation - save this securely!')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemascreateapikeyresponsename","title":"# <code>leadr.auth.api.schemas.CreateAPIKeyResponse.name</code>","text":"<pre><code>name: str = Field(description='Human-readable name for the API key')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemascreateapikeyresponseprefix","title":"# <code>leadr.auth.api.schemas.CreateAPIKeyResponse.prefix</code>","text":"<pre><code>prefix: str = Field(description='Key prefix for identification (first 8 characters)')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemascreateapikeyresponsestatus","title":"# <code>leadr.auth.api.schemas.CreateAPIKeyResponse.status</code>","text":"<pre><code>status: APIKeyStatus = Field(description='Current status of the API key')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemasupdateapikeyrequest","title":"<code>leadr.auth.api.schemas.UpdateAPIKeyRequest</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Request schema for updating an API key.</p> <p>Can update status (e.g., to revoke) or set deleted flag for soft delete.</p> <p>Attributes:</p> <ul> <li>deleted (<code>bool | None</code>) \u2013</li> <li>status (<code>APIKeyStatus | None</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrauthapischemasupdateapikeyrequestdeleted","title":"# <code>leadr.auth.api.schemas.UpdateAPIKeyRequest.deleted</code>","text":"<pre><code>deleted: bool | None = Field(default=None, description='Set to true to soft delete the key')\n</code></pre>"},{"location":"api/reference/#leadrauthapischemasupdateapikeyrequeststatus","title":"# <code>leadr.auth.api.schemas.UpdateAPIKeyRequest.status</code>","text":"<pre><code>status: APIKeyStatus | None = Field(default=None, description=\"Updated status (use 'revoked' to disable key)\")\n</code></pre>"},{"location":"api/reference/#leadrauthdependencies","title":"<code>leadr.auth.dependencies</code>","text":"<p>Authentication dependencies for FastAPI.</p> <p>Functions:</p> <ul> <li>require_api_key \u2013 Require and validate API key authentication.</li> </ul>"},{"location":"api/reference/#leadrauthdependenciesrequire_api_key","title":"<code>leadr.auth.dependencies.require_api_key</code>","text":"<pre><code>require_api_key(service, api_key=None)\n</code></pre> <p>Require and validate API key authentication.</p> <p>This dependency validates the API key from the 'leadr-api-key' header and returns the authenticated APIKey entity. It also records usage of the key by updating the last_used_at timestamp.</p> <p>Parameters:</p> <ul> <li>api_key (<code>Annotated[str | None, Header(alias=(leadr - api - key))]</code>) \u2013 The API key from the 'leadr-api-key' header.</li> <li>service (<code>APIKeyServiceDep</code>) \u2013 APIKeyService dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>APIKey</code> \u2013 The authenticated APIKey entity.</li> </ul> <p>Raises:</p> <ul> <li><code>HTTPException</code> \u2013 401 Unauthorized if the API key is missing or invalid.</li> </ul> Example  &gt; &gt; &gt; @router.get(\"/protected\") &gt; &gt; &gt; async def protected_endpoint( &gt; &gt; &gt; authenticated_key: Annotated[APIKey, Depends(require_api_key)] &gt; &gt; &gt; ): &gt; &gt; &gt; return {\"account_id\": authenticated_key.account_id}"},{"location":"api/reference/#leadrauthdomain","title":"<code>leadr.auth.domain</code>","text":"<p>Modules:</p> <ul> <li>api_key \u2013 API Key domain model.</li> </ul>"},{"location":"api/reference/#leadrauthdomainapi_key","title":"<code>leadr.auth.domain.api_key</code>","text":"<p>API Key domain model.</p> <p>Classes:</p> <ul> <li>APIKey \u2013 API Key domain entity.</li> <li>APIKeyStatus \u2013 API Key status enumeration.</li> </ul>"},{"location":"api/reference/#leadrauthdomainapi_keyapikey","title":"<code>leadr.auth.domain.api_key.APIKey</code>","text":"<p>Bases: <code>Entity</code></p> <p>API Key domain entity.</p> <p>Represents an API key used to authenticate requests to the admin API. Each account can have multiple API keys for different purposes. Keys are stored hashed for security and shown only once at creation.</p> <p>Functions:</p> <ul> <li>is_expired \u2013 Check if the API key has expired.</li> <li>is_valid \u2013 Check if the API key is valid for use.</li> <li>record_usage \u2013 Record that the API key was used.</li> <li>restore \u2013 Restore a soft-deleted entity.</li> <li>revoke \u2013 Revoke the API key, preventing further use.</li> <li>soft_delete \u2013 Mark entity as soft-deleted.</li> <li>validate_key_prefix \u2013 Validate that key_prefix starts with 'ldr_'.</li> </ul> <p>Attributes:</p> <ul> <li>account_id (<code>UUID</code>) \u2013</li> <li>created_at (<code>datetime</code>) \u2013</li> <li>deleted_at (<code>datetime | None</code>) \u2013</li> <li>expires_at (<code>datetime | None</code>) \u2013</li> <li>id (<code>UUID</code>) \u2013</li> <li>is_deleted (<code>bool</code>) \u2013 Check if entity is soft-deleted.</li> <li>key_hash (<code>str</code>) \u2013</li> <li>key_prefix (<code>str</code>) \u2013</li> <li>last_used_at (<code>datetime | None</code>) \u2013</li> <li>model_config \u2013</li> <li>name (<code>str</code>) \u2013</li> <li>status (<code>APIKeyStatus</code>) \u2013</li> <li>updated_at (<code>datetime</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyaccount_id","title":"# <code>leadr.auth.domain.api_key.APIKey.account_id</code>","text":"<pre><code>account_id: UUID\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeycreated_at","title":"# <code>leadr.auth.domain.api_key.APIKey.created_at</code>","text":"<pre><code>created_at: datetime = Field(default_factory=(lambda: datetime.now(UTC)), description='Timestamp when entity was created (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeydeleted_at","title":"# <code>leadr.auth.domain.api_key.APIKey.deleted_at</code>","text":"<pre><code>deleted_at: datetime | None = Field(default=None, description='Timestamp when entity was soft-deleted (UTC), or null if active')\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyexpires_at","title":"# <code>leadr.auth.domain.api_key.APIKey.expires_at</code>","text":"<pre><code>expires_at: datetime | None = None\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyid","title":"# <code>leadr.auth.domain.api_key.APIKey.id</code>","text":"<pre><code>id: UUID = Field(frozen=True, default_factory=uuid4, description='Unique identifier (auto-generated UUID)')\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyis_deleted","title":"# <code>leadr.auth.domain.api_key.APIKey.is_deleted</code>","text":"<pre><code>is_deleted: bool\n</code></pre> <p>Check if entity is soft-deleted.</p> <p>Returns:</p> <ul> <li><code>bool</code> \u2013 True if the entity has a deleted_at timestamp, False otherwise.</li> </ul>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyis_expired","title":"# <code>leadr.auth.domain.api_key.APIKey.is_expired</code>","text":"<pre><code>is_expired()\n</code></pre> <p>Check if the API key has expired.</p> <p>Returns:</p> <ul> <li><code>bool</code> \u2013 True if the key has an expiration date and it's in the past.</li> </ul>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyis_valid","title":"# <code>leadr.auth.domain.api_key.APIKey.is_valid</code>","text":"<pre><code>is_valid()\n</code></pre> <p>Check if the API key is valid for use.</p> <p>A key is valid if it's active and not expired.</p> <p>Returns:</p> <ul> <li><code>bool</code> \u2013 True if the key can be used for authentication.</li> </ul>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeykey_hash","title":"# <code>leadr.auth.domain.api_key.APIKey.key_hash</code>","text":"<pre><code>key_hash: str\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeykey_prefix","title":"# <code>leadr.auth.domain.api_key.APIKey.key_prefix</code>","text":"<pre><code>key_prefix: str\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeylast_used_at","title":"# <code>leadr.auth.domain.api_key.APIKey.last_used_at</code>","text":"<pre><code>last_used_at: datetime | None = None\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeymodel_config","title":"# <code>leadr.auth.domain.api_key.APIKey.model_config</code>","text":"<pre><code>model_config = ConfigDict(validate_assignment=True)\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyname","title":"# <code>leadr.auth.domain.api_key.APIKey.name</code>","text":"<pre><code>name: str\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyrecord_usage","title":"# <code>leadr.auth.domain.api_key.APIKey.record_usage</code>","text":"<pre><code>record_usage(used_at)\n</code></pre> <p>Record that the API key was used.</p> <p>Parameters:</p> <ul> <li>used_at (<code>datetime</code>) \u2013 Timestamp when the key was used.</li> </ul>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyrestore","title":"# <code>leadr.auth.domain.api_key.APIKey.restore</code>","text":"<pre><code>restore()\n</code></pre> <p>Restore a soft-deleted entity.</p> <p>Clears the deleted_at timestamp, making the entity active again.</p> Example  &gt; &gt; &gt; account.soft_delete() &gt; &gt; &gt; account.restore() &gt; &gt; &gt; assert account.is_deleted is False"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyrevoke","title":"# <code>leadr.auth.domain.api_key.APIKey.revoke</code>","text":"<pre><code>revoke()\n</code></pre> <p>Revoke the API key, preventing further use.</p>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeysoft_delete","title":"# <code>leadr.auth.domain.api_key.APIKey.soft_delete</code>","text":"<pre><code>soft_delete()\n</code></pre> <p>Mark entity as soft-deleted.</p> <p>Sets the deleted_at timestamp to the current UTC time. Entities that are already deleted are not affected (deleted_at remains at original deletion time).</p> Example  &gt; &gt; &gt; account = Account(name=\"Test\", slug=\"test\") &gt; &gt; &gt; account.soft_delete() &gt; &gt; &gt; assert account.is_deleted is True"},{"location":"api/reference/#leadrauthdomainapi_keyapikeystatus","title":"# <code>leadr.auth.domain.api_key.APIKey.status</code>","text":"<pre><code>status: APIKeyStatus = APIKeyStatus.ACTIVE\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyupdated_at","title":"# <code>leadr.auth.domain.api_key.APIKey.updated_at</code>","text":"<pre><code>updated_at: datetime = Field(default_factory=(lambda: datetime.now(UTC)), description='Timestamp of last update (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeyvalidate_key_prefix","title":"# <code>leadr.auth.domain.api_key.APIKey.validate_key_prefix</code>","text":"<pre><code>validate_key_prefix(value)\n</code></pre> <p>Validate that key_prefix starts with 'ldr_'.</p>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeystatus_1","title":"<code>leadr.auth.domain.api_key.APIKeyStatus</code>","text":"<p>Bases: <code>Enum</code></p> <p>API Key status enumeration.</p> <p>Attributes:</p> <ul> <li>ACTIVE \u2013</li> <li>REVOKED \u2013</li> </ul>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeystatusactive","title":"# <code>leadr.auth.domain.api_key.APIKeyStatus.ACTIVE</code>","text":"<pre><code>ACTIVE = 'active'\n</code></pre>"},{"location":"api/reference/#leadrauthdomainapi_keyapikeystatusrevoked","title":"# <code>leadr.auth.domain.api_key.APIKeyStatus.REVOKED</code>","text":"<pre><code>REVOKED = 'revoked'\n</code></pre>"},{"location":"api/reference/#leadrauthservices","title":"<code>leadr.auth.services</code>","text":"<p>Modules:</p> <ul> <li>api_key_crypto \u2013 Cryptographic operations for API keys.</li> <li>api_key_service \u2013 API Key service for managing API key operations.</li> <li>dependencies \u2013 API Key service dependency injection factory.</li> <li>repositories \u2013 API Key repository service.</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_crypto","title":"<code>leadr.auth.services.api_key_crypto</code>","text":"<p>Cryptographic operations for API keys.</p> <p>Functions:</p> <ul> <li>generate_api_key \u2013 Generate a secure random API key with 'ldr_' prefix.</li> <li>hash_api_key \u2013 Hash an API key for secure storage using HMAC-SHA256.</li> <li>verify_api_key \u2013 Verify an API key against its stored hash.</li> </ul> <p>Attributes:</p> <ul> <li>API_KEY_BYTES \u2013</li> <li>API_KEY_PREFIX \u2013</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_cryptoapi_key_bytes","title":"<code>leadr.auth.services.api_key_crypto.API_KEY_BYTES</code>","text":"<pre><code>API_KEY_BYTES = 32\n</code></pre>"},{"location":"api/reference/#leadrauthservicesapi_key_cryptoapi_key_prefix","title":"<code>leadr.auth.services.api_key_crypto.API_KEY_PREFIX</code>","text":"<pre><code>API_KEY_PREFIX = 'ldr_'\n</code></pre>"},{"location":"api/reference/#leadrauthservicesapi_key_cryptogenerate_api_key","title":"<code>leadr.auth.services.api_key_crypto.generate_api_key</code>","text":"<pre><code>generate_api_key()\n</code></pre> <p>Generate a secure random API key with 'ldr_' prefix.</p> <p>The key is generated using cryptographically secure random bytes and encoded using URL-safe base64 encoding for compatibility.</p> <p>Returns:</p> <ul> <li><code>str</code> \u2013 A secure API key string starting with 'ldr_' followed by</li> <li><code>str</code> \u2013 URL-safe random characters (alphanumeric, hyphen, underscore).</li> </ul> Example  &gt; &gt; &gt; key = generate_api_key() &gt; &gt; &gt; key.startswith('ldr\\_') &gt; &gt; &gt; True &gt; &gt; &gt; len(key) &gt; 36 &gt; &gt; &gt; True"},{"location":"api/reference/#leadrauthservicesapi_key_cryptohash_api_key","title":"<code>leadr.auth.services.api_key_crypto.hash_api_key</code>","text":"<pre><code>hash_api_key(key, secret)\n</code></pre> <p>Hash an API key for secure storage using HMAC-SHA256.</p> <p>Uses HMAC-SHA256 with a server-side secret (pepper) to create a one-way hash of the API key. This provides defense in depth: database compromise alone isn't enough to validate keys.</p> <p>Parameters:</p> <ul> <li>key (<code>str</code>) \u2013 The API key to hash.</li> <li>secret (<code>str</code>) \u2013 Server-side secret for additional security.</li> </ul> <p>Returns:</p> <ul> <li><code>str</code> \u2013 A hexadecimal string representation of the HMAC-SHA256 hash.</li> </ul> Example  &gt; &gt; &gt; secret = \"my-secret\" &gt; &gt; &gt; hash1 = hash_api_key('ldr_test123', secret) &gt; &gt; &gt; hash2 = hash_api_key('ldr_test123', secret) &gt; &gt; &gt; hash1 == hash2 &gt; &gt; &gt; True &gt; &gt; &gt; len(hash1) &gt; &gt; &gt; 64"},{"location":"api/reference/#leadrauthservicesapi_key_cryptoverify_api_key","title":"<code>leadr.auth.services.api_key_crypto.verify_api_key</code>","text":"<pre><code>verify_api_key(key, key_hash, secret)\n</code></pre> <p>Verify an API key against its stored hash.</p> <p>Uses timing-safe comparison to prevent timing attacks.</p> <p>Parameters:</p> <ul> <li>key (<code>str</code>) \u2013 The API key to verify.</li> <li>key_hash (<code>str</code>) \u2013 The stored hash to compare against.</li> <li>secret (<code>str</code>) \u2013 Server-side secret for HMAC verification.</li> </ul> <p>Returns:</p> <ul> <li><code>bool</code> \u2013 True if the key matches the hash, False otherwise.</li> </ul> Example  &gt; &gt; &gt; secret = \"my-secret\" &gt; &gt; &gt; key = 'ldr_test123' &gt; &gt; &gt; hashed = hash_api_key(key, secret) &gt; &gt; &gt; verify_api_key(key, hashed, secret) &gt; &gt; &gt; True &gt; &gt; &gt; verify_api_key('ldr_wrong', hashed, secret) &gt; &gt; &gt; False"},{"location":"api/reference/#leadrauthservicesapi_key_service","title":"<code>leadr.auth.services.api_key_service</code>","text":"<p>API Key service for managing API key operations.</p> <p>Classes:</p> <ul> <li>APIKeyService \u2013 Service for managing API key lifecycle and operations.</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservice","title":"<code>leadr.auth.services.api_key_service.APIKeyService</code>","text":"<p>Bases: <code>BaseService[APIKey, APIKeyRepository]</code></p> <p>Service for managing API key lifecycle and operations.</p> <p>This service orchestrates API key creation, validation, and management by coordinating between the domain models, cryptographic functions, and repository layer.</p> <p>Functions:</p> <ul> <li>count_active_api_keys \u2013 Count active API keys for an account.</li> <li>create_api_key \u2013 Create a new API key for an account.</li> <li>delete \u2013 Soft-delete an entity.</li> <li>get_api_key \u2013 Get an API key by its ID.</li> <li>get_by_id \u2013 Get an entity by its ID.</li> <li>get_by_id_or_raise \u2013 Get an entity by its ID or raise EntityNotFoundError.</li> <li>list_account_api_keys \u2013 List all API keys for an account.</li> <li>list_all \u2013 List all non-deleted entities.</li> <li>list_api_keys \u2013 List API keys for an account with optional filters.</li> <li>record_usage \u2013 Record that an API key was used at a specific time.</li> <li>revoke_api_key \u2013 Revoke an API key, preventing further use.</li> <li>soft_delete \u2013 Soft-delete an entity and return it before deletion.</li> <li>update_api_key_status \u2013 Update the status of an API key.</li> <li>validate_api_key \u2013 Validate an API key and return the domain entity if valid.</li> </ul> <p>Attributes:</p> <ul> <li>repository \u2013</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservicecount_active_api_keys","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.count_active_api_keys</code>","text":"<pre><code>count_active_api_keys(account_id)\n</code></pre> <p>Count active API keys for an account.</p> <p>This is useful for enforcing limits on the number of active keys per account based on their plan or tier.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID</code>) \u2013 The account ID to count keys for.</li> </ul> <p>Returns:</p> <ul> <li><code>int</code> \u2013 Number of active (non-revoked) API keys.</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservicecreate_api_key","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.create_api_key</code>","text":"<pre><code>create_api_key(account_id, name, expires_at=None)\n</code></pre> <p>Create a new API key for an account.</p> <p>Generates a secure random key, hashes it for storage, and persists it to the database. The plain key is returned only once for the caller to provide to the user.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID</code>) \u2013 The account ID to create the key for.</li> <li>name (<code>str</code>) \u2013 A descriptive name for the key.</li> <li>expires_at (<code>datetime | None</code>) \u2013 Optional expiration timestamp for the key.</li> </ul> <p>Returns:</p> <ul> <li><code>APIKey</code> \u2013 A tuple of (APIKey domain entity, plain key string).</li> <li><code>str</code> \u2013 The plain key should be shown to the user once and not stored.</li> </ul> Example  &gt; &gt; &gt; api_key, plain_key = await service.create_api_key( &gt; &gt; &gt; ... account_id=account_id, &gt; &gt; &gt; ... name=\"Production API Key\", &gt; &gt; &gt; ... expires_at=datetime.now(UTC) + timedelta(days=90) &gt; &gt; &gt; ... ) &gt; &gt; &gt; print(f\"Your API key: {plain_key}\") &gt; &gt; &gt; Your API key: ldr_abc123..."},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservicedelete","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.delete</code>","text":"<pre><code>delete(entity_id)\n</code></pre> <p>Soft-delete an entity.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to delete</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the entity doesn't exist</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyserviceget_api_key","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.get_api_key</code>","text":"<pre><code>get_api_key(key_id)\n</code></pre> <p>Get an API key by its ID.</p> <p>Parameters:</p> <ul> <li>key_id (<code>UUID</code>) \u2013 The ID of the API key to retrieve.</li> </ul> <p>Returns:</p> <ul> <li><code>APIKey | None</code> \u2013 The APIKey domain entity if found, None otherwise.</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyserviceget_by_id","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.get_by_id</code>","text":"<pre><code>get_by_id(entity_id)\n</code></pre> <p>Get an entity by its ID.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to retrieve</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT | None</code> \u2013 The domain entity if found, None otherwise</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyserviceget_by_id_or_raise","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.get_by_id_or_raise</code>","text":"<pre><code>get_by_id_or_raise(entity_id)\n</code></pre> <p>Get an entity by its ID or raise EntityNotFoundError.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to retrieve</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 The domain entity</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the entity is not found   (converted to HTTP 404 by global handler)</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservicelist_account_api_keys","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.list_account_api_keys</code>","text":"<pre><code>list_account_api_keys(account_id, active_only=False)\n</code></pre> <p>List all API keys for an account.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID</code>) \u2013 The account ID to list keys for.</li> <li>active_only (<code>bool</code>) \u2013 If True, only return active (non-revoked) keys.</li> </ul> <p>Returns:</p> <ul> <li><code>list[APIKey]</code> \u2013 List of APIKey domain entities.</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservicelist_all","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.list_all</code>","text":"<pre><code>list_all()\n</code></pre> <p>List all non-deleted entities.</p> <p>Returns:</p> <ul> <li><code>list[DomainEntityT]</code> \u2013 List of domain entities</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservicelist_api_keys","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.list_api_keys</code>","text":"<pre><code>list_api_keys(account_id, status=None)\n</code></pre> <p>List API keys for an account with optional filters.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID</code>) \u2013 REQUIRED - Account ID to filter by (multi-tenant safety).</li> <li>status (<code>str | None</code>) \u2013 Optional status string to filter by.</li> </ul> <p>Returns:</p> <ul> <li><code>list[APIKey]</code> \u2013 List of APIKey domain entities matching the filters.</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservicerecord_usage","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.record_usage</code>","text":"<pre><code>record_usage(key_id, used_at)\n</code></pre> <p>Record that an API key was used at a specific time.</p> <p>This is typically called automatically during validation, but can also be called explicitly if needed.</p> <p>Parameters:</p> <ul> <li>key_id (<code>UUID</code>) \u2013 The ID of the API key that was used.</li> <li>used_at (<code>datetime</code>) \u2013 The timestamp when the key was used.</li> </ul> <p>Returns:</p> <ul> <li><code>APIKey</code> \u2013 The updated APIKey domain entity.</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the key doesn't exist.</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservicerepository","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.repository</code>","text":"<pre><code>repository = self._create_repository(session)\n</code></pre>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservicerevoke_api_key","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.revoke_api_key</code>","text":"<pre><code>revoke_api_key(key_id)\n</code></pre> <p>Revoke an API key, preventing further use.</p> <p>Parameters:</p> <ul> <li>key_id (<code>UUID</code>) \u2013 The ID of the API key to revoke.</li> </ul> <p>Returns:</p> <ul> <li><code>APIKey</code> \u2013 The updated APIKey domain entity with REVOKED status.</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the key doesn't exist.</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservicesoft_delete","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.soft_delete</code>","text":"<pre><code>soft_delete(entity_id)\n</code></pre> <p>Soft-delete an entity and return it before deletion.</p> <p>Useful for endpoints that need to return the deleted entity in the response.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to delete</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 The entity before it was deleted</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the entity doesn't exist</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyserviceupdate_api_key_status","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.update_api_key_status</code>","text":"<pre><code>update_api_key_status(key_id, status)\n</code></pre> <p>Update the status of an API key.</p> <p>Parameters:</p> <ul> <li>key_id (<code>UUID</code>) \u2013 The ID of the API key to update.</li> <li>status (<code>str</code>) \u2013 The new status value (active or revoked).</li> </ul> <p>Returns:</p> <ul> <li><code>APIKey</code> \u2013 The updated APIKey domain entity.</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the key doesn't exist.</li> <li><code>ValueError</code> \u2013 If the status is invalid.</li> </ul>"},{"location":"api/reference/#leadrauthservicesapi_key_serviceapikeyservicevalidate_api_key","title":"# <code>leadr.auth.services.api_key_service.APIKeyService.validate_api_key</code>","text":"<pre><code>validate_api_key(plain_key)\n</code></pre> <p>Validate an API key and return the domain entity if valid.</p> <p>Performs the following checks:</p> <ol> <li>Extracts prefix and looks up key in database</li> <li>Verifies the hash matches</li> <li>Checks if key is active (not revoked)</li> <li>Checks if key is not expired</li> <li>Records usage timestamp if valid</li> </ol> <p>Parameters:</p> <ul> <li>plain_key (<code>str</code>) \u2013 The plain API key string to validate.</li> </ul> <p>Returns:</p> <ul> <li><code>APIKey | None</code> \u2013 The APIKey domain entity if valid, None otherwise.</li> </ul> Example  &gt; &gt; &gt; api_key = await service.validate_api_key(\"ldr_abc123...\") &gt; &gt; &gt; if api_key: &gt; &gt; &gt; ... print(f\"Valid key for account {api_key.account_id}\") &gt; &gt; &gt; ... else: &gt; &gt; &gt; ... print(\"Invalid or expired key\")"},{"location":"api/reference/#leadrauthservicesdependencies","title":"<code>leadr.auth.services.dependencies</code>","text":"<p>API Key service dependency injection factory.</p> <p>Functions:</p> <ul> <li>get_api_key_service \u2013 Get APIKeyService dependency.</li> </ul> <p>Attributes:</p> <ul> <li>APIKeyServiceDep \u2013</li> </ul>"},{"location":"api/reference/#leadrauthservicesdependenciesapikeyservicedep","title":"<code>leadr.auth.services.dependencies.APIKeyServiceDep</code>","text":"<pre><code>APIKeyServiceDep = Annotated[APIKeyService, Depends(get_api_key_service)]\n</code></pre>"},{"location":"api/reference/#leadrauthservicesdependenciesget_api_key_service","title":"<code>leadr.auth.services.dependencies.get_api_key_service</code>","text":"<pre><code>get_api_key_service(db)\n</code></pre> <p>Get APIKeyService dependency.</p> <p>Parameters:</p> <ul> <li>db (<code>DatabaseSession</code>) \u2013 Database session injected via dependency injection</li> </ul> <p>Returns:</p> <ul> <li><code>APIKeyService</code> \u2013 APIKeyService instance configured with the database session</li> </ul>"},{"location":"api/reference/#leadrauthservicesrepositories","title":"<code>leadr.auth.services.repositories</code>","text":"<p>API Key repository service.</p> <p>Classes:</p> <ul> <li>APIKeyRepository \u2013 API Key repository for managing API key persistence.</li> </ul>"},{"location":"api/reference/#leadrauthservicesrepositoriesapikeyrepository","title":"<code>leadr.auth.services.repositories.APIKeyRepository</code>","text":"<p>Bases: <code>BaseRepository[APIKey, APIKeyORM]</code></p> <p>API Key repository for managing API key persistence.</p> <p>Functions:</p> <ul> <li>count_active_by_account \u2013 Count active, non-deleted API keys for a given account.</li> <li>create \u2013 Create a new entity in the database.</li> <li>delete \u2013 Soft delete an entity by setting its deleted_at timestamp.</li> <li>filter \u2013 Filter API keys by account and optional criteria.</li> <li>get_by_id \u2013 Get an entity by its ID.</li> <li>get_by_prefix \u2013 Get API key by prefix, returns None if not found or soft-deleted.</li> <li>update \u2013 Update an existing entity in the database.</li> </ul> <p>Attributes:</p> <ul> <li>session \u2013</li> </ul>"},{"location":"api/reference/#leadrauthservicesrepositoriesapikeyrepositorycount_active_by_account","title":"# <code>leadr.auth.services.repositories.APIKeyRepository.count_active_by_account</code>","text":"<pre><code>count_active_by_account(account_id)\n</code></pre> <p>Count active, non-deleted API keys for a given account.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID</code>) \u2013 The account ID to count keys for.</li> </ul> <p>Returns:</p> <ul> <li><code>int</code> \u2013 Number of active, non-deleted API keys for the account.</li> </ul>"},{"location":"api/reference/#leadrauthservicesrepositoriesapikeyrepositorycreate","title":"# <code>leadr.auth.services.repositories.APIKeyRepository.create</code>","text":"<pre><code>create(entity)\n</code></pre> <p>Create a new entity in the database.</p> <p>Parameters:</p> <ul> <li>entity (<code>DomainEntityT</code>) \u2013 Domain entity to create</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 Created domain entity with refreshed data</li> </ul>"},{"location":"api/reference/#leadrauthservicesrepositoriesapikeyrepositorydelete","title":"# <code>leadr.auth.services.repositories.APIKeyRepository.delete</code>","text":"<pre><code>delete(entity_id)\n</code></pre> <p>Soft delete an entity by setting its deleted_at timestamp.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID4</code>) \u2013 ID of entity to delete</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If entity is not found</li> </ul>"},{"location":"api/reference/#leadrauthservicesrepositoriesapikeyrepositoryfilter","title":"# <code>leadr.auth.services.repositories.APIKeyRepository.filter</code>","text":"<pre><code>filter(account_id, status=None, active_only=False, **kwargs)\n</code></pre> <p>Filter API keys by account and optional criteria.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID</code>) \u2013 REQUIRED - Account ID to filter by (multi-tenant safety)</li> <li>status (<code>APIKeyStatus | None</code>) \u2013 Optional APIKeyStatus to filter by</li> <li>active_only (<code>bool</code>) \u2013 If True, only return ACTIVE keys (bool)</li> </ul> <p>Returns:</p> <ul> <li><code>list[APIKey]</code> \u2013 List of API keys for the account matching the filter criteria</li> </ul>"},{"location":"api/reference/#leadrauthservicesrepositoriesapikeyrepositoryget_by_id","title":"# <code>leadr.auth.services.repositories.APIKeyRepository.get_by_id</code>","text":"<pre><code>get_by_id(entity_id, include_deleted=False)\n</code></pre> <p>Get an entity by its ID.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID4</code>) \u2013 Entity ID to retrieve</li> <li>include_deleted (<code>bool</code>) \u2013 If True, include soft-deleted entities. Defaults to False.</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT | None</code> \u2013 Domain entity if found, None otherwise</li> </ul>"},{"location":"api/reference/#leadrauthservicesrepositoriesapikeyrepositoryget_by_prefix","title":"# <code>leadr.auth.services.repositories.APIKeyRepository.get_by_prefix</code>","text":"<pre><code>get_by_prefix(key_prefix)\n</code></pre> <p>Get API key by prefix, returns None if not found or soft-deleted.</p>"},{"location":"api/reference/#leadrauthservicesrepositoriesapikeyrepositorysession","title":"# <code>leadr.auth.services.repositories.APIKeyRepository.session</code>","text":"<pre><code>session = session\n</code></pre>"},{"location":"api/reference/#leadrauthservicesrepositoriesapikeyrepositoryupdate","title":"# <code>leadr.auth.services.repositories.APIKeyRepository.update</code>","text":"<pre><code>update(entity)\n</code></pre> <p>Update an existing entity in the database.</p> <p>Parameters:</p> <ul> <li>entity (<code>DomainEntityT</code>) \u2013 Domain entity with updated data</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 Updated domain entity with refreshed data</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If entity is not found</li> </ul>"},{"location":"api/reference/#leadrboards","title":"<code>leadr.boards</code>","text":"<p>Modules:</p> <ul> <li>adapters \u2013</li> <li>api \u2013</li> <li>domain \u2013</li> <li>services \u2013</li> </ul>"},{"location":"api/reference/#leadrboardsadapters","title":"<code>leadr.boards.adapters</code>","text":""},{"location":"api/reference/#leadrboardsapi","title":"<code>leadr.boards.api</code>","text":""},{"location":"api/reference/#leadrboardsdomain","title":"<code>leadr.boards.domain</code>","text":""},{"location":"api/reference/#leadrboardsservices","title":"<code>leadr.boards.services</code>","text":""},{"location":"api/reference/#leadrcommon","title":"<code>leadr.common</code>","text":"<p>Modules:</p> <ul> <li>api \u2013 API utilities and exception handlers.</li> <li>database \u2013 Database connection and session management.</li> <li>dependencies \u2013 Shared FastAPI dependencies for the application.</li> <li>domain \u2013</li> <li>orm \u2013 Common ORM base classes and utilities.</li> <li>repositories \u2013 Base repository abstraction for common CRUD operations.</li> <li>services \u2013 Base service abstraction for common business logic patterns.</li> </ul>"},{"location":"api/reference/#leadrcommonapi","title":"<code>leadr.common.api</code>","text":"<p>API utilities and exception handlers.</p> <p>Modules:</p> <ul> <li>exceptions \u2013 Global exception handlers for API layer.</li> </ul>"},{"location":"api/reference/#leadrcommonapiexceptions","title":"<code>leadr.common.api.exceptions</code>","text":"<p>Global exception handlers for API layer.</p> <p>Functions:</p> <ul> <li>entity_not_found_handler \u2013 Convert EntityNotFoundError to 404 HTTP response.</li> </ul>"},{"location":"api/reference/#leadrcommonapiexceptionsentity_not_found_handler","title":"<code>leadr.common.api.exceptions.entity_not_found_handler</code>","text":"<pre><code>entity_not_found_handler(request, exc)\n</code></pre> <p>Convert EntityNotFoundError to 404 HTTP response.</p> <p>Parameters:</p> <ul> <li>request (<code>Request</code>) \u2013 The incoming request</li> <li>exc (<code>Exception</code>) \u2013 The domain exception</li> </ul> <p>Returns:</p> <ul> <li><code>JSONResponse</code> \u2013 JSONResponse with 404 status and error detail</li> </ul>"},{"location":"api/reference/#leadrcommondatabase","title":"<code>leadr.common.database</code>","text":"<p>Database connection and session management.</p> <p>Functions:</p> <ul> <li>build_database_url \u2013 Build async database URL from settings.</li> <li>get_db \u2013 FastAPI dependency for async database session.</li> </ul> <p>Attributes:</p> <ul> <li>async_session_factory \u2013</li> <li>engine \u2013</li> </ul>"},{"location":"api/reference/#leadrcommondatabaseasync_session_factory","title":"<code>leadr.common.database.async_session_factory</code>","text":"<pre><code>async_session_factory = async_sessionmaker(engine, class_=AsyncSession, expire_on_commit=False)\n</code></pre>"},{"location":"api/reference/#leadrcommondatabasebuild_database_url","title":"<code>leadr.common.database.build_database_url</code>","text":"<pre><code>build_database_url()\n</code></pre> <p>Build async database URL from settings.</p>"},{"location":"api/reference/#leadrcommondatabaseengine","title":"<code>leadr.common.database.engine</code>","text":"<pre><code>engine = create_async_engine(build_database_url(), pool_size=(settings.DB_POOL_SIZE), max_overflow=(settings.DB_POOL_MAX_OVERFLOW), pool_recycle=(settings.DB_POOL_RECYCLE), pool_pre_ping=True, echo=(settings.DB_ECHO))\n</code></pre>"},{"location":"api/reference/#leadrcommondatabaseget_db","title":"<code>leadr.common.database.get_db</code>","text":"<pre><code>get_db()\n</code></pre> <p>FastAPI dependency for async database session.</p> <p>The session is yielded to the caller, who is responsible for committing transactions explicitly. The context manager automatically handles cleanup and rollback on exceptions.</p>"},{"location":"api/reference/#leadrcommondependencies","title":"<code>leadr.common.dependencies</code>","text":"<p>Shared FastAPI dependencies for the application.</p> <p>Attributes:</p> <ul> <li>DatabaseSession \u2013</li> </ul>"},{"location":"api/reference/#leadrcommondependenciesdatabasesession","title":"<code>leadr.common.dependencies.DatabaseSession</code>","text":"<pre><code>DatabaseSession = Annotated[AsyncSession, Depends(get_db)]\n</code></pre>"},{"location":"api/reference/#leadrcommondomain","title":"<code>leadr.common.domain</code>","text":"<p>Modules:</p> <ul> <li>exceptions \u2013 Domain-specific exceptions for LEADR.</li> <li>models \u2013 Common domain models and value objects.</li> </ul>"},{"location":"api/reference/#leadrcommondomainexceptions","title":"<code>leadr.common.domain.exceptions</code>","text":"<p>Domain-specific exceptions for LEADR.</p> <p>Classes:</p> <ul> <li>DomainError \u2013 Base exception for all domain-level errors.</li> <li>EntityNotFoundError \u2013 Raised when an entity cannot be found in the repository.</li> <li>InvalidEntityStateError \u2013 Raised when an entity is in an invalid state for the requested operation.</li> <li>ValidationError \u2013 Raised when entity validation fails.</li> </ul>"},{"location":"api/reference/#leadrcommondomainexceptionsdomainerror","title":"<code>leadr.common.domain.exceptions.DomainError</code>","text":"<pre><code>DomainError(message)\n</code></pre> <p>Bases: <code>Exception</code></p> <p>Base exception for all domain-level errors.</p> <p>All custom domain exceptions should inherit from this base class. This allows catching all domain errors with a single except clause.</p> <p>Parameters:</p> <ul> <li>message (<code>str</code>) \u2013 Human-readable error message.</li> </ul> Example  &gt; &gt; &gt; try: &gt; &gt; &gt; ... raise DomainError(\"Something went wrong\") &gt; &gt; &gt; ... except DomainError as e: &gt; &gt; &gt; ... print(e.message)   <p>Attributes:</p> <ul> <li>message \u2013</li> </ul>"},{"location":"api/reference/#leadrcommondomainexceptionsdomainerrormessage","title":"# <code>leadr.common.domain.exceptions.DomainError.message</code>","text":"<pre><code>message = message\n</code></pre>"},{"location":"api/reference/#leadrcommondomainexceptionsentitynotfounderror","title":"<code>leadr.common.domain.exceptions.EntityNotFoundError</code>","text":"<pre><code>EntityNotFoundError(entity_type, entity_id)\n</code></pre> <p>Bases: <code>DomainError</code></p> <p>Raised when an entity cannot be found in the repository.</p> <p>This exception is raised by repository queries when an entity with the specified ID does not exist in the database.</p> <p>Parameters:</p> <ul> <li>entity_type (<code>str</code>) \u2013 Name of the entity type (e.g., \"Account\", \"User\").</li> <li>entity_id (<code>str</code>) \u2013 The ID that was not found.</li> </ul> Example  &gt; &gt; &gt; raise EntityNotFoundError(\"Account\", \"123e4567-e89b-12d3-a456-426614174000\") &gt; &gt; &gt; EntityNotFoundError: Account not found: 123e4567-e89b-12d3-a456-426614174000   <p>Attributes:</p> <ul> <li>entity_id \u2013</li> <li>entity_type \u2013</li> <li>message \u2013</li> </ul>"},{"location":"api/reference/#leadrcommondomainexceptionsentitynotfounderrorentity_id","title":"# <code>leadr.common.domain.exceptions.EntityNotFoundError.entity_id</code>","text":"<pre><code>entity_id = entity_id\n</code></pre>"},{"location":"api/reference/#leadrcommondomainexceptionsentitynotfounderrorentity_type","title":"# <code>leadr.common.domain.exceptions.EntityNotFoundError.entity_type</code>","text":"<pre><code>entity_type = entity_type\n</code></pre>"},{"location":"api/reference/#leadrcommondomainexceptionsentitynotfounderrormessage","title":"# <code>leadr.common.domain.exceptions.EntityNotFoundError.message</code>","text":"<pre><code>message = message\n</code></pre>"},{"location":"api/reference/#leadrcommondomainexceptionsinvalidentitystateerror","title":"<code>leadr.common.domain.exceptions.InvalidEntityStateError</code>","text":"<pre><code>InvalidEntityStateError(entity_type, reason)\n</code></pre> <p>Bases: <code>DomainError</code></p> <p>Raised when an entity is in an invalid state for the requested operation.</p> <p>Use this exception when business rules prevent an operation due to the current state of an entity. For example, activating an already-active account, or modifying a deleted entity.</p> <p>Parameters:</p> <ul> <li>entity_type (<code>str</code>) \u2013 Name of the entity type (e.g., \"Account\", \"User\").</li> <li>reason (<code>str</code>) \u2013 Explanation of why the state is invalid.</li> </ul> Example  &gt; &gt; &gt; raise InvalidEntityStateError(\"Account\", \"Cannot activate already active account\") &gt; &gt; &gt; InvalidEntityStateError: Invalid Account state: Cannot activate already active account   <p>Attributes:</p> <ul> <li>entity_type \u2013</li> <li>message \u2013</li> <li>reason \u2013</li> </ul>"},{"location":"api/reference/#leadrcommondomainexceptionsinvalidentitystateerrorentity_type","title":"# <code>leadr.common.domain.exceptions.InvalidEntityStateError.entity_type</code>","text":"<pre><code>entity_type = entity_type\n</code></pre>"},{"location":"api/reference/#leadrcommondomainexceptionsinvalidentitystateerrormessage","title":"# <code>leadr.common.domain.exceptions.InvalidEntityStateError.message</code>","text":"<pre><code>message = message\n</code></pre>"},{"location":"api/reference/#leadrcommondomainexceptionsinvalidentitystateerrorreason","title":"# <code>leadr.common.domain.exceptions.InvalidEntityStateError.reason</code>","text":"<pre><code>reason = reason\n</code></pre>"},{"location":"api/reference/#leadrcommondomainexceptionsvalidationerror","title":"<code>leadr.common.domain.exceptions.ValidationError</code>","text":"<pre><code>ValidationError(entity_type, field, reason)\n</code></pre> <p>Bases: <code>DomainError</code></p> <p>Raised when entity validation fails.</p> <p>Use this exception when field-level validation fails, such as invalid format, out-of-range values, or constraint violations.</p> <p>Parameters:</p> <ul> <li>entity_type (<code>str</code>) \u2013 Name of the entity type (e.g., \"Account\", \"User\").</li> <li>field (<code>str</code>) \u2013 Name of the field that failed validation.</li> <li>reason (<code>str</code>) \u2013 Explanation of why validation failed.</li> </ul> Example  &gt; &gt; &gt; raise ValidationError(\"Account\", \"slug\", \"Must be lowercase alphanumeric\") &gt; &gt; &gt; ValidationError: Account.slug: Must be lowercase alphanumeric   <p>Attributes:</p> <ul> <li>entity_type \u2013</li> <li>field \u2013</li> <li>message \u2013</li> <li>reason \u2013</li> </ul>"},{"location":"api/reference/#leadrcommondomainexceptionsvalidationerrorentity_type","title":"# <code>leadr.common.domain.exceptions.ValidationError.entity_type</code>","text":"<pre><code>entity_type = entity_type\n</code></pre>"},{"location":"api/reference/#leadrcommondomainexceptionsvalidationerrorfield","title":"# <code>leadr.common.domain.exceptions.ValidationError.field</code>","text":"<pre><code>field = field\n</code></pre>"},{"location":"api/reference/#leadrcommondomainexceptionsvalidationerrormessage","title":"# <code>leadr.common.domain.exceptions.ValidationError.message</code>","text":"<pre><code>message = message\n</code></pre>"},{"location":"api/reference/#leadrcommondomainexceptionsvalidationerrorreason","title":"# <code>leadr.common.domain.exceptions.ValidationError.reason</code>","text":"<pre><code>reason = reason\n</code></pre>"},{"location":"api/reference/#leadrcommondomainmodels","title":"<code>leadr.common.domain.models</code>","text":"<p>Common domain models and value objects.</p> <p>Classes:</p> <ul> <li>Entity \u2013 Base class for all domain entities with ID and timestamps.</li> </ul>"},{"location":"api/reference/#leadrcommondomainmodelsentity","title":"<code>leadr.common.domain.models.Entity</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Base class for all domain entities with ID and timestamps.</p> <p>Provides common functionality for domain entities including:</p> <ul> <li>Auto-generated UUID primary key</li> <li>Created/updated timestamps (UTC)</li> <li>Soft delete support with deleted_at timestamp</li> <li>Equality and hashing based on ID</li> </ul> <p>All domain entities should extend this base class. The ID and timestamps are automatically populated on entity creation and don't need to be provided by consumers.</p> <p>Functions:</p> <ul> <li>restore \u2013 Restore a soft-deleted entity.</li> <li>soft_delete \u2013 Mark entity as soft-deleted.</li> </ul> <p>Attributes:</p> <ul> <li>created_at (<code>datetime</code>) \u2013</li> <li>deleted_at (<code>datetime | None</code>) \u2013</li> <li>id (<code>UUID</code>) \u2013</li> <li>is_deleted (<code>bool</code>) \u2013 Check if entity is soft-deleted.</li> <li>model_config \u2013</li> <li>updated_at (<code>datetime</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrcommondomainmodelsentitycreated_at","title":"# <code>leadr.common.domain.models.Entity.created_at</code>","text":"<pre><code>created_at: datetime = Field(default_factory=(lambda: datetime.now(UTC)), description='Timestamp when entity was created (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrcommondomainmodelsentitydeleted_at","title":"# <code>leadr.common.domain.models.Entity.deleted_at</code>","text":"<pre><code>deleted_at: datetime | None = Field(default=None, description='Timestamp when entity was soft-deleted (UTC), or null if active')\n</code></pre>"},{"location":"api/reference/#leadrcommondomainmodelsentityid","title":"# <code>leadr.common.domain.models.Entity.id</code>","text":"<pre><code>id: UUID = Field(frozen=True, default_factory=uuid4, description='Unique identifier (auto-generated UUID)')\n</code></pre>"},{"location":"api/reference/#leadrcommondomainmodelsentityis_deleted","title":"# <code>leadr.common.domain.models.Entity.is_deleted</code>","text":"<pre><code>is_deleted: bool\n</code></pre> <p>Check if entity is soft-deleted.</p> <p>Returns:</p> <ul> <li><code>bool</code> \u2013 True if the entity has a deleted_at timestamp, False otherwise.</li> </ul>"},{"location":"api/reference/#leadrcommondomainmodelsentitymodel_config","title":"# <code>leadr.common.domain.models.Entity.model_config</code>","text":"<pre><code>model_config = ConfigDict(validate_assignment=True)\n</code></pre>"},{"location":"api/reference/#leadrcommondomainmodelsentityrestore","title":"# <code>leadr.common.domain.models.Entity.restore</code>","text":"<pre><code>restore()\n</code></pre> <p>Restore a soft-deleted entity.</p> <p>Clears the deleted_at timestamp, making the entity active again.</p> Example  &gt; &gt; &gt; account.soft_delete() &gt; &gt; &gt; account.restore() &gt; &gt; &gt; assert account.is_deleted is False"},{"location":"api/reference/#leadrcommondomainmodelsentitysoft_delete","title":"# <code>leadr.common.domain.models.Entity.soft_delete</code>","text":"<pre><code>soft_delete()\n</code></pre> <p>Mark entity as soft-deleted.</p> <p>Sets the deleted_at timestamp to the current UTC time. Entities that are already deleted are not affected (deleted_at remains at original deletion time).</p> Example  &gt; &gt; &gt; account = Account(name=\"Test\", slug=\"test\") &gt; &gt; &gt; account.soft_delete() &gt; &gt; &gt; assert account.is_deleted is True"},{"location":"api/reference/#leadrcommondomainmodelsentityupdated_at","title":"# <code>leadr.common.domain.models.Entity.updated_at</code>","text":"<pre><code>updated_at: datetime = Field(default_factory=(lambda: datetime.now(UTC)), description='Timestamp of last update (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrcommonorm","title":"<code>leadr.common.orm</code>","text":"<p>Common ORM base classes and utilities.</p> <p>Classes:</p> <ul> <li>Base \u2013 Base class for all database models with UUID primary key and timestamps.</li> </ul> <p>Attributes:</p> <ul> <li>nullable_timestamp \u2013</li> <li>timestamp \u2013</li> <li>uuid_pk \u2013</li> </ul>"},{"location":"api/reference/#leadrcommonormbase","title":"<code>leadr.common.orm.Base</code>","text":"<p>Bases: <code>DeclarativeBase</code></p> <p>Base class for all database models with UUID primary key and timestamps.</p> <p>Attributes:</p> <ul> <li>created_at (<code>Mapped[timestamp]</code>) \u2013</li> <li>deleted_at (<code>Mapped[nullable_timestamp]</code>) \u2013</li> <li>id (<code>Mapped[uuid_pk]</code>) \u2013</li> <li>updated_at (<code>Mapped[timestamp]</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrcommonormbasecreated_at","title":"<code>leadr.common.orm.Base.created_at</code>","text":"<pre><code>created_at: Mapped[timestamp]\n</code></pre>"},{"location":"api/reference/#leadrcommonormbasedeleted_at","title":"<code>leadr.common.orm.Base.deleted_at</code>","text":"<pre><code>deleted_at: Mapped[nullable_timestamp]\n</code></pre>"},{"location":"api/reference/#leadrcommonormbaseid","title":"<code>leadr.common.orm.Base.id</code>","text":"<pre><code>id: Mapped[uuid_pk]\n</code></pre>"},{"location":"api/reference/#leadrcommonormbaseupdated_at","title":"<code>leadr.common.orm.Base.updated_at</code>","text":"<pre><code>updated_at: Mapped[timestamp] = mapped_column(onupdate=(func.now()))\n</code></pre>"},{"location":"api/reference/#leadrcommonormnullable_timestamp","title":"<code>leadr.common.orm.nullable_timestamp</code>","text":"<pre><code>nullable_timestamp = Annotated[datetime | None, mapped_column(DateTime(timezone=True), nullable=True, default=None)]\n</code></pre>"},{"location":"api/reference/#leadrcommonormtimestamp","title":"<code>leadr.common.orm.timestamp</code>","text":"<pre><code>timestamp = Annotated[datetime, mapped_column(DateTime(timezone=True), nullable=False, server_default=(func.now()), default=(lambda: datetime.now(UTC)))]\n</code></pre>"},{"location":"api/reference/#leadrcommonormuuid_pk","title":"<code>leadr.common.orm.uuid_pk</code>","text":"<pre><code>uuid_pk = Annotated[UUID, mapped_column(primary_key=True, default=uuid4, server_default=(func.gen_random_uuid()))]\n</code></pre>"},{"location":"api/reference/#leadrcommonrepositories","title":"<code>leadr.common.repositories</code>","text":"<p>Base repository abstraction for common CRUD operations.</p> <p>Classes:</p> <ul> <li>BaseRepository \u2013 Abstract base repository providing common CRUD operations.</li> </ul> <p>Attributes:</p> <ul> <li>DomainEntityT \u2013</li> <li>ORMModelT \u2013</li> </ul>"},{"location":"api/reference/#leadrcommonrepositoriesbaserepository","title":"<code>leadr.common.repositories.BaseRepository</code>","text":"<pre><code>BaseRepository(session)\n</code></pre> <p>Bases: <code>ABC</code>, <code>Generic[DomainEntityT, ORMModelT]</code></p> <p>Abstract base repository providing common CRUD operations.</p> <p>All repositories should extend this class and implement the abstract methods for converting between domain entities and ORM models.</p> <p>All delete operations are soft deletes by default, setting deleted_at timestamp.</p> <p>Functions:</p> <ul> <li>create \u2013 Create a new entity in the database.</li> <li>delete \u2013 Soft delete an entity by setting its deleted_at timestamp.</li> <li>filter \u2013 Filter entities based on criteria.</li> <li>get_by_id \u2013 Get an entity by its ID.</li> <li>update \u2013 Update an existing entity in the database.</li> </ul> <p>Attributes:</p> <ul> <li>session \u2013</li> </ul> <p>Parameters:</p> <ul> <li>session (<code>AsyncSession</code>) \u2013 SQLAlchemy async session</li> </ul>"},{"location":"api/reference/#leadrcommonrepositoriesbaserepositorycreate","title":"<code>leadr.common.repositories.BaseRepository.create</code>","text":"<pre><code>create(entity)\n</code></pre> <p>Create a new entity in the database.</p> <p>Parameters:</p> <ul> <li>entity (<code>DomainEntityT</code>) \u2013 Domain entity to create</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 Created domain entity with refreshed data</li> </ul>"},{"location":"api/reference/#leadrcommonrepositoriesbaserepositorydelete","title":"<code>leadr.common.repositories.BaseRepository.delete</code>","text":"<pre><code>delete(entity_id)\n</code></pre> <p>Soft delete an entity by setting its deleted_at timestamp.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID4</code>) \u2013 ID of entity to delete</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If entity is not found</li> </ul>"},{"location":"api/reference/#leadrcommonrepositoriesbaserepositoryfilter","title":"<code>leadr.common.repositories.BaseRepository.filter</code>","text":"<pre><code>filter(account_id, **kwargs)\n</code></pre> <p>Filter entities based on criteria.</p> <p>For multi-tenant entities, implementations MUST override this to make account_id required (no default). For top-level entities like Account, account_id can remain optional and unused.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID4</code>) \u2013 Optional account ID for filtering. Multi-tenant entities   MUST override to make this required (account_id: UUID).</li> <li>**kwargs (<code>Any</code>) \u2013 Additional filter parameters specific to the entity type.</li> </ul> <p>Returns:</p> <ul> <li><code>list[DomainEntityT]</code> \u2013 List of domain entities matching the filter criteria</li> </ul> <p>Example (multi-tenant - account_id required): async def filter( self, account_id: UUID, # Required, no default status: str | None = None, **kwargs ) -&gt; list[User]: # Implementation with account_id required</p> <p>Example (top-level tenant - account_id optional/unused): async def filter( self, account_id: UUID | None = None, # Optional, unused status: str | None = None, **kwargs ) -&gt; list[Account]: # Implementation where account_id is not used</p>"},{"location":"api/reference/#leadrcommonrepositoriesbaserepositoryget_by_id","title":"<code>leadr.common.repositories.BaseRepository.get_by_id</code>","text":"<pre><code>get_by_id(entity_id, include_deleted=False)\n</code></pre> <p>Get an entity by its ID.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID4</code>) \u2013 Entity ID to retrieve</li> <li>include_deleted (<code>bool</code>) \u2013 If True, include soft-deleted entities. Defaults to False.</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT | None</code> \u2013 Domain entity if found, None otherwise</li> </ul>"},{"location":"api/reference/#leadrcommonrepositoriesbaserepositorysession","title":"<code>leadr.common.repositories.BaseRepository.session</code>","text":"<pre><code>session = session\n</code></pre>"},{"location":"api/reference/#leadrcommonrepositoriesbaserepositoryupdate","title":"<code>leadr.common.repositories.BaseRepository.update</code>","text":"<pre><code>update(entity)\n</code></pre> <p>Update an existing entity in the database.</p> <p>Parameters:</p> <ul> <li>entity (<code>DomainEntityT</code>) \u2013 Domain entity with updated data</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 Updated domain entity with refreshed data</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If entity is not found</li> </ul>"},{"location":"api/reference/#leadrcommonrepositoriesdomainentityt","title":"<code>leadr.common.repositories.DomainEntityT</code>","text":"<pre><code>DomainEntityT = TypeVar('DomainEntityT', bound=Entity)\n</code></pre>"},{"location":"api/reference/#leadrcommonrepositoriesormmodelt","title":"<code>leadr.common.repositories.ORMModelT</code>","text":"<pre><code>ORMModelT = TypeVar('ORMModelT', bound=Base)\n</code></pre>"},{"location":"api/reference/#leadrcommonservices","title":"<code>leadr.common.services</code>","text":"<p>Base service abstraction for common business logic patterns.</p> <p>Classes:</p> <ul> <li>BaseService \u2013 Abstract base service providing common business logic patterns.</li> </ul> <p>Attributes:</p> <ul> <li>DomainEntityT \u2013</li> <li>RepositoryT \u2013</li> </ul>"},{"location":"api/reference/#leadrcommonservicesbaseservice","title":"<code>leadr.common.services.BaseService</code>","text":"<pre><code>BaseService(session)\n</code></pre> <p>Bases: <code>ABC</code>, <code>Generic[DomainEntityT, RepositoryT]</code></p> <p>Abstract base service providing common business logic patterns.</p> <p>All services should extend this class to ensure consistent patterns for:</p> <ul> <li>Repository initialization</li> <li>Standard CRUD operations</li> <li>Error handling with domain exceptions</li> </ul> <p>The service layer sits between API routes and repositories, providing:</p> <ul> <li>Business logic orchestration</li> <li>Domain validation</li> <li>Transaction boundaries</li> <li>Consistent error handling</li> </ul> <p>Functions:</p> <ul> <li>delete \u2013 Soft-delete an entity.</li> <li>get_by_id \u2013 Get an entity by its ID.</li> <li>get_by_id_or_raise \u2013 Get an entity by its ID or raise EntityNotFoundError.</li> <li>list_all \u2013 List all non-deleted entities.</li> <li>soft_delete \u2013 Soft-delete an entity and return it before deletion.</li> </ul> <p>Attributes:</p> <ul> <li>repository \u2013</li> </ul> <p>Parameters:</p> <ul> <li>session (<code>AsyncSession</code>) \u2013 SQLAlchemy async session for database operations</li> </ul>"},{"location":"api/reference/#leadrcommonservicesbaseservicedelete","title":"<code>leadr.common.services.BaseService.delete</code>","text":"<pre><code>delete(entity_id)\n</code></pre> <p>Soft-delete an entity.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to delete</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the entity doesn't exist</li> </ul>"},{"location":"api/reference/#leadrcommonservicesbaseserviceget_by_id","title":"<code>leadr.common.services.BaseService.get_by_id</code>","text":"<pre><code>get_by_id(entity_id)\n</code></pre> <p>Get an entity by its ID.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to retrieve</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT | None</code> \u2013 The domain entity if found, None otherwise</li> </ul>"},{"location":"api/reference/#leadrcommonservicesbaseserviceget_by_id_or_raise","title":"<code>leadr.common.services.BaseService.get_by_id_or_raise</code>","text":"<pre><code>get_by_id_or_raise(entity_id)\n</code></pre> <p>Get an entity by its ID or raise EntityNotFoundError.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to retrieve</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 The domain entity</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the entity is not found   (converted to HTTP 404 by global handler)</li> </ul>"},{"location":"api/reference/#leadrcommonservicesbaseservicelist_all","title":"<code>leadr.common.services.BaseService.list_all</code>","text":"<pre><code>list_all()\n</code></pre> <p>List all non-deleted entities.</p> <p>Returns:</p> <ul> <li><code>list[DomainEntityT]</code> \u2013 List of domain entities</li> </ul>"},{"location":"api/reference/#leadrcommonservicesbaseservicerepository","title":"<code>leadr.common.services.BaseService.repository</code>","text":"<pre><code>repository = self._create_repository(session)\n</code></pre>"},{"location":"api/reference/#leadrcommonservicesbaseservicesoft_delete","title":"<code>leadr.common.services.BaseService.soft_delete</code>","text":"<pre><code>soft_delete(entity_id)\n</code></pre> <p>Soft-delete an entity and return it before deletion.</p> <p>Useful for endpoints that need to return the deleted entity in the response.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to delete</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 The entity before it was deleted</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the entity doesn't exist</li> </ul>"},{"location":"api/reference/#leadrcommonservicesdomainentityt","title":"<code>leadr.common.services.DomainEntityT</code>","text":"<pre><code>DomainEntityT = TypeVar('DomainEntityT', bound=Entity)\n</code></pre>"},{"location":"api/reference/#leadrcommonservicesrepositoryt","title":"<code>leadr.common.services.RepositoryT</code>","text":"<pre><code>RepositoryT = TypeVar('RepositoryT', bound=BaseRepository)\n</code></pre>"},{"location":"api/reference/#leadrconfig","title":"<code>leadr.config</code>","text":"<p>Application configuration management.</p> <p>This module defines the configuration settings for the LEADR application using Pydantic Settings. Configuration values are loaded from environment variables and .env files, with validation and type checking.</p> Environment files  - .env: Production/development configuration (default) - .env.test: Test environment configuration (when ENV=TEST)   Example  Settings are automatically loaded based on the ENV variable:  &gt; &gt; &gt; from leadr.config import settings &gt; &gt; &gt; settings.API_PREFIX &gt; &gt; &gt; '/v1'   <p>Classes:</p> <ul> <li>CommonSettings \u2013 Base configuration settings shared across all environments.</li> <li>Settings \u2013 Production/development environment settings.</li> <li>TestSettings \u2013 Test environment settings.</li> </ul> <p>Attributes:</p> <ul> <li>PROJ_ROOT \u2013</li> <li>settings \u2013</li> </ul>"},{"location":"api/reference/#leadrconfigcommonsettings","title":"<code>leadr.config.CommonSettings</code>","text":"<p>Bases: <code>BaseSettings</code></p> <p>Base configuration settings shared across all environments.</p> <p>This class defines all configuration fields that are common to both production and test environments. Specific environment classes can override defaults or add environment-specific settings.</p> <p>All settings can be configured via environment variables matching the field names (case-sensitive).</p> <p>Functions:</p> <ul> <li>validate_api_enabled \u2013 Ensure at least one API (Admin or Client) is enabled.</li> </ul> <p>Attributes:</p> <ul> <li>API_KEY_SECRET (<code>str</code>) \u2013</li> <li>API_PREFIX (<code>str</code>) \u2013</li> <li>APP (<code>str</code>) \u2013</li> <li>BASE_URL (<code>HttpUrl</code>) \u2013</li> <li>DASHBOARD_URL (<code>HttpUrl</code>) \u2013</li> <li>DB_ECHO (<code>bool</code>) \u2013</li> <li>DB_HOST (<code>str</code>) \u2013</li> <li>DB_NAME (<code>str</code>) \u2013</li> <li>DB_PASSWORD (<code>str</code>) \u2013</li> <li>DB_POOL_MAX_OVERFLOW (<code>int</code>) \u2013</li> <li>DB_POOL_RECYCLE (<code>int</code>) \u2013</li> <li>DB_POOL_SIZE (<code>int</code>) \u2013</li> <li>DB_PORT (<code>int</code>) \u2013</li> <li>DB_USER (<code>str</code>) \u2013</li> <li>DEBUG (<code>bool</code>) \u2013</li> <li>ENABLE_ADMIN_API (<code>bool</code>) \u2013</li> <li>ENABLE_CLIENT_API (<code>bool</code>) \u2013</li> <li>ENV (<code>str</code>) \u2013</li> <li>JWT_LIFETIME_SECONDS (<code>int</code>) \u2013</li> <li>JWT_SECRET (<code>str</code>) \u2013</li> <li>KEYS_PATH (<code>Path</code>) \u2013</li> <li>MAILGUN_API_KEY (<code>str</code>) \u2013</li> <li>MAILGUN_DOMAIN (<code>str</code>) \u2013</li> <li>SOURCE_OAUTH_BASE_URL (<code>HttpUrl</code>) \u2013</li> <li>TESTING_EMAIL (<code>str</code>) \u2013</li> <li>model_config \u2013</li> </ul>"},{"location":"api/reference/#leadrconfigcommonsettingsapi_key_secret","title":"<code>leadr.config.CommonSettings.API_KEY_SECRET</code>","text":"<pre><code>API_KEY_SECRET: str = Field(default='your-super-secret-api-key-pepper-change-in-production', description='Secret pepper for API key hashing. MUST be changed in production.')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsapi_prefix","title":"<code>leadr.config.CommonSettings.API_PREFIX</code>","text":"<pre><code>API_PREFIX: str = Field(default='/v1', description=\"API route prefix for versioning (e.g., '/v1')\")\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsapp","title":"<code>leadr.config.CommonSettings.APP</code>","text":"<pre><code>APP: str = Field(default='LEADR', description='Application name identifier')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsbase_url","title":"<code>leadr.config.CommonSettings.BASE_URL</code>","text":"<pre><code>BASE_URL: HttpUrl = Field(default=(HttpUrl('http://localhost:8000')), description=\"Base URL for the API server (e.g., 'https://api.leadr.gg')\")\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsdashboard_url","title":"<code>leadr.config.CommonSettings.DASHBOARD_URL</code>","text":"<pre><code>DASHBOARD_URL: HttpUrl = Field(default=(HttpUrl('http://localhost:8000')), description=\"URL for the web dashboard (e.g., 'https://dashboard.leadr.gg')\")\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsdb_echo","title":"<code>leadr.config.CommonSettings.DB_ECHO</code>","text":"<pre><code>DB_ECHO: bool = Field(default=False, description='Log all SQL queries to stdout (useful for debugging)')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsdb_host","title":"<code>leadr.config.CommonSettings.DB_HOST</code>","text":"<pre><code>DB_HOST: str = Field(default='localhost', description='PostgreSQL database host')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsdb_name","title":"<code>leadr.config.CommonSettings.DB_NAME</code>","text":"<pre><code>DB_NAME: str = Field(default='leadr', description='PostgreSQL database name')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsdb_password","title":"<code>leadr.config.CommonSettings.DB_PASSWORD</code>","text":"<pre><code>DB_PASSWORD: str = Field(default='leadr', description='PostgreSQL database password')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsdb_pool_max_overflow","title":"<code>leadr.config.CommonSettings.DB_POOL_MAX_OVERFLOW</code>","text":"<pre><code>DB_POOL_MAX_OVERFLOW: int = Field(default=10, description='Maximum overflow connections beyond pool size')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsdb_pool_recycle","title":"<code>leadr.config.CommonSettings.DB_POOL_RECYCLE</code>","text":"<pre><code>DB_POOL_RECYCLE: int = Field(default=3600, description='Recycle database connections after this many seconds (default: 1 hour)')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsdb_pool_size","title":"<code>leadr.config.CommonSettings.DB_POOL_SIZE</code>","text":"<pre><code>DB_POOL_SIZE: int = Field(default=20, description='Number of database connections to maintain in the pool')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsdb_port","title":"<code>leadr.config.CommonSettings.DB_PORT</code>","text":"<pre><code>DB_PORT: int = Field(default=5432, description='PostgreSQL database port')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsdb_user","title":"<code>leadr.config.CommonSettings.DB_USER</code>","text":"<pre><code>DB_USER: str = Field(default='leadr', description='PostgreSQL database user')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsdebug","title":"<code>leadr.config.CommonSettings.DEBUG</code>","text":"<pre><code>DEBUG: bool = Field(default=False, description='Enable debug mode with verbose logging and error details')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsenable_admin_api","title":"<code>leadr.config.CommonSettings.ENABLE_ADMIN_API</code>","text":"<pre><code>ENABLE_ADMIN_API: bool = Field(default=False, description='Enable admin API endpoints')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsenable_client_api","title":"<code>leadr.config.CommonSettings.ENABLE_CLIENT_API</code>","text":"<pre><code>ENABLE_CLIENT_API: bool = Field(default=False, description='Enable client API endpoints')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsenv","title":"<code>leadr.config.CommonSettings.ENV</code>","text":"<pre><code>ENV: str = Field(default=..., description=\"Environment name (e.g., 'DEV', 'PROD', 'TEST'). Required.\")\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsjwt_lifetime_seconds","title":"<code>leadr.config.CommonSettings.JWT_LIFETIME_SECONDS</code>","text":"<pre><code>JWT_LIFETIME_SECONDS: int = Field(default=3600, description='JWT token lifetime in seconds (default: 1 hour)')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsjwt_secret","title":"<code>leadr.config.CommonSettings.JWT_SECRET</code>","text":"<pre><code>JWT_SECRET: str = Field(default='your-super-secret-jwt-key-change-in-production', description='Secret key for JWT token signing. MUST be changed in production.')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingskeys_path","title":"<code>leadr.config.CommonSettings.KEYS_PATH</code>","text":"<pre><code>KEYS_PATH: Path = Field(default=(PROJ_ROOT / '.keys'), description='Directory path for storing cryptographic keys')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsmailgun_api_key","title":"<code>leadr.config.CommonSettings.MAILGUN_API_KEY</code>","text":"<pre><code>MAILGUN_API_KEY: str = Field(default='mailgun_api_key', description='Mailgun API key for email sending')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsmailgun_domain","title":"<code>leadr.config.CommonSettings.MAILGUN_DOMAIN</code>","text":"<pre><code>MAILGUN_DOMAIN: str = Field(default='example.mailgun.org', description='Mailgun domain for email sending')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingssource_oauth_base_url","title":"<code>leadr.config.CommonSettings.SOURCE_OAUTH_BASE_URL</code>","text":"<pre><code>SOURCE_OAUTH_BASE_URL: HttpUrl = Field(default=(HttpUrl('http://localhost:8000')), description='Base URL for OAuth provider')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingstesting_email","title":"<code>leadr.config.CommonSettings.TESTING_EMAIL</code>","text":"<pre><code>TESTING_EMAIL: str = Field(default='hello@example.com', description='Email address used for testing purposes')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsmodel_config","title":"<code>leadr.config.CommonSettings.model_config</code>","text":"<pre><code>model_config = SettingsConfigDict(case_sensitive=True, extra='ignore')\n</code></pre>"},{"location":"api/reference/#leadrconfigcommonsettingsvalidate_api_enabled","title":"<code>leadr.config.CommonSettings.validate_api_enabled</code>","text":"<pre><code>validate_api_enabled()\n</code></pre> <p>Ensure at least one API (Admin or Client) is enabled.</p>"},{"location":"api/reference/#leadrconfigproj_root","title":"<code>leadr.config.PROJ_ROOT</code>","text":"<pre><code>PROJ_ROOT = Path(__file__).resolve().parent.parent.parent\n</code></pre>"},{"location":"api/reference/#leadrconfigsettings","title":"<code>leadr.config.Settings</code>","text":"<p>Bases: <code>CommonSettings</code></p> <p>Production/development environment settings.</p> <p>Inherits all settings from CommonSettings. Loads configuration from the .env file at the project root.</p> <p>This is the default settings class used when ENV != 'TEST'.</p> <p>Functions:</p> <ul> <li>validate_api_enabled \u2013 Ensure at least one API (Admin or Client) is enabled.</li> </ul> <p>Attributes:</p> <ul> <li>API_KEY_SECRET (<code>str</code>) \u2013</li> <li>API_PREFIX (<code>str</code>) \u2013</li> <li>APP (<code>str</code>) \u2013</li> <li>BASE_URL (<code>HttpUrl</code>) \u2013</li> <li>DASHBOARD_URL (<code>HttpUrl</code>) \u2013</li> <li>DB_ECHO (<code>bool</code>) \u2013</li> <li>DB_HOST (<code>str</code>) \u2013</li> <li>DB_NAME (<code>str</code>) \u2013</li> <li>DB_PASSWORD (<code>str</code>) \u2013</li> <li>DB_POOL_MAX_OVERFLOW (<code>int</code>) \u2013</li> <li>DB_POOL_RECYCLE (<code>int</code>) \u2013</li> <li>DB_POOL_SIZE (<code>int</code>) \u2013</li> <li>DB_PORT (<code>int</code>) \u2013</li> <li>DB_USER (<code>str</code>) \u2013</li> <li>DEBUG (<code>bool</code>) \u2013</li> <li>ENABLE_ADMIN_API (<code>bool</code>) \u2013</li> <li>ENABLE_CLIENT_API (<code>bool</code>) \u2013</li> <li>ENV (<code>str</code>) \u2013</li> <li>JWT_LIFETIME_SECONDS (<code>int</code>) \u2013</li> <li>JWT_SECRET (<code>str</code>) \u2013</li> <li>KEYS_PATH (<code>Path</code>) \u2013</li> <li>MAILGUN_API_KEY (<code>str</code>) \u2013</li> <li>MAILGUN_DOMAIN (<code>str</code>) \u2013</li> <li>SOURCE_OAUTH_BASE_URL (<code>HttpUrl</code>) \u2013</li> <li>TESTING_EMAIL (<code>str</code>) \u2013</li> <li>model_config \u2013</li> </ul>"},{"location":"api/reference/#leadrconfigtestsettings","title":"<code>leadr.config.TestSettings</code>","text":"<p>Bases: <code>CommonSettings</code></p> <p>Test environment settings.</p> <p>Inherits all settings from CommonSettings. Loads configuration from the .env.test file at the project root.</p> <p>Used automatically when ENV='TEST' (set by test.sh script). Test-specific overrides can be added here.</p> <p>Functions:</p> <ul> <li>validate_api_enabled \u2013 Ensure at least one API (Admin or Client) is enabled.</li> </ul> <p>Attributes:</p> <ul> <li>API_KEY_SECRET (<code>str</code>) \u2013</li> <li>API_PREFIX (<code>str</code>) \u2013</li> <li>APP (<code>str</code>) \u2013</li> <li>BASE_URL (<code>HttpUrl</code>) \u2013</li> <li>DASHBOARD_URL (<code>HttpUrl</code>) \u2013</li> <li>DB_ECHO (<code>bool</code>) \u2013</li> <li>DB_HOST (<code>str</code>) \u2013</li> <li>DB_NAME (<code>str</code>) \u2013</li> <li>DB_PASSWORD (<code>str</code>) \u2013</li> <li>DB_POOL_MAX_OVERFLOW (<code>int</code>) \u2013</li> <li>DB_POOL_RECYCLE (<code>int</code>) \u2013</li> <li>DB_POOL_SIZE (<code>int</code>) \u2013</li> <li>DB_PORT (<code>int</code>) \u2013</li> <li>DB_USER (<code>str</code>) \u2013</li> <li>DEBUG (<code>bool</code>) \u2013</li> <li>ENABLE_ADMIN_API (<code>bool</code>) \u2013</li> <li>ENABLE_CLIENT_API (<code>bool</code>) \u2013</li> <li>ENV (<code>str</code>) \u2013</li> <li>JWT_LIFETIME_SECONDS (<code>int</code>) \u2013</li> <li>JWT_SECRET (<code>str</code>) \u2013</li> <li>KEYS_PATH (<code>Path</code>) \u2013</li> <li>MAILGUN_API_KEY (<code>str</code>) \u2013</li> <li>MAILGUN_DOMAIN (<code>str</code>) \u2013</li> <li>SOURCE_OAUTH_BASE_URL (<code>HttpUrl</code>) \u2013</li> <li>TESTING_EMAIL (<code>str</code>) \u2013</li> <li>model_config \u2013</li> </ul>"},{"location":"api/reference/#leadrconfigsettings_1","title":"<code>leadr.config.settings</code>","text":"<pre><code>settings = TestSettings(_env_file=(Path(PROJ_ROOT, '.env.test'))) if os.environ.get('ENV') == 'TEST' else Settings(_env_file=(Path(PROJ_ROOT, '.env')))\n</code></pre>"},{"location":"api/reference/#leadrgames","title":"<code>leadr.games</code>","text":"<p>Modules:</p> <ul> <li>adapters \u2013</li> <li>api \u2013</li> <li>domain \u2013</li> <li>services \u2013</li> </ul>"},{"location":"api/reference/#leadrgamesadapters","title":"<code>leadr.games.adapters</code>","text":"<p>Modules:</p> <ul> <li>orm \u2013 Game ORM model.</li> </ul>"},{"location":"api/reference/#leadrgamesadaptersorm","title":"<code>leadr.games.adapters.orm</code>","text":"<p>Game ORM model.</p> <p>Classes:</p> <ul> <li>GameORM \u2013 Game ORM model.</li> </ul>"},{"location":"api/reference/#leadrgamesadaptersormgameorm","title":"<code>leadr.games.adapters.orm.GameORM</code>","text":"<p>Bases: <code>Base</code></p> <p>Game ORM model.</p> <p>Represents a game that belongs to an account in the database. Maps to the games table with foreign key to accounts and unique constraint on (account_id, name) to prevent duplicate game names within the same account.</p> <p>Attributes:</p> <ul> <li>account (<code>Mapped[AccountORM]</code>) \u2013</li> <li>account_id (<code>Mapped[UUID]</code>) \u2013</li> <li>created_at (<code>Mapped[timestamp]</code>) \u2013</li> <li>default_board_id (<code>Mapped[UUID | None]</code>) \u2013</li> <li>deleted_at (<code>Mapped[nullable_timestamp]</code>) \u2013</li> <li>id (<code>Mapped[uuid_pk]</code>) \u2013</li> <li>name (<code>Mapped[str]</code>) \u2013</li> <li>steam_app_id (<code>Mapped[str | None]</code>) \u2013</li> <li>updated_at (<code>Mapped[timestamp]</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrgamesadaptersormgameormaccount","title":"# <code>leadr.games.adapters.orm.GameORM.account</code>","text":"<pre><code>account: Mapped[AccountORM] = relationship('AccountORM')\n</code></pre>"},{"location":"api/reference/#leadrgamesadaptersormgameormaccount_id","title":"# <code>leadr.games.adapters.orm.GameORM.account_id</code>","text":"<pre><code>account_id: Mapped[UUID] = mapped_column(ForeignKey('accounts.id', ondelete='CASCADE'), nullable=False, index=True)\n</code></pre>"},{"location":"api/reference/#leadrgamesadaptersormgameormcreated_at","title":"# <code>leadr.games.adapters.orm.GameORM.created_at</code>","text":"<pre><code>created_at: Mapped[timestamp]\n</code></pre>"},{"location":"api/reference/#leadrgamesadaptersormgameormdefault_board_id","title":"# <code>leadr.games.adapters.orm.GameORM.default_board_id</code>","text":"<pre><code>default_board_id: Mapped[UUID | None] = mapped_column(nullable=True, default=None)\n</code></pre>"},{"location":"api/reference/#leadrgamesadaptersormgameormdeleted_at","title":"# <code>leadr.games.adapters.orm.GameORM.deleted_at</code>","text":"<pre><code>deleted_at: Mapped[nullable_timestamp]\n</code></pre>"},{"location":"api/reference/#leadrgamesadaptersormgameormid","title":"# <code>leadr.games.adapters.orm.GameORM.id</code>","text":"<pre><code>id: Mapped[uuid_pk]\n</code></pre>"},{"location":"api/reference/#leadrgamesadaptersormgameormname","title":"# <code>leadr.games.adapters.orm.GameORM.name</code>","text":"<pre><code>name: Mapped[str] = mapped_column(String, nullable=False)\n</code></pre>"},{"location":"api/reference/#leadrgamesadaptersormgameormsteam_app_id","title":"# <code>leadr.games.adapters.orm.GameORM.steam_app_id</code>","text":"<pre><code>steam_app_id: Mapped[str | None] = mapped_column(String, nullable=True, default=None)\n</code></pre>"},{"location":"api/reference/#leadrgamesadaptersormgameormupdated_at","title":"# <code>leadr.games.adapters.orm.GameORM.updated_at</code>","text":"<pre><code>updated_at: Mapped[timestamp] = mapped_column(onupdate=(func.now()))\n</code></pre>"},{"location":"api/reference/#leadrgamesapi","title":"<code>leadr.games.api</code>","text":"<p>Modules:</p> <ul> <li>routes \u2013 Game API routes.</li> <li>schemas \u2013 API request and response models for games.</li> </ul>"},{"location":"api/reference/#leadrgamesapiroutes","title":"<code>leadr.games.api.routes</code>","text":"<p>Game API routes.</p> <p>Functions:</p> <ul> <li>create_game \u2013 Create a new game.</li> <li>get_game \u2013 Get a game by ID.</li> <li>list_games \u2013 List all games for an account.</li> <li>update_game \u2013 Update a game.</li> </ul> <p>Attributes:</p> <ul> <li>router \u2013</li> </ul>"},{"location":"api/reference/#leadrgamesapiroutescreate_game","title":"<code>leadr.games.api.routes.create_game</code>","text":"<pre><code>create_game(request, service)\n</code></pre> <p>Create a new game.</p> <p>Creates a new game associated with an existing account. Games can optionally be configured with Steam integration and a default leaderboard.</p> <p>Parameters:</p> <ul> <li>request (<code>GameCreateRequest</code>) \u2013 Game creation details including account_id, name, and optional settings.</li> <li>service (<code>GameServiceDep</code>) \u2013 Injected game service dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>GameResponse</code> \u2013 GameResponse with the created game including auto-generated ID and timestamps.</li> </ul> <p>Raises:</p> <ul> <li><code>404</code> \u2013 Account not found.</li> </ul>"},{"location":"api/reference/#leadrgamesapiroutesget_game","title":"<code>leadr.games.api.routes.get_game</code>","text":"<pre><code>get_game(game_id, service)\n</code></pre> <p>Get a game by ID.</p> <p>Parameters:</p> <ul> <li>game_id (<code>UUID</code>) \u2013 Unique identifier for the game.</li> <li>service (<code>GameServiceDep</code>) \u2013 Injected game service dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>GameResponse</code> \u2013 GameResponse with full game details.</li> </ul> <p>Raises:</p> <ul> <li><code>404</code> \u2013 Game not found.</li> </ul>"},{"location":"api/reference/#leadrgamesapirouteslist_games","title":"<code>leadr.games.api.routes.list_games</code>","text":"<pre><code>list_games(account_id, service)\n</code></pre> <p>List all games for an account.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID</code>) \u2013 Account ID to filter games by.</li> <li>service (<code>GameServiceDep</code>) \u2013 Injected game service dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>list[GameResponse]</code> \u2013 List of all active games for the specified account.</li> </ul>"},{"location":"api/reference/#leadrgamesapiroutesrouter","title":"<code>leadr.games.api.routes.router</code>","text":"<pre><code>router = APIRouter()\n</code></pre>"},{"location":"api/reference/#leadrgamesapiroutesupdate_game","title":"<code>leadr.games.api.routes.update_game</code>","text":"<pre><code>update_game(game_id, request, service)\n</code></pre> <p>Update a game.</p> <p>Supports updating name, Steam App ID, default board ID, or soft-deleting the game.</p> <p>Parameters:</p> <ul> <li>game_id (<code>UUID</code>) \u2013 Unique identifier for the game.</li> <li>request (<code>GameUpdateRequest</code>) \u2013 Game update details (all fields optional).</li> <li>service (<code>GameServiceDep</code>) \u2013 Injected game service dependency.</li> </ul> <p>Returns:</p> <ul> <li><code>GameResponse</code> \u2013 GameResponse with the updated game details.</li> </ul> <p>Raises:</p> <ul> <li><code>404</code> \u2013 Game not found.</li> </ul>"},{"location":"api/reference/#leadrgamesapischemas","title":"<code>leadr.games.api.schemas</code>","text":"<p>API request and response models for games.</p> <p>Classes:</p> <ul> <li>GameCreateRequest \u2013 Request model for creating a game.</li> <li>GameResponse \u2013 Response model for a game.</li> <li>GameUpdateRequest \u2013 Request model for updating a game.</li> </ul>"},{"location":"api/reference/#leadrgamesapischemasgamecreaterequest","title":"<code>leadr.games.api.schemas.GameCreateRequest</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Request model for creating a game.</p> <p>Attributes:</p> <ul> <li>account_id (<code>UUID</code>) \u2013</li> <li>default_board_id (<code>UUID | None</code>) \u2013</li> <li>name (<code>str</code>) \u2013</li> <li>steam_app_id (<code>str | None</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrgamesapischemasgamecreaterequestaccount_id","title":"# <code>leadr.games.api.schemas.GameCreateRequest.account_id</code>","text":"<pre><code>account_id: UUID = Field(description='ID of the account this game belongs to')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgamecreaterequestdefault_board_id","title":"# <code>leadr.games.api.schemas.GameCreateRequest.default_board_id</code>","text":"<pre><code>default_board_id: UUID | None = Field(default=None, description='Optional ID of the default leaderboard for this game')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgamecreaterequestname","title":"# <code>leadr.games.api.schemas.GameCreateRequest.name</code>","text":"<pre><code>name: str = Field(description='Name of the game')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgamecreaterequeststeam_app_id","title":"# <code>leadr.games.api.schemas.GameCreateRequest.steam_app_id</code>","text":"<pre><code>steam_app_id: str | None = Field(default=None, description='Optional Steam App ID for Steam integration')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgameresponse","title":"<code>leadr.games.api.schemas.GameResponse</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Response model for a game.</p> <p>Functions:</p> <ul> <li>from_domain \u2013 Convert domain entity to response model.</li> </ul> <p>Attributes:</p> <ul> <li>account_id (<code>UUID</code>) \u2013</li> <li>created_at (<code>datetime</code>) \u2013</li> <li>default_board_id (<code>UUID | None</code>) \u2013</li> <li>id (<code>UUID</code>) \u2013</li> <li>name (<code>str</code>) \u2013</li> <li>steam_app_id (<code>str | None</code>) \u2013</li> <li>updated_at (<code>datetime</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrgamesapischemasgameresponseaccount_id","title":"# <code>leadr.games.api.schemas.GameResponse.account_id</code>","text":"<pre><code>account_id: UUID = Field(description='ID of the account this game belongs to')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgameresponsecreated_at","title":"# <code>leadr.games.api.schemas.GameResponse.created_at</code>","text":"<pre><code>created_at: datetime = Field(description='Timestamp when the game was created (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgameresponsedefault_board_id","title":"# <code>leadr.games.api.schemas.GameResponse.default_board_id</code>","text":"<pre><code>default_board_id: UUID | None = Field(default=None, description='ID of the default leaderboard, or null if not set')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgameresponsefrom_domain","title":"# <code>leadr.games.api.schemas.GameResponse.from_domain</code>","text":"<pre><code>from_domain(game)\n</code></pre> <p>Convert domain entity to response model.</p> <p>Parameters:</p> <ul> <li>game (<code>Game</code>) \u2013 The domain Game entity to convert.</li> </ul> <p>Returns:</p> <ul> <li><code>GameResponse</code> \u2013 GameResponse with all fields populated from the domain entity.</li> </ul>"},{"location":"api/reference/#leadrgamesapischemasgameresponseid","title":"# <code>leadr.games.api.schemas.GameResponse.id</code>","text":"<pre><code>id: UUID = Field(description='Unique identifier for the game')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgameresponsename","title":"# <code>leadr.games.api.schemas.GameResponse.name</code>","text":"<pre><code>name: str = Field(description='Name of the game')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgameresponsesteam_app_id","title":"# <code>leadr.games.api.schemas.GameResponse.steam_app_id</code>","text":"<pre><code>steam_app_id: str | None = Field(default=None, description='Steam App ID if Steam integration is configured')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgameresponseupdated_at","title":"# <code>leadr.games.api.schemas.GameResponse.updated_at</code>","text":"<pre><code>updated_at: datetime = Field(description='Timestamp of last update (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgameupdaterequest","title":"<code>leadr.games.api.schemas.GameUpdateRequest</code>","text":"<p>Bases: <code>BaseModel</code></p> <p>Request model for updating a game.</p> <p>Attributes:</p> <ul> <li>default_board_id (<code>UUID | None</code>) \u2013</li> <li>deleted (<code>bool | None</code>) \u2013</li> <li>name (<code>str | None</code>) \u2013</li> <li>steam_app_id (<code>str | None</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrgamesapischemasgameupdaterequestdefault_board_id","title":"# <code>leadr.games.api.schemas.GameUpdateRequest.default_board_id</code>","text":"<pre><code>default_board_id: UUID | None = Field(default=None, description='Updated default leaderboard ID')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgameupdaterequestdeleted","title":"# <code>leadr.games.api.schemas.GameUpdateRequest.deleted</code>","text":"<pre><code>deleted: bool | None = Field(default=None, description='Set to true to soft delete the game')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgameupdaterequestname","title":"# <code>leadr.games.api.schemas.GameUpdateRequest.name</code>","text":"<pre><code>name: str | None = Field(default=None, description='Updated game name')\n</code></pre>"},{"location":"api/reference/#leadrgamesapischemasgameupdaterequeststeam_app_id","title":"# <code>leadr.games.api.schemas.GameUpdateRequest.steam_app_id</code>","text":"<pre><code>steam_app_id: str | None = Field(default=None, description='Updated Steam App ID')\n</code></pre>"},{"location":"api/reference/#leadrgamesdomain","title":"<code>leadr.games.domain</code>","text":"<p>Modules:</p> <ul> <li>game \u2013 Game domain model.</li> </ul>"},{"location":"api/reference/#leadrgamesdomaingame","title":"<code>leadr.games.domain.game</code>","text":"<p>Game domain model.</p> <p>Classes:</p> <ul> <li>Game \u2013 Game domain entity.</li> </ul>"},{"location":"api/reference/#leadrgamesdomaingamegame","title":"<code>leadr.games.domain.game.Game</code>","text":"<p>Bases: <code>Entity</code></p> <p>Game domain entity.</p> <p>Represents a game that belongs to an account. Games can have optional Steam integration via steam_app_id and can reference a default leaderboard.</p> <p>Each game belongs to exactly one account and cannot be transferred. Games can be configured with Steam integration for syncing achievements or other Steam platform features.</p> <p>Functions:</p> <ul> <li>restore \u2013 Restore a soft-deleted entity.</li> <li>soft_delete \u2013 Mark entity as soft-deleted.</li> <li>validate_name \u2013 Validate game name is not empty.</li> </ul> <p>Attributes:</p> <ul> <li>account_id (<code>UUID</code>) \u2013</li> <li>created_at (<code>datetime</code>) \u2013</li> <li>default_board_id (<code>UUID | None</code>) \u2013</li> <li>deleted_at (<code>datetime | None</code>) \u2013</li> <li>id (<code>UUID</code>) \u2013</li> <li>is_deleted (<code>bool</code>) \u2013 Check if entity is soft-deleted.</li> <li>model_config \u2013</li> <li>name (<code>str</code>) \u2013</li> <li>steam_app_id (<code>str | None</code>) \u2013</li> <li>updated_at (<code>datetime</code>) \u2013</li> </ul>"},{"location":"api/reference/#leadrgamesdomaingamegameaccount_id","title":"# <code>leadr.games.domain.game.Game.account_id</code>","text":"<pre><code>account_id: UUID = Field(frozen=True, description='ID of the account this game belongs to (immutable)')\n</code></pre>"},{"location":"api/reference/#leadrgamesdomaingamegamecreated_at","title":"# <code>leadr.games.domain.game.Game.created_at</code>","text":"<pre><code>created_at: datetime = Field(default_factory=(lambda: datetime.now(UTC)), description='Timestamp when entity was created (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrgamesdomaingamegamedefault_board_id","title":"# <code>leadr.games.domain.game.Game.default_board_id</code>","text":"<pre><code>default_board_id: UUID | None = Field(default=None, description='Optional default leaderboard ID for this game')\n</code></pre>"},{"location":"api/reference/#leadrgamesdomaingamegamedeleted_at","title":"# <code>leadr.games.domain.game.Game.deleted_at</code>","text":"<pre><code>deleted_at: datetime | None = Field(default=None, description='Timestamp when entity was soft-deleted (UTC), or null if active')\n</code></pre>"},{"location":"api/reference/#leadrgamesdomaingamegameid","title":"# <code>leadr.games.domain.game.Game.id</code>","text":"<pre><code>id: UUID = Field(frozen=True, default_factory=uuid4, description='Unique identifier (auto-generated UUID)')\n</code></pre>"},{"location":"api/reference/#leadrgamesdomaingamegameis_deleted","title":"# <code>leadr.games.domain.game.Game.is_deleted</code>","text":"<pre><code>is_deleted: bool\n</code></pre> <p>Check if entity is soft-deleted.</p> <p>Returns:</p> <ul> <li><code>bool</code> \u2013 True if the entity has a deleted_at timestamp, False otherwise.</li> </ul>"},{"location":"api/reference/#leadrgamesdomaingamegamemodel_config","title":"# <code>leadr.games.domain.game.Game.model_config</code>","text":"<pre><code>model_config = ConfigDict(validate_assignment=True)\n</code></pre>"},{"location":"api/reference/#leadrgamesdomaingamegamename","title":"# <code>leadr.games.domain.game.Game.name</code>","text":"<pre><code>name: str = Field(description='Name of the game')\n</code></pre>"},{"location":"api/reference/#leadrgamesdomaingamegamerestore","title":"# <code>leadr.games.domain.game.Game.restore</code>","text":"<pre><code>restore()\n</code></pre> <p>Restore a soft-deleted entity.</p> <p>Clears the deleted_at timestamp, making the entity active again.</p> Example  &gt; &gt; &gt; account.soft_delete() &gt; &gt; &gt; account.restore() &gt; &gt; &gt; assert account.is_deleted is False"},{"location":"api/reference/#leadrgamesdomaingamegamesoft_delete","title":"# <code>leadr.games.domain.game.Game.soft_delete</code>","text":"<pre><code>soft_delete()\n</code></pre> <p>Mark entity as soft-deleted.</p> <p>Sets the deleted_at timestamp to the current UTC time. Entities that are already deleted are not affected (deleted_at remains at original deletion time).</p> Example  &gt; &gt; &gt; account = Account(name=\"Test\", slug=\"test\") &gt; &gt; &gt; account.soft_delete() &gt; &gt; &gt; assert account.is_deleted is True"},{"location":"api/reference/#leadrgamesdomaingamegamesteam_app_id","title":"# <code>leadr.games.domain.game.Game.steam_app_id</code>","text":"<pre><code>steam_app_id: str | None = Field(default=None, description='Optional Steam App ID for platform integration')\n</code></pre>"},{"location":"api/reference/#leadrgamesdomaingamegameupdated_at","title":"# <code>leadr.games.domain.game.Game.updated_at</code>","text":"<pre><code>updated_at: datetime = Field(default_factory=(lambda: datetime.now(UTC)), description='Timestamp of last update (UTC)')\n</code></pre>"},{"location":"api/reference/#leadrgamesdomaingamegamevalidate_name","title":"# <code>leadr.games.domain.game.Game.validate_name</code>","text":"<pre><code>validate_name(value)\n</code></pre> <p>Validate game name is not empty.</p> <p>Parameters:</p> <ul> <li>value (<code>str</code>) \u2013 The game name to validate.</li> </ul> <p>Returns:</p> <ul> <li><code>str</code> \u2013 The validated and trimmed game name.</li> </ul> <p>Raises:</p> <ul> <li><code>ValueError</code> \u2013 If game name is empty or whitespace only.</li> </ul>"},{"location":"api/reference/#leadrgamesservices","title":"<code>leadr.games.services</code>","text":"<p>Modules:</p> <ul> <li>dependencies \u2013 Game service dependencies for FastAPI dependency injection.</li> <li>game_service \u2013 Game service for managing game operations.</li> <li>repositories \u2013 Game repository services.</li> </ul>"},{"location":"api/reference/#leadrgamesservicesdependencies","title":"<code>leadr.games.services.dependencies</code>","text":"<p>Game service dependencies for FastAPI dependency injection.</p> <p>Functions:</p> <ul> <li>get_game_service \u2013 Get GameService dependency.</li> </ul> <p>Attributes:</p> <ul> <li>GameServiceDep \u2013</li> </ul>"},{"location":"api/reference/#leadrgamesservicesdependenciesgameservicedep","title":"<code>leadr.games.services.dependencies.GameServiceDep</code>","text":"<pre><code>GameServiceDep = Annotated[GameService, Depends(get_game_service)]\n</code></pre>"},{"location":"api/reference/#leadrgamesservicesdependenciesget_game_service","title":"<code>leadr.games.services.dependencies.get_game_service</code>","text":"<pre><code>get_game_service(db)\n</code></pre> <p>Get GameService dependency.</p>"},{"location":"api/reference/#leadrgamesservicesgame_service","title":"<code>leadr.games.services.game_service</code>","text":"<p>Game service for managing game operations.</p> <p>Classes:</p> <ul> <li>GameService \u2013 Service for managing game lifecycle and operations.</li> </ul>"},{"location":"api/reference/#leadrgamesservicesgame_servicegameservice","title":"<code>leadr.games.services.game_service.GameService</code>","text":"<p>Bases: <code>BaseService[Game, GameRepository]</code></p> <p>Service for managing game lifecycle and operations.</p> <p>This service orchestrates game creation, updates, and retrieval by coordinating between the domain models and repository layer.</p> <p>Functions:</p> <ul> <li>create_game \u2013 Create a new game.</li> <li>delete \u2013 Soft-delete an entity.</li> <li>get_by_id \u2013 Get an entity by its ID.</li> <li>get_by_id_or_raise \u2013 Get an entity by its ID or raise EntityNotFoundError.</li> <li>get_game \u2013 Get a game by its ID.</li> <li>list_all \u2013 List all non-deleted entities.</li> <li>list_games \u2013 List all games for an account.</li> <li>soft_delete \u2013 Soft-delete an entity and return it before deletion.</li> <li>update_game \u2013 Update game fields.</li> </ul> <p>Attributes:</p> <ul> <li>repository \u2013</li> </ul>"},{"location":"api/reference/#leadrgamesservicesgame_servicegameservicecreate_game","title":"# <code>leadr.games.services.game_service.GameService.create_game</code>","text":"<pre><code>create_game(account_id, name, steam_app_id=None, default_board_id=None)\n</code></pre> <p>Create a new game.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID</code>) \u2013 The ID of the account that owns this game.</li> <li>name (<code>str</code>) \u2013 The game name.</li> <li>steam_app_id (<code>str | None</code>) \u2013 Optional Steam application ID.</li> <li>default_board_id (<code>UUID | None</code>) \u2013 Optional default leaderboard ID.</li> </ul> <p>Returns:</p> <ul> <li><code>Game</code> \u2013 The created Game domain entity.</li> </ul> Example  &gt; &gt; &gt; game = await service.create_game( &gt; &gt; &gt; ... account_id=account.id, &gt; &gt; &gt; ... name=\"Super Awesome Game\", &gt; &gt; &gt; ... steam_app_id=\"123456\", &gt; &gt; &gt; ... )"},{"location":"api/reference/#leadrgamesservicesgame_servicegameservicedelete","title":"# <code>leadr.games.services.game_service.GameService.delete</code>","text":"<pre><code>delete(entity_id)\n</code></pre> <p>Soft-delete an entity.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to delete</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the entity doesn't exist</li> </ul>"},{"location":"api/reference/#leadrgamesservicesgame_servicegameserviceget_by_id","title":"# <code>leadr.games.services.game_service.GameService.get_by_id</code>","text":"<pre><code>get_by_id(entity_id)\n</code></pre> <p>Get an entity by its ID.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to retrieve</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT | None</code> \u2013 The domain entity if found, None otherwise</li> </ul>"},{"location":"api/reference/#leadrgamesservicesgame_servicegameserviceget_by_id_or_raise","title":"# <code>leadr.games.services.game_service.GameService.get_by_id_or_raise</code>","text":"<pre><code>get_by_id_or_raise(entity_id)\n</code></pre> <p>Get an entity by its ID or raise EntityNotFoundError.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to retrieve</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 The domain entity</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the entity is not found   (converted to HTTP 404 by global handler)</li> </ul>"},{"location":"api/reference/#leadrgamesservicesgame_servicegameserviceget_game","title":"# <code>leadr.games.services.game_service.GameService.get_game</code>","text":"<pre><code>get_game(game_id)\n</code></pre> <p>Get a game by its ID.</p> <p>Parameters:</p> <ul> <li>game_id (<code>UUID</code>) \u2013 The ID of the game to retrieve.</li> </ul> <p>Returns:</p> <ul> <li><code>Game | None</code> \u2013 The Game domain entity if found, None otherwise.</li> </ul>"},{"location":"api/reference/#leadrgamesservicesgame_servicegameservicelist_all","title":"# <code>leadr.games.services.game_service.GameService.list_all</code>","text":"<pre><code>list_all()\n</code></pre> <p>List all non-deleted entities.</p> <p>Returns:</p> <ul> <li><code>list[DomainEntityT]</code> \u2013 List of domain entities</li> </ul>"},{"location":"api/reference/#leadrgamesservicesgame_servicegameservicelist_games","title":"# <code>leadr.games.services.game_service.GameService.list_games</code>","text":"<pre><code>list_games(account_id)\n</code></pre> <p>List all games for an account.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID</code>) \u2013 The ID of the account to list games for.</li> </ul> <p>Returns:</p> <ul> <li><code>list[Game]</code> \u2013 List of Game domain entities for the account.</li> </ul>"},{"location":"api/reference/#leadrgamesservicesgame_servicegameservicerepository","title":"# <code>leadr.games.services.game_service.GameService.repository</code>","text":"<pre><code>repository = self._create_repository(session)\n</code></pre>"},{"location":"api/reference/#leadrgamesservicesgame_servicegameservicesoft_delete","title":"# <code>leadr.games.services.game_service.GameService.soft_delete</code>","text":"<pre><code>soft_delete(entity_id)\n</code></pre> <p>Soft-delete an entity and return it before deletion.</p> <p>Useful for endpoints that need to return the deleted entity in the response.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID</code>) \u2013 The ID of the entity to delete</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 The entity before it was deleted</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the entity doesn't exist</li> </ul>"},{"location":"api/reference/#leadrgamesservicesgame_servicegameserviceupdate_game","title":"# <code>leadr.games.services.game_service.GameService.update_game</code>","text":"<pre><code>update_game(game_id, name=None, steam_app_id=None, default_board_id=None)\n</code></pre> <p>Update game fields.</p> <p>Parameters:</p> <ul> <li>game_id (<code>UUID</code>) \u2013 The ID of the game to update</li> <li>name (<code>str | None</code>) \u2013 New game name, if provided</li> <li>steam_app_id (<code>str | None</code>) \u2013 New Steam app ID, if provided</li> <li>default_board_id (<code>UUID | None</code>) \u2013 New default board ID, if provided</li> </ul> <p>Returns:</p> <ul> <li><code>Game</code> \u2013 The updated Game domain entity</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If the game doesn't exist</li> </ul>"},{"location":"api/reference/#leadrgamesservicesrepositories","title":"<code>leadr.games.services.repositories</code>","text":"<p>Game repository services.</p> <p>Classes:</p> <ul> <li>GameRepository \u2013 Game repository for managing game persistence.</li> </ul>"},{"location":"api/reference/#leadrgamesservicesrepositoriesgamerepository","title":"<code>leadr.games.services.repositories.GameRepository</code>","text":"<p>Bases: <code>BaseRepository[Game, GameORM]</code></p> <p>Game repository for managing game persistence.</p> <p>Functions:</p> <ul> <li>create \u2013 Create a new entity in the database.</li> <li>delete \u2013 Soft delete an entity by setting its deleted_at timestamp.</li> <li>filter \u2013 Filter games by account and optional criteria.</li> <li>get_by_id \u2013 Get an entity by its ID.</li> <li>update \u2013 Update an existing entity in the database.</li> </ul> <p>Attributes:</p> <ul> <li>session \u2013</li> </ul>"},{"location":"api/reference/#leadrgamesservicesrepositoriesgamerepositorycreate","title":"# <code>leadr.games.services.repositories.GameRepository.create</code>","text":"<pre><code>create(entity)\n</code></pre> <p>Create a new entity in the database.</p> <p>Parameters:</p> <ul> <li>entity (<code>DomainEntityT</code>) \u2013 Domain entity to create</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 Created domain entity with refreshed data</li> </ul>"},{"location":"api/reference/#leadrgamesservicesrepositoriesgamerepositorydelete","title":"# <code>leadr.games.services.repositories.GameRepository.delete</code>","text":"<pre><code>delete(entity_id)\n</code></pre> <p>Soft delete an entity by setting its deleted_at timestamp.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID4</code>) \u2013 ID of entity to delete</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If entity is not found</li> </ul>"},{"location":"api/reference/#leadrgamesservicesrepositoriesgamerepositoryfilter","title":"# <code>leadr.games.services.repositories.GameRepository.filter</code>","text":"<pre><code>filter(account_id, **kwargs)\n</code></pre> <p>Filter games by account and optional criteria.</p> <p>Parameters:</p> <ul> <li>account_id (<code>UUID4</code>) \u2013 REQUIRED - Account ID to filter by (multi-tenant safety)</li> <li>**kwargs (<code>Any</code>) \u2013 Additional filter parameters (reserved for future use)</li> </ul> <p>Returns:</p> <ul> <li><code>list[Game]</code> \u2013 List of games for the account matching the filter criteria</li> </ul>"},{"location":"api/reference/#leadrgamesservicesrepositoriesgamerepositoryget_by_id","title":"# <code>leadr.games.services.repositories.GameRepository.get_by_id</code>","text":"<pre><code>get_by_id(entity_id, include_deleted=False)\n</code></pre> <p>Get an entity by its ID.</p> <p>Parameters:</p> <ul> <li>entity_id (<code>UUID4</code>) \u2013 Entity ID to retrieve</li> <li>include_deleted (<code>bool</code>) \u2013 If True, include soft-deleted entities. Defaults to False.</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT | None</code> \u2013 Domain entity if found, None otherwise</li> </ul>"},{"location":"api/reference/#leadrgamesservicesrepositoriesgamerepositorysession","title":"# <code>leadr.games.services.repositories.GameRepository.session</code>","text":"<pre><code>session = session\n</code></pre>"},{"location":"api/reference/#leadrgamesservicesrepositoriesgamerepositoryupdate","title":"# <code>leadr.games.services.repositories.GameRepository.update</code>","text":"<pre><code>update(entity)\n</code></pre> <p>Update an existing entity in the database.</p> <p>Parameters:</p> <ul> <li>entity (<code>DomainEntityT</code>) \u2013 Domain entity with updated data</li> </ul> <p>Returns:</p> <ul> <li><code>DomainEntityT</code> \u2013 Updated domain entity with refreshed data</li> </ul> <p>Raises:</p> <ul> <li><code>EntityNotFoundError</code> \u2013 If entity is not found</li> </ul>"},{"location":"api/reference/#leadrinfra","title":"<code>leadr.infra</code>","text":"<p>Modules:</p> <ul> <li>blob_storage \u2013</li> <li>cache \u2013</li> </ul>"},{"location":"api/reference/#leadrinfrablob_storage","title":"<code>leadr.infra.blob_storage</code>","text":"<p>Modules:</p> <ul> <li>adapters \u2013</li> <li>domain \u2013</li> <li>services \u2013</li> </ul>"},{"location":"api/reference/#leadrinfrablob_storageadapters","title":"<code>leadr.infra.blob_storage.adapters</code>","text":""},{"location":"api/reference/#leadrinfrablob_storagedomain","title":"<code>leadr.infra.blob_storage.domain</code>","text":""},{"location":"api/reference/#leadrinfrablob_storageservices","title":"<code>leadr.infra.blob_storage.services</code>","text":""},{"location":"api/reference/#leadrinfracache","title":"<code>leadr.infra.cache</code>","text":"<p>Modules:</p> <ul> <li>adapters \u2013</li> <li>domain \u2013</li> <li>services \u2013</li> </ul>"},{"location":"api/reference/#leadrinfracacheadapters","title":"<code>leadr.infra.cache.adapters</code>","text":""},{"location":"api/reference/#leadrinfracachedomain","title":"<code>leadr.infra.cache.domain</code>","text":""},{"location":"api/reference/#leadrinfracacheservices","title":"<code>leadr.infra.cache.services</code>","text":""},{"location":"api/reference/#leadrplayers","title":"<code>leadr.players</code>","text":"<p>Modules:</p> <ul> <li>adapters \u2013</li> <li>api \u2013</li> <li>domain \u2013</li> </ul>"},{"location":"api/reference/#leadrplayersadapters","title":"<code>leadr.players.adapters</code>","text":""},{"location":"api/reference/#leadrplayersapi","title":"<code>leadr.players.api</code>","text":""},{"location":"api/reference/#leadrplayersdomain","title":"<code>leadr.players.domain</code>","text":""},{"location":"api/reference/#leadrscores","title":"<code>leadr.scores</code>","text":"<p>Modules:</p> <ul> <li>adapters \u2013</li> <li>api \u2013</li> <li>domain \u2013</li> <li>services \u2013</li> </ul>"},{"location":"api/reference/#leadrscoresadapters","title":"<code>leadr.scores.adapters</code>","text":""},{"location":"api/reference/#leadrscoresapi","title":"<code>leadr.scores.api</code>","text":""},{"location":"api/reference/#leadrscoresdomain","title":"<code>leadr.scores.domain</code>","text":""},{"location":"api/reference/#leadrscoresservices","title":"<code>leadr.scores.services</code>","text":""}]}